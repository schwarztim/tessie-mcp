#!/usr/bin/env node
var Tb=Object.create;var Il=Object.defineProperty;var kb=Object.getOwnPropertyDescriptor;var Ob=Object.getOwnPropertyNames;var Cb=Object.getPrototypeOf,Db=Object.prototype.hasOwnProperty;var me=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),Ib=(a,e)=>{for(var t in e)Il(a,t,{get:e[t],enumerable:!0})},$b=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Ob(e))!Db.call(a,r)&&r!==t&&Il(a,r,{get:()=>e[r],enumerable:!(s=kb(e,r))||s.enumerable});return a};var $l=(a,e,t)=>(t=a!=null?Tb(Cb(a)):{},$b(e||!a||!a.__esModule?Il(t,"default",{value:a,enumerable:!0}):t,a));var Pf=me((bs,Sf)=>{(function(a,e){typeof bs=="object"&&typeof Sf<"u"?e(bs):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(bs,(function(a){"use strict";function e(){for(var T=arguments.length,P=Array(T),O=0;O<T;O++)P[O]=arguments[O];if(P.length>1){P[0]=P[0].slice(0,-1);for(var L=P.length-1,F=1;F<L;++F)P[F]=P[F].slice(1,-1);return P[L]=P[L].slice(1),P.join("")}else return P[0]}function t(T){return"(?:"+T+")"}function s(T){return T===void 0?"undefined":T===null?"null":Object.prototype.toString.call(T).split(" ").pop().split("]").shift().toLowerCase()}function r(T){return T.toUpperCase()}function o(T){return T!=null?T instanceof Array?T:typeof T.length!="number"||T.split||T.setInterval||T.call?[T]:Array.prototype.slice.call(T):[]}function c(T,P){var O=T;if(P)for(var L in P)O[L]=P[L];return O}function u(T){var P="[A-Za-z]",O="[\\x0D]",L="[0-9]",F="[\\x22]",re=e(L,"[A-Fa-f]"),be="[\\x0A]",Ie="[\\x20]",ze=t(t("%[EFef]"+re+"%"+re+re+"%"+re+re)+"|"+t("%[89A-Fa-f]"+re+"%"+re+re)+"|"+t("%"+re+re)),ct="[\\:\\/\\?\\#\\[\\]\\@]",Ce="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",nt=e(ct,Ce),ft=T?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Xe=T?"[\\uE000-\\uF8FF]":"[]",Ne=e(P,L,"[\\-\\.\\_\\~]",ft),at=t(P+e(P,L,"[\\+\\-\\.]")+"*"),je=t(t(ze+"|"+e(Ne,Ce,"[\\:]"))+"*"),Kr=t(t("25[0-5]")+"|"+t("2[0-4]"+L)+"|"+t("1"+L+L)+"|"+t("[1-9]"+L)+"|"+L),St=t(t("25[0-5]")+"|"+t("2[0-4]"+L)+"|"+t("1"+L+L)+"|"+t("0?[1-9]"+L)+"|0?0?"+L),Kt=t(St+"\\."+St+"\\."+St+"\\."+St),Ve=t(re+"{1,4}"),jt=t(t(Ve+"\\:"+Ve)+"|"+Kt),qt=t(t(Ve+"\\:")+"{6}"+jt),nr=t("\\:\\:"+t(Ve+"\\:")+"{5}"+jt),jr=t(t(Ve)+"?\\:\\:"+t(Ve+"\\:")+"{4}"+jt),Pr=t(t(t(Ve+"\\:")+"{0,1}"+Ve)+"?\\:\\:"+t(Ve+"\\:")+"{3}"+jt),In=t(t(t(Ve+"\\:")+"{0,2}"+Ve)+"?\\:\\:"+t(Ve+"\\:")+"{2}"+jt),ea=t(t(t(Ve+"\\:")+"{0,3}"+Ve)+"?\\:\\:"+Ve+"\\:"+jt),ta=t(t(t(Ve+"\\:")+"{0,4}"+Ve)+"?\\:\\:"+jt),Yr=t(t(t(Ve+"\\:")+"{0,5}"+Ve)+"?\\:\\:"+Ve),Qr=t(t(t(Ve+"\\:")+"{0,6}"+Ve)+"?\\:\\:"),hr=t([qt,nr,jr,Pr,In,ea,ta,Yr,Qr].join("|")),qr=t(t(Ne+"|"+ze)+"+"),Ca=t(hr+"\\%25"+qr),zr=t(hr+t("\\%25|\\%(?!"+re+"{2})")+qr),ra=t("[vV]"+re+"+\\."+e(Ne,Ce,"[\\:]")+"+"),di=t("\\["+t(zr+"|"+hr+"|"+ra)+"\\]"),fi=t(t(ze+"|"+e(Ne,Ce))+"*"),mn=t(di+"|"+Kt+"(?!"+fi+")|"+fi),gn=t(L+"*"),na=t(t(je+"@")+"?"+mn+t("\\:"+gn)+"?"),$n=t(ze+"|"+e(Ne,Ce,"[\\:\\@]")),hi=t($n+"*"),aa=t($n+"+"),Da=t(t(ze+"|"+e(Ne,Ce,"[\\@]"))+"+"),It=t(t("\\/"+hi)+"*"),Jr=t("\\/"+t(aa+It)+"?"),ia=t(Da+It),sa=t(aa+It),Xr="(?!"+$n+")",Po=t(It+"|"+Jr+"|"+ia+"|"+sa+"|"+Xr),en=t(t($n+"|"+e("[\\/\\?]",Xe))+"*"),vn=t(t($n+"|[\\/\\?]")+"*"),pi=t(t("\\/\\/"+na+It)+"|"+Jr+"|"+sa+"|"+Xr),Ro=t(at+"\\:"+pi+t("\\?"+en)+"?"+t("\\#"+vn)+"?"),Ao=t(t("\\/\\/"+na+It)+"|"+Jr+"|"+ia+"|"+Xr),mi=t(Ao+t("\\?"+en)+"?"+t("\\#"+vn)+"?"),Bc=t(Ro+"|"+mi),Vc=t(at+"\\:"+pi+t("\\?"+en)+"?"),Wc="^("+at+")\\:"+t(t("\\/\\/("+t("("+je+")@")+"?("+mn+")"+t("\\:("+gn+")")+"?)")+"?("+It+"|"+Jr+"|"+sa+"|"+Xr+")")+t("\\?("+en+")")+"?"+t("\\#("+vn+")")+"?$",Gc="^(){0}"+t(t("\\/\\/("+t("("+je+")@")+"?("+mn+")"+t("\\:("+gn+")")+"?)")+"?("+It+"|"+Jr+"|"+ia+"|"+Xr+")")+t("\\?("+en+")")+"?"+t("\\#("+vn+")")+"?$",gi="^("+at+")\\:"+t(t("\\/\\/("+t("("+je+")@")+"?("+mn+")"+t("\\:("+gn+")")+"?)")+"?("+It+"|"+Jr+"|"+sa+"|"+Xr+")")+t("\\?("+en+")")+"?$",Kc="^"+t("\\#("+vn+")")+"?$",Yc="^"+t("("+je+")@")+"?("+mn+")"+t("\\:("+gn+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",P,L,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Ne,Ce),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Ne,Ce),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Ne,Ce),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Ne,Ce),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Ne,Ce,"[\\:\\@\\/\\?]",Xe),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Ne,Ce,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Ne,Ce),"g"),UNRESERVED:new RegExp(Ne,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Ne,nt),"g"),PCT_ENCODED:new RegExp(ze,"g"),IPV4ADDRESS:new RegExp("^("+Kt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+hr+")"+t(t("\\%25|\\%(?!"+re+"{2})")+"("+qr+")")+"?\\]?$")}}var d=u(!1),h=u(!0),m=(function(){function T(P,O){var L=[],F=!0,re=!1,be=void 0;try{for(var Ie=P[Symbol.iterator](),ze;!(F=(ze=Ie.next()).done)&&(L.push(ze.value),!(O&&L.length===O));F=!0);}catch(ct){re=!0,be=ct}finally{try{!F&&Ie.return&&Ie.return()}finally{if(re)throw be}}return L}return function(P,O){if(Array.isArray(P))return P;if(Symbol.iterator in Object(P))return T(P,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),g=function(T){if(Array.isArray(T)){for(var P=0,O=Array(T.length);P<T.length;P++)O[P]=T[P];return O}else return Array.from(T)},v=2147483647,p=36,y=1,x=26,b=38,R=700,z=72,I=128,j="-",M=/^xn--/,$=/[^\0-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,W={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},B=p-y,J=Math.floor,te=String.fromCharCode;function ie(T){throw new RangeError(W[T])}function G(T,P){for(var O=[],L=T.length;L--;)O[L]=P(T[L]);return O}function Q(T,P){var O=T.split("@"),L="";O.length>1&&(L=O[0]+"@",T=O[1]),T=T.replace(H,".");var F=T.split("."),re=G(F,P).join(".");return L+re}function se(T){for(var P=[],O=0,L=T.length;O<L;){var F=T.charCodeAt(O++);if(F>=55296&&F<=56319&&O<L){var re=T.charCodeAt(O++);(re&64512)==56320?P.push(((F&1023)<<10)+(re&1023)+65536):(P.push(F),O--)}else P.push(F)}return P}var Ue=function(P){return String.fromCodePoint.apply(String,g(P))},ge=function(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:p},_e=function(P,O){return P+22+75*(P<26)-((O!=0)<<5)},xe=function(P,O,L){var F=0;for(P=L?J(P/R):P>>1,P+=J(P/O);P>B*x>>1;F+=p)P=J(P/B);return J(F+(B+1)*P/(P+b))},ce=function(P){var O=[],L=P.length,F=0,re=I,be=z,Ie=P.lastIndexOf(j);Ie<0&&(Ie=0);for(var ze=0;ze<Ie;++ze)P.charCodeAt(ze)>=128&&ie("not-basic"),O.push(P.charCodeAt(ze));for(var ct=Ie>0?Ie+1:0;ct<L;){for(var Ce=F,nt=1,ft=p;;ft+=p){ct>=L&&ie("invalid-input");var Xe=ge(P.charCodeAt(ct++));(Xe>=p||Xe>J((v-F)/nt))&&ie("overflow"),F+=Xe*nt;var Ne=ft<=be?y:ft>=be+x?x:ft-be;if(Xe<Ne)break;var at=p-Ne;nt>J(v/at)&&ie("overflow"),nt*=at}var je=O.length+1;be=xe(F-Ce,je,Ce==0),J(F/je)>v-re&&ie("overflow"),re+=J(F/je),F%=je,O.splice(F++,0,re)}return String.fromCodePoint.apply(String,O)},Fe=function(P){var O=[];P=se(P);var L=P.length,F=I,re=0,be=z,Ie=!0,ze=!1,ct=void 0;try{for(var Ce=P[Symbol.iterator](),nt;!(Ie=(nt=Ce.next()).done);Ie=!0){var ft=nt.value;ft<128&&O.push(te(ft))}}catch(zr){ze=!0,ct=zr}finally{try{!Ie&&Ce.return&&Ce.return()}finally{if(ze)throw ct}}var Xe=O.length,Ne=Xe;for(Xe&&O.push(j);Ne<L;){var at=v,je=!0,Kr=!1,St=void 0;try{for(var Kt=P[Symbol.iterator](),Ve;!(je=(Ve=Kt.next()).done);je=!0){var jt=Ve.value;jt>=F&&jt<at&&(at=jt)}}catch(zr){Kr=!0,St=zr}finally{try{!je&&Kt.return&&Kt.return()}finally{if(Kr)throw St}}var qt=Ne+1;at-F>J((v-re)/qt)&&ie("overflow"),re+=(at-F)*qt,F=at;var nr=!0,jr=!1,Pr=void 0;try{for(var In=P[Symbol.iterator](),ea;!(nr=(ea=In.next()).done);nr=!0){var ta=ea.value;if(ta<F&&++re>v&&ie("overflow"),ta==F){for(var Yr=re,Qr=p;;Qr+=p){var hr=Qr<=be?y:Qr>=be+x?x:Qr-be;if(Yr<hr)break;var qr=Yr-hr,Ca=p-hr;O.push(te(_e(hr+qr%Ca,0))),Yr=J(qr/Ca)}O.push(te(_e(Yr,0))),be=xe(re,qt,Ne==Xe),re=0,++Ne}}}catch(zr){jr=!0,Pr=zr}finally{try{!nr&&In.return&&In.return()}finally{if(jr)throw Pr}}++re,++F}return O.join("")},Et=function(P){return Q(P,function(O){return M.test(O)?ce(O.slice(4).toLowerCase()):O})},At=function(P){return Q(P,function(O){return $.test(O)?"xn--"+Fe(O):O})},Le={version:"2.1.0",ucs2:{decode:se,encode:Ue},decode:ce,encode:Fe,toASCII:At,toUnicode:Et},Ke={};function lt(T){var P=T.charCodeAt(0),O=void 0;return P<16?O="%0"+P.toString(16).toUpperCase():P<128?O="%"+P.toString(16).toUpperCase():P<2048?O="%"+(P>>6|192).toString(16).toUpperCase()+"%"+(P&63|128).toString(16).toUpperCase():O="%"+(P>>12|224).toString(16).toUpperCase()+"%"+(P>>6&63|128).toString(16).toUpperCase()+"%"+(P&63|128).toString(16).toUpperCase(),O}function Tt(T){for(var P="",O=0,L=T.length;O<L;){var F=parseInt(T.substr(O+1,2),16);if(F<128)P+=String.fromCharCode(F),O+=3;else if(F>=194&&F<224){if(L-O>=6){var re=parseInt(T.substr(O+4,2),16);P+=String.fromCharCode((F&31)<<6|re&63)}else P+=T.substr(O,6);O+=6}else if(F>=224){if(L-O>=9){var be=parseInt(T.substr(O+4,2),16),Ie=parseInt(T.substr(O+7,2),16);P+=String.fromCharCode((F&15)<<12|(be&63)<<6|Ie&63)}else P+=T.substr(O,9);O+=9}else P+=T.substr(O,3),O+=3}return P}function Vt(T,P){function O(L){var F=Tt(L);return F.match(P.UNRESERVED)?F:L}return T.scheme&&(T.scheme=String(T.scheme).replace(P.PCT_ENCODED,O).toLowerCase().replace(P.NOT_SCHEME,"")),T.userinfo!==void 0&&(T.userinfo=String(T.userinfo).replace(P.PCT_ENCODED,O).replace(P.NOT_USERINFO,lt).replace(P.PCT_ENCODED,r)),T.host!==void 0&&(T.host=String(T.host).replace(P.PCT_ENCODED,O).toLowerCase().replace(P.NOT_HOST,lt).replace(P.PCT_ENCODED,r)),T.path!==void 0&&(T.path=String(T.path).replace(P.PCT_ENCODED,O).replace(T.scheme?P.NOT_PATH:P.NOT_PATH_NOSCHEME,lt).replace(P.PCT_ENCODED,r)),T.query!==void 0&&(T.query=String(T.query).replace(P.PCT_ENCODED,O).replace(P.NOT_QUERY,lt).replace(P.PCT_ENCODED,r)),T.fragment!==void 0&&(T.fragment=String(T.fragment).replace(P.PCT_ENCODED,O).replace(P.NOT_FRAGMENT,lt).replace(P.PCT_ENCODED,r)),T}function Lt(T){return T.replace(/^0*(.*)/,"$1")||"0"}function dt(T,P){var O=T.match(P.IPV4ADDRESS)||[],L=m(O,2),F=L[1];return F?F.split(".").map(Lt).join("."):T}function Ye(T,P){var O=T.match(P.IPV6ADDRESS)||[],L=m(O,3),F=L[1],re=L[2];if(F){for(var be=F.toLowerCase().split("::").reverse(),Ie=m(be,2),ze=Ie[0],ct=Ie[1],Ce=ct?ct.split(":").map(Lt):[],nt=ze.split(":").map(Lt),ft=P.IPV4ADDRESS.test(nt[nt.length-1]),Xe=ft?7:8,Ne=nt.length-Xe,at=Array(Xe),je=0;je<Xe;++je)at[je]=Ce[je]||nt[Ne+je]||"";ft&&(at[Xe-1]=dt(at[Xe-1],P));var Kr=at.reduce(function(qt,nr,jr){if(!nr||nr==="0"){var Pr=qt[qt.length-1];Pr&&Pr.index+Pr.length===jr?Pr.length++:qt.push({index:jr,length:1})}return qt},[]),St=Kr.sort(function(qt,nr){return nr.length-qt.length})[0],Kt=void 0;if(St&&St.length>1){var Ve=at.slice(0,St.index),jt=at.slice(St.index+St.length);Kt=Ve.join(":")+"::"+jt.join(":")}else Kt=at.join(":");return re&&(Kt+="%"+re),Kt}else return T}var dr=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,_t="".match(/(){0}/)[1]===void 0;function ye(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O={},L=P.iri!==!1?h:d;P.reference==="suffix"&&(T=(P.scheme?P.scheme+":":"")+"//"+T);var F=T.match(dr);if(F){_t?(O.scheme=F[1],O.userinfo=F[3],O.host=F[4],O.port=parseInt(F[5],10),O.path=F[6]||"",O.query=F[7],O.fragment=F[8],isNaN(O.port)&&(O.port=F[5])):(O.scheme=F[1]||void 0,O.userinfo=T.indexOf("@")!==-1?F[3]:void 0,O.host=T.indexOf("//")!==-1?F[4]:void 0,O.port=parseInt(F[5],10),O.path=F[6]||"",O.query=T.indexOf("?")!==-1?F[7]:void 0,O.fragment=T.indexOf("#")!==-1?F[8]:void 0,isNaN(O.port)&&(O.port=T.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?F[4]:void 0)),O.host&&(O.host=Ye(dt(O.host,L),L)),O.scheme===void 0&&O.userinfo===void 0&&O.host===void 0&&O.port===void 0&&!O.path&&O.query===void 0?O.reference="same-document":O.scheme===void 0?O.reference="relative":O.fragment===void 0?O.reference="absolute":O.reference="uri",P.reference&&P.reference!=="suffix"&&P.reference!==O.reference&&(O.error=O.error||"URI is not a "+P.reference+" reference.");var re=Ke[(P.scheme||O.scheme||"").toLowerCase()];if(!P.unicodeSupport&&(!re||!re.unicodeSupport)){if(O.host&&(P.domainHost||re&&re.domainHost))try{O.host=Le.toASCII(O.host.replace(L.PCT_ENCODED,Tt).toLowerCase())}catch(be){O.error=O.error||"Host's domain name can not be converted to ASCII via punycode: "+be}Vt(O,d)}else Vt(O,L);re&&re.parse&&re.parse(O,P)}else O.error=O.error||"URI can not be parsed.";return O}function Wt(T,P){var O=P.iri!==!1?h:d,L=[];return T.userinfo!==void 0&&(L.push(T.userinfo),L.push("@")),T.host!==void 0&&L.push(Ye(dt(String(T.host),O),O).replace(O.IPV6ADDRESS,function(F,re,be){return"["+re+(be?"%25"+be:"")+"]"})),(typeof T.port=="number"||typeof T.port=="string")&&(L.push(":"),L.push(String(T.port))),L.length?L.join(""):void 0}var Sr=/^\.\.?\//,kt=/^\/\.(\/|$)/,Nr=/^\/\.\.(\/|$)/,yt=/^\/?(?:.|\n)*?(?=\/|$)/;function xt(T){for(var P=[];T.length;)if(T.match(Sr))T=T.replace(Sr,"");else if(T.match(kt))T=T.replace(kt,"/");else if(T.match(Nr))T=T.replace(Nr,"/"),P.pop();else if(T==="."||T==="..")T="";else{var O=T.match(yt);if(O){var L=O[0];T=T.slice(L.length),P.push(L)}else throw new Error("Unexpected dot segment condition")}return P.join("")}function Je(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=P.iri?h:d,L=[],F=Ke[(P.scheme||T.scheme||"").toLowerCase()];if(F&&F.serialize&&F.serialize(T,P),T.host&&!O.IPV6ADDRESS.test(T.host)){if(P.domainHost||F&&F.domainHost)try{T.host=P.iri?Le.toUnicode(T.host):Le.toASCII(T.host.replace(O.PCT_ENCODED,Tt).toLowerCase())}catch(Ie){T.error=T.error||"Host's domain name can not be converted to "+(P.iri?"Unicode":"ASCII")+" via punycode: "+Ie}}Vt(T,O),P.reference!=="suffix"&&T.scheme&&(L.push(T.scheme),L.push(":"));var re=Wt(T,P);if(re!==void 0&&(P.reference!=="suffix"&&L.push("//"),L.push(re),T.path&&T.path.charAt(0)!=="/"&&L.push("/")),T.path!==void 0){var be=T.path;!P.absolutePath&&(!F||!F.absolutePath)&&(be=xt(be)),re===void 0&&(be=be.replace(/^\/\//,"/%2F")),L.push(be)}return T.query!==void 0&&(L.push("?"),L.push(T.query)),T.fragment!==void 0&&(L.push("#"),L.push(T.fragment)),L.join("")}function mt(T,P){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=arguments[3],F={};return L||(T=ye(Je(T,O),O),P=ye(Je(P,O),O)),O=O||{},!O.tolerant&&P.scheme?(F.scheme=P.scheme,F.userinfo=P.userinfo,F.host=P.host,F.port=P.port,F.path=xt(P.path||""),F.query=P.query):(P.userinfo!==void 0||P.host!==void 0||P.port!==void 0?(F.userinfo=P.userinfo,F.host=P.host,F.port=P.port,F.path=xt(P.path||""),F.query=P.query):(P.path?(P.path.charAt(0)==="/"?F.path=xt(P.path):((T.userinfo!==void 0||T.host!==void 0||T.port!==void 0)&&!T.path?F.path="/"+P.path:T.path?F.path=T.path.slice(0,T.path.lastIndexOf("/")+1)+P.path:F.path=P.path,F.path=xt(F.path)),F.query=P.query):(F.path=T.path,P.query!==void 0?F.query=P.query:F.query=T.query),F.userinfo=T.userinfo,F.host=T.host,F.port=T.port),F.scheme=T.scheme),F.fragment=P.fragment,F}function Nt(T,P,O){var L=c({scheme:"null"},O);return Je(mt(ye(T,L),ye(P,L),L,!0),L)}function Ft(T,P){return typeof T=="string"?T=Je(ye(T,P),P):s(T)==="object"&&(T=ye(Je(T,P),P)),T}function Fr(T,P,O){return typeof T=="string"?T=Je(ye(T,O),O):s(T)==="object"&&(T=Je(T,O)),typeof P=="string"?P=Je(ye(P,O),O):s(P)==="object"&&(P=Je(P,O)),T===P}function Ra(T,P){return T&&T.toString().replace(!P||!P.iri?d.ESCAPE:h.ESCAPE,lt)}function Ot(T,P){return T&&T.toString().replace(!P||!P.iri?d.PCT_ENCODED:h.PCT_ENCODED,Tt)}var fr={scheme:"http",domainHost:!0,parse:function(P,O){return P.host||(P.error=P.error||"HTTP URIs must have a host."),P},serialize:function(P,O){var L=String(P.scheme).toLowerCase()==="https";return(P.port===(L?443:80)||P.port==="")&&(P.port=void 0),P.path||(P.path="/"),P}},Kn={scheme:"https",domainHost:fr.domainHost,parse:fr.parse,serialize:fr.serialize};function Yn(T){return typeof T.secure=="boolean"?T.secure:String(T.scheme).toLowerCase()==="wss"}var Gr={scheme:"ws",domainHost:!0,parse:function(P,O){var L=P;return L.secure=Yn(L),L.resourceName=(L.path||"/")+(L.query?"?"+L.query:""),L.path=void 0,L.query=void 0,L},serialize:function(P,O){if((P.port===(Yn(P)?443:80)||P.port==="")&&(P.port=void 0),typeof P.secure=="boolean"&&(P.scheme=P.secure?"wss":"ws",P.secure=void 0),P.resourceName){var L=P.resourceName.split("?"),F=m(L,2),re=F[0],be=F[1];P.path=re&&re!=="/"?re:void 0,P.query=be,P.resourceName=void 0}return P.fragment=void 0,P}},Qn={scheme:"wss",domainHost:Gr.domainHost,parse:Gr.parse,serialize:Gr.serialize},Aa={},Ta=!0,Jn="[A-Za-z0-9\\-\\.\\_\\~"+(Ta?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Gt="[0-9A-Fa-f]",ka=t(t("%[EFef]"+Gt+"%"+Gt+Gt+"%"+Gt+Gt)+"|"+t("%[89A-Fa-f]"+Gt+"%"+Gt+Gt)+"|"+t("%"+Gt+Gt)),yo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",bo="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",wo=e(bo,'[\\"\\\\]'),ii="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",si=new RegExp(Jn,"g"),pn=new RegExp(ka,"g"),Eo=new RegExp(e("[^]",yo,"[\\.]",'[\\"]',wo),"g"),oi=new RegExp(e("[^]",Jn,ii),"g"),xo=oi;function Xn(T){var P=Tt(T);return P.match(si)?P:T}var li={scheme:"mailto",parse:function(P,O){var L=P,F=L.to=L.path?L.path.split(","):[];if(L.path=void 0,L.query){for(var re=!1,be={},Ie=L.query.split("&"),ze=0,ct=Ie.length;ze<ct;++ze){var Ce=Ie[ze].split("=");switch(Ce[0]){case"to":for(var nt=Ce[1].split(","),ft=0,Xe=nt.length;ft<Xe;++ft)F.push(nt[ft]);break;case"subject":L.subject=Ot(Ce[1],O);break;case"body":L.body=Ot(Ce[1],O);break;default:re=!0,be[Ot(Ce[0],O)]=Ot(Ce[1],O);break}}re&&(L.headers=be)}L.query=void 0;for(var Ne=0,at=F.length;Ne<at;++Ne){var je=F[Ne].split("@");if(je[0]=Ot(je[0]),O.unicodeSupport)je[1]=Ot(je[1],O).toLowerCase();else try{je[1]=Le.toASCII(Ot(je[1],O).toLowerCase())}catch(Kr){L.error=L.error||"Email address's domain name can not be converted to ASCII via punycode: "+Kr}F[Ne]=je.join("@")}return L},serialize:function(P,O){var L=P,F=o(P.to);if(F){for(var re=0,be=F.length;re<be;++re){var Ie=String(F[re]),ze=Ie.lastIndexOf("@"),ct=Ie.slice(0,ze).replace(pn,Xn).replace(pn,r).replace(Eo,lt),Ce=Ie.slice(ze+1);try{Ce=O.iri?Le.toUnicode(Ce):Le.toASCII(Ot(Ce,O).toLowerCase())}catch(Ne){L.error=L.error||"Email address's domain name can not be converted to "+(O.iri?"Unicode":"ASCII")+" via punycode: "+Ne}F[re]=ct+"@"+Ce}L.path=F.join(",")}var nt=P.headers=P.headers||{};P.subject&&(nt.subject=P.subject),P.body&&(nt.body=P.body);var ft=[];for(var Xe in nt)nt[Xe]!==Aa[Xe]&&ft.push(Xe.replace(pn,Xn).replace(pn,r).replace(oi,lt)+"="+nt[Xe].replace(pn,Xn).replace(pn,r).replace(xo,lt));return ft.length&&(L.query=ft.join("&")),L}},So=/^([^\:]+)\:(.*)/,ci={scheme:"urn",parse:function(P,O){var L=P.path&&P.path.match(So),F=P;if(L){var re=O.scheme||F.scheme||"urn",be=L[1].toLowerCase(),Ie=L[2],ze=re+":"+(O.nid||be),ct=Ke[ze];F.nid=be,F.nss=Ie,F.path=void 0,ct&&(F=ct.parse(F,O))}else F.error=F.error||"URN can not be parsed.";return F},serialize:function(P,O){var L=O.scheme||P.scheme||"urn",F=P.nid,re=L+":"+(O.nid||F),be=Ke[re];be&&(P=be.serialize(P,O));var Ie=P,ze=P.nss;return Ie.path=(F||O.nid)+":"+ze,Ie}},Oa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ui={scheme:"urn:uuid",parse:function(P,O){var L=P;return L.uuid=L.nss,L.nss=void 0,!O.tolerant&&(!L.uuid||!L.uuid.match(Oa))&&(L.error=L.error||"UUID is not valid."),L},serialize:function(P,O){var L=P;return L.nss=(P.uuid||"").toLowerCase(),L}};Ke[fr.scheme]=fr,Ke[Kn.scheme]=Kn,Ke[Gr.scheme]=Gr,Ke[Qn.scheme]=Qn,Ke[li.scheme]=li,Ke[ci.scheme]=ci,Ke[ui.scheme]=ui,a.SCHEMES=Ke,a.pctEncChar=lt,a.pctDecChars=Tt,a.parse=ye,a.removeDotSegments=xt,a.serialize=Je,a.resolveComponents=mt,a.resolve=Nt,a.normalize=Ft,a.equal=Fr,a.escapeComponent=Ra,a.unescapeComponent=Ot,Object.defineProperty(a,"__esModule",{value:!0})}))});var ws=me((rP,Rf)=>{"use strict";Rf.exports=function a(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,r,o;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(r=s;r--!==0;)if(!a(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=s;r--!==0;){var c=o[r];if(!a(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}});var Tf=me((nP,Af)=>{"use strict";Af.exports=function(e){for(var t=0,s=e.length,r=0,o;r<s;)t++,o=e.charCodeAt(r++),o>=55296&&o<=56319&&r<s&&(o=e.charCodeAt(r),(o&64512)==56320&&r++);return t}});var Zn=me((aP,Cf)=>{"use strict";Cf.exports={copy:Sw,checkDataType:Wl,checkDataTypes:Pw,coerceToTypes:Rw,toHash:Kl,getProperty:Yl,escapeQuotes:Ql,equal:ws(),ucs2length:Tf(),varOccurences:kw,varReplace:Ow,schemaHasRules:Cw,schemaHasRulesExcept:Dw,schemaUnknownRules:Iw,toQuotedString:Gl,getPathExpr:$w,getPath:Mw,getData:Fw,unescapeFragment:jw,unescapeJsonPointer:Xl,escapeFragment:qw,escapeJsonPointer:Jl};function Sw(a,e){e=e||{};for(var t in a)e[t]=a[t];return e}function Wl(a,e,t,s){var r=s?" !== ":" === ",o=s?" || ":" && ",c=s?"!":"",u=s?"":"!";switch(a){case"null":return e+r+"null";case"array":return c+"Array.isArray("+e+")";case"object":return"("+c+e+o+"typeof "+e+r+'"object"'+o+u+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+o+u+"("+e+" % 1)"+o+e+r+e+(t?o+c+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+r+'"'+a+'"'+(t?o+c+"isFinite("+e+")":"")+")";default:return"typeof "+e+r+'"'+a+'"'}}function Pw(a,e,t){switch(a.length){case 1:return Wl(a[0],e,t,!0);default:var s="",r=Kl(a);r.array&&r.object&&(s=r.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var o in r)s+=(s?" && ":"")+Wl(o,e,t,!0);return s}}var kf=Kl(["string","number","integer","boolean","null"]);function Rw(a,e){if(Array.isArray(e)){for(var t=[],s=0;s<e.length;s++){var r=e[s];(kf[r]||a==="array"&&r==="array")&&(t[t.length]=r)}if(t.length)return t}else{if(kf[e])return[e];if(a==="array"&&e==="array")return["array"]}}function Kl(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=!0;return e}var Aw=/^[a-z$_][a-z$_0-9]*$/i,Tw=/'|\\/g;function Yl(a){return typeof a=="number"?"["+a+"]":Aw.test(a)?"."+a:"['"+Ql(a)+"']"}function Ql(a){return a.replace(Tw,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function kw(a,e){e+="[^0-9]";var t=a.match(new RegExp(e,"g"));return t?t.length:0}function Ow(a,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),t+"$1")}function Cw(a,e){if(typeof a=="boolean")return!a;for(var t in a)if(e[t])return!0}function Dw(a,e,t){if(typeof a=="boolean")return!a&&t!="not";for(var s in a)if(s!=t&&e[s])return!0}function Iw(a,e){if(typeof a!="boolean"){for(var t in a)if(!e[t])return t}}function Gl(a){return"'"+Ql(a)+"'"}function $w(a,e,t,s){var r=t?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return Of(a,r)}function Mw(a,e,t){var s=Gl(t?"/"+Jl(e):Yl(e));return Of(a,s)}var Lw=/^\/(?:[^~]|~0|~1)*$/,Nw=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Fw(a,e,t){var s,r,o,c;if(a==="")return"rootData";if(a[0]=="/"){if(!Lw.test(a))throw new Error("Invalid JSON-pointer: "+a);r=a,o="rootData"}else{if(c=a.match(Nw),!c)throw new Error("Invalid JSON-pointer: "+a);if(s=+c[1],r=c[2],r=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return t[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(o="data"+(e-s||""),!r)return o}for(var u=o,d=r.split("/"),h=0;h<d.length;h++){var m=d[h];m&&(o+=Yl(Xl(m)),u+=" && "+o)}return u}function Of(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function jw(a){return Xl(decodeURIComponent(a))}function qw(a){return encodeURIComponent(Jl(a))}function Jl(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function Xl(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}});var ec=me((iP,Df)=>{"use strict";var zw=Zn();Df.exports=Uw;function Uw(a){zw.copy(a,this)}});var $f=me((sP,If)=>{"use strict";var Tn=If.exports=function(a,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var s=typeof t=="function"?t:t.pre||function(){},r=t.post||function(){};Es(e,s,r,a,"",a)};Tn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Tn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Tn.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Tn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Es(a,e,t,s,r,o,c,u,d,h){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,r,o,c,u,d,h);for(var m in s){var g=s[m];if(Array.isArray(g)){if(m in Tn.arrayKeywords)for(var v=0;v<g.length;v++)Es(a,e,t,g[v],r+"/"+m+"/"+v,o,r,m,s,v)}else if(m in Tn.propsKeywords){if(g&&typeof g=="object")for(var p in g)Es(a,e,t,g[p],r+"/"+m+"/"+Hw(p),o,r,m,s,p)}else(m in Tn.keywords||a.allKeys&&!(m in Tn.skipKeywords))&&Es(a,e,t,g,r+"/"+m,o,r,m,s)}t(s,r,o,c,u,d,h)}}function Hw(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}});var Ts=me((oP,Ff)=>{"use strict";var Qa=Pf(),Mf=ws(),Rs=Zn(),xs=ec(),Zw=$f();Ff.exports=On;On.normalizeId=kn;On.fullPath=Ss;On.url=Ps;On.ids=Kw;On.inlineRef=tc;On.schema=As;function On(a,e,t){var s=this._refs[t];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return On.call(this,a,e,s);if(s=s||this._schemas[t],s instanceof xs)return tc(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var r=As.call(this,e,t),o,c,u;return r&&(o=r.schema,e=r.root,u=r.baseId),o instanceof xs?c=o.validate||a.call(this,o.schema,e,void 0,u):o!==void 0&&(c=tc(o,this._opts.inlineRefs)?o:a.call(this,o,e,void 0,u)),c}function As(a,e){var t=Qa.parse(e),s=Nf(t),r=Ss(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==r){var o=kn(s),c=this._refs[o];if(typeof c=="string")return Bw.call(this,a,c,t);if(c instanceof xs)c.validate||this._compile(c),a=c;else if(c=this._schemas[o],c instanceof xs){if(c.validate||this._compile(c),o==kn(e))return{schema:c,root:a,baseId:r};a=c}else return;if(!a.schema)return;r=Ss(this._getId(a.schema))}return Lf.call(this,t,r,a.schema,a)}function Bw(a,e,t){var s=As.call(this,a,e);if(s){var r=s.schema,o=s.baseId;a=s.root;var c=this._getId(r);return c&&(o=Ps(o,c)),Lf.call(this,t,o,r,a)}}var Vw=Rs.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Lf(a,e,t,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var r=a.fragment.split("/"),o=1;o<r.length;o++){var c=r[o];if(c){if(c=Rs.unescapeFragment(c),t=t[c],t===void 0)break;var u;if(!Vw[c]&&(u=this._getId(t),u&&(e=Ps(e,u)),t.$ref)){var d=Ps(e,t.$ref),h=As.call(this,s,d);h&&(t=h.schema,s=h.root,e=h.baseId)}}}if(t!==void 0&&t!==s.schema)return{schema:t,root:s,baseId:e}}}var Ww=Rs.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function tc(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return rc(a);if(e)return nc(a)<=e}function rc(a){var e;if(Array.isArray(a)){for(var t=0;t<a.length;t++)if(e=a[t],typeof e=="object"&&!rc(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!rc(e)))return!1;return!0}function nc(a){var e=0,t;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(t=a[s],typeof t=="object"&&(e+=nc(t)),e==1/0)return 1/0}else for(var r in a){if(r=="$ref")return 1/0;if(Ww[r])e++;else if(t=a[r],typeof t=="object"&&(e+=nc(t)+1),e==1/0)return 1/0}return e}function Ss(a,e){e!==!1&&(a=kn(a));var t=Qa.parse(a);return Nf(t)}function Nf(a){return Qa.serialize(a).split("#")[0]+"#"}var Gw=/#\/?$/;function kn(a){return a?a.replace(Gw,""):""}function Ps(a,e){return e=kn(e),Qa.resolve(a,e)}function Kw(a){var e=kn(this._getId(a)),t={"":e},s={"":Ss(e,!1)},r={},o=this;return Zw(a,{allKeys:!0},function(c,u,d,h,m,g,v){if(u!==""){var p=o._getId(c),y=t[h],x=s[h]+"/"+m;if(v!==void 0&&(x+="/"+(typeof v=="number"?v:Rs.escapeFragment(v))),typeof p=="string"){p=y=kn(y?Qa.resolve(y,p):p);var b=o._refs[p];if(typeof b=="string"&&(b=o._refs[b]),b&&b.schema){if(!Mf(c,b.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=kn(x))if(p[0]=="#"){if(r[p]&&!Mf(c,r[p]))throw new Error('id "'+p+'" resolves to more than one schema');r[p]=c}else o._refs[p]=x}t[u]=y,s[u]=x}}),r}});var ks=me((lP,qf)=>{"use strict";var ac=Ts();qf.exports={Validation:jf(Yw),MissingRef:jf(ic)};function Yw(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}ic.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function ic(a,e,t){this.message=t||ic.message(a,e),this.missingRef=ac.url(a,e),this.missingSchema=ac.normalizeId(ac.fullPath(this.missingRef))}function jf(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}});var sc=me((cP,zf)=>{"use strict";zf.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&(function(o){return function(c){return function(u,d){var h={key:u,value:c[u]},m={key:d,value:c[d]};return o(h,m)}}})(e.cmp),r=[];return(function o(c){if(c&&c.toJSON&&typeof c.toJSON=="function"&&(c=c.toJSON()),c!==void 0){if(typeof c=="number")return isFinite(c)?""+c:"null";if(typeof c!="object")return JSON.stringify(c);var u,d;if(Array.isArray(c)){for(d="[",u=0;u<c.length;u++)u&&(d+=","),d+=o(c[u])||"null";return d+"]"}if(c===null)return"null";if(r.indexOf(c)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=r.push(c)-1,m=Object.keys(c).sort(s&&s(c));for(d="",u=0;u<m.length;u++){var g=m[u],v=o(c[g]);v&&(d&&(d+=","),d+=JSON.stringify(g)+":"+v)}return r.splice(h,1),"{"+d+"}"}})(a)}});var oc=me((uP,Uf)=>{"use strict";Uf.exports=function(e,t,s){var r="",o=e.schema.$async===!0,c=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),u=e.self._getId(e.schema);if(e.opts.strictKeywords){var d=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(d){var h="unknown keyword: "+d;if(e.opts.strictKeywords==="log")e.logger.warn(h);else throw new Error(h)}}if(e.isTop&&(r+=" var validate = ",o&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",u&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" "+("/*# sourceURL="+u+" */")+" ")),typeof e.schema=="boolean"||!(c||e.schema.$ref)){var t="false schema",m=e.level,g=e.dataLevel,v=e.schema[t],p=e.schemaPath+e.util.getProperty(t),y=e.errSchemaPath+"/"+t,M=!e.opts.allErrors,W,x="data"+(g||""),j="valid"+m;if(e.schema===!1){e.isTop?M=!0:r+=" var "+j+" = false; ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+x+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+j+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var z=e.isTop,m=e.level=0,g=e.dataLevel=0,x="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var I="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(I);else throw new Error(I)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var m=e.level,g=e.dataLevel,x="data"+(g||"");if(u&&(e.baseId=e.resolve.url(e.baseId,u)),o&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+m+" = errors;"}var j="valid"+m,M=!e.opts.allErrors,$="",H="",W,B=e.schema.type,J=Array.isArray(B);if(B&&e.opts.nullable&&e.schema.nullable===!0&&(J?B.indexOf("null")==-1&&(B=B.concat("null")):B!="null"&&(B=[B,"null"],J=!0)),J&&B.length==1&&(B=B[0],J=!1),e.schema.$ref&&c){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(c=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),B){if(e.opts.coerceTypes)var te=e.util.coerceToTypes(e.opts.coerceTypes,B);var ie=e.RULES.types[B];if(te||J||ie===!0||ie&&!yt(ie)){var p=e.schemaPath+".type",y=e.errSchemaPath+"/type",p=e.schemaPath+".type",y=e.errSchemaPath+"/type",G=J?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[G](B,x,e.opts.strictNumbers,!0)+") { ",te){var Q="dataType"+m,se="coerced"+m;r+=" var "+Q+" = typeof "+x+"; var "+se+" = undefined; ",e.opts.coerceTypes=="array"&&(r+=" if ("+Q+" == 'object' && Array.isArray("+x+") && "+x+".length == 1) { "+x+" = "+x+"[0]; "+Q+" = typeof "+x+"; if ("+e.util.checkDataType(e.schema.type,x,e.opts.strictNumbers)+") "+se+" = "+x+"; } "),r+=" if ("+se+" !== undefined) ; ";var Ue=te;if(Ue)for(var ge,_e=-1,xe=Ue.length-1;_e<xe;)ge=Ue[_e+=1],ge=="string"?r+=" else if ("+Q+" == 'number' || "+Q+" == 'boolean') "+se+" = '' + "+x+"; else if ("+x+" === null) "+se+" = ''; ":ge=="number"||ge=="integer"?(r+=" else if ("+Q+" == 'boolean' || "+x+" === null || ("+Q+" == 'string' && "+x+" && "+x+" == +"+x+" ",ge=="integer"&&(r+=" && !("+x+" % 1)"),r+=")) "+se+" = +"+x+"; "):ge=="boolean"?r+=" else if ("+x+" === 'false' || "+x+" === 0 || "+x+" === null) "+se+" = false; else if ("+x+" === 'true' || "+x+" === 1) "+se+" = true; ":ge=="null"?r+=" else if ("+x+" === '' || "+x+" === 0 || "+x+" === false) "+se+" = null; ":e.opts.coerceTypes=="array"&&ge=="array"&&(r+=" else if ("+Q+" == 'string' || "+Q+" == 'number' || "+Q+" == 'boolean' || "+x+" == null) "+se+" = ["+x+"]; ");r+=" else {   ";var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+x+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+se+" !== undefined) {  ";var ce=g?"data"+(g-1||""):"parentData",Fe=g?e.dataPathArr[g]:"parentDataProperty";r+=" "+x+" = "+se+"; ",g||(r+="if ("+ce+" !== undefined)"),r+=" "+ce+"["+Fe+"] = "+se+"; } "}else{var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+x+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!c)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",M&&(r+=" } if (errors === ",z?r+="0":r+="errs_"+m,r+=") { ",H+="}");else{var Et=e.RULES;if(Et){for(var ie,At=-1,Le=Et.length-1;At<Le;)if(ie=Et[At+=1],yt(ie)){if(ie.type&&(r+=" if ("+e.util.checkDataType(ie.type,x,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(ie.type=="object"&&e.schema.properties){var v=e.schema.properties,Ke=Object.keys(v),lt=Ke;if(lt)for(var Tt,Vt=-1,Lt=lt.length-1;Vt<Lt;){Tt=lt[Vt+=1];var dt=v[Tt];if(dt.default!==void 0){var Ye=x+e.util.getProperty(Tt);if(e.compositeRule){if(e.opts.strictDefaults){var I="default is ignored for: "+Ye;if(e.opts.strictDefaults==="log")e.logger.warn(I);else throw new Error(I)}}else r+=" if ("+Ye+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ye+" === null || "+Ye+" === '' "),r+=" ) "+Ye+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(dt.default)+" ":r+=" "+JSON.stringify(dt.default)+" ",r+="; "}}}else if(ie.type=="array"&&Array.isArray(e.schema.items)){var dr=e.schema.items;if(dr){for(var dt,_e=-1,_t=dr.length-1;_e<_t;)if(dt=dr[_e+=1],dt.default!==void 0){var Ye=x+"["+_e+"]";if(e.compositeRule){if(e.opts.strictDefaults){var I="default is ignored for: "+Ye;if(e.opts.strictDefaults==="log")e.logger.warn(I);else throw new Error(I)}}else r+=" if ("+Ye+" === undefined ",e.opts.useDefaults=="empty"&&(r+=" || "+Ye+" === null || "+Ye+" === '' "),r+=" ) "+Ye+" = ",e.opts.useDefaults=="shared"?r+=" "+e.useDefault(dt.default)+" ":r+=" "+JSON.stringify(dt.default)+" ",r+="; "}}}}var ye=ie.rules;if(ye){for(var Wt,Sr=-1,kt=ye.length-1;Sr<kt;)if(Wt=ye[Sr+=1],xt(Wt)){var Nr=Wt.code(e,Wt.keyword,ie.type);Nr&&(r+=" "+Nr+" ",M&&($+="}"))}}if(M&&(r+=" "+$+" ",$=""),ie.type&&(r+=" } ",B&&B===ie.type&&!te)){r+=" else { ";var p=e.schemaPath+".type",y=e.errSchemaPath+"/type",b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(W||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",J?r+=""+B.join(","):r+=""+B,r+="' } ",e.opts.messages!==!1&&(r+=" , message: 'should be ",J?r+=""+B.join(","):r+=""+B,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+x+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&M?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}M&&(r+=" if (errors === ",z?r+="0":r+="errs_"+m,r+=") { ",H+="}")}}}M&&(r+=" "+H+" "),z?(o?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+j+" = errors === errs_"+m+";";function yt(mt){for(var Nt=mt.rules,Ft=0;Ft<Nt.length;Ft++)if(xt(Nt[Ft]))return!0}function xt(mt){return e.schema[mt.keyword]!==void 0||mt.implements&&Je(mt)}function Je(mt){for(var Nt=mt.implements,Ft=0;Ft<Nt.length;Ft++)if(e.schema[Nt[Ft]]!==void 0)return!0}return r}});var Wf=me((dP,Vf)=>{"use strict";var Os=Ts(),Ds=Zn(),Zf=ks(),Qw=sc(),Hf=oc(),Jw=Ds.ucs2length,Xw=ws(),eE=Zf.Validation;Vf.exports=lc;function lc(a,e,t,s){var r=this,o=this._opts,c=[void 0],u={},d=[],h={},m=[],g={},v=[];e=e||{schema:a,refVal:c,refs:u};var p=tE.call(this,a,e,s),y=this._compilations[p.index];if(p.compiling)return y.callValidate=I;var x=this._formats,b=this.RULES;try{var R=j(a,e,t,s);y.validate=R;var z=y.callValidate;return z&&(z.schema=R.schema,z.errors=null,z.refs=R.refs,z.refVal=R.refVal,z.root=R.root,z.$async=R.$async,o.sourceCode&&(z.source=R.source)),R}finally{rE.call(this,a,e,s)}function I(){var G=y.validate,Q=G.apply(this,arguments);return I.errors=G.errors,Q}function j(G,Q,se,Ue){var ge=!Q||Q&&Q.schema==G;if(Q.schema!=e.schema)return lc.call(r,G,Q,se,Ue);var _e=G.$async===!0,xe=Hf({isTop:!0,schema:G,isRoot:ge,baseId:Ue,root:Q,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Zf.MissingRef,RULES:b,validate:Hf,util:Ds,resolve:Os,resolveRef:M,usePattern:J,useDefault:te,useCustomRule:ie,opts:o,formats:x,logger:r.logger,self:r});xe=Cs(c,iE)+Cs(d,nE)+Cs(m,aE)+Cs(v,sE)+xe,o.processCode&&(xe=o.processCode(xe,G));var ce;try{var Fe=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",xe);ce=Fe(r,b,x,e,c,m,v,Xw,Jw,eE),c[0]=ce}catch(Et){throw r.logger.error("Error compiling schema, function code:",xe),Et}return ce.schema=G,ce.errors=null,ce.refs=u,ce.refVal=c,ce.root=ge?ce:Q,_e&&(ce.$async=!0),o.sourceCode===!0&&(ce.source={code:xe,patterns:d,defaults:m}),ce}function M(G,Q,se){Q=Os.url(G,Q);var Ue=u[Q],ge,_e;if(Ue!==void 0)return ge=c[Ue],_e="refVal["+Ue+"]",B(ge,_e);if(!se&&e.refs){var xe=e.refs[Q];if(xe!==void 0)return ge=e.refVal[xe],_e=$(Q,ge),B(ge,_e)}_e=$(Q);var ce=Os.call(r,j,e,Q);if(ce===void 0){var Fe=t&&t[Q];Fe&&(ce=Os.inlineRef(Fe,o.inlineRefs)?Fe:lc.call(r,Fe,e,t,G))}if(ce===void 0)H(Q);else return W(Q,ce),B(ce,_e)}function $(G,Q){var se=c.length;return c[se]=Q,u[G]=se,"refVal"+se}function H(G){delete u[G]}function W(G,Q){var se=u[G];c[se]=Q}function B(G,Q){return typeof G=="object"||typeof G=="boolean"?{code:Q,schema:G,inline:!0}:{code:Q,$async:G&&!!G.$async}}function J(G){var Q=h[G];return Q===void 0&&(Q=h[G]=d.length,d[Q]=G),"pattern"+Q}function te(G){switch(typeof G){case"boolean":case"number":return""+G;case"string":return Ds.toQuotedString(G);case"object":if(G===null)return"null";var Q=Qw(G),se=g[Q];return se===void 0&&(se=g[Q]=m.length,m[se]=G),"default"+se}}function ie(G,Q,se,Ue){if(r._opts.validateSchema!==!1){var ge=G.definition.dependencies;if(ge&&!ge.every(function(lt){return Object.prototype.hasOwnProperty.call(se,lt)}))throw new Error("parent schema must have all required keywords: "+ge.join(","));var _e=G.definition.validateSchema;if(_e){var xe=_e(Q);if(!xe){var ce="keyword schema is invalid: "+r.errorsText(_e.errors);if(r._opts.validateSchema=="log")r.logger.error(ce);else throw new Error(ce)}}}var Fe=G.definition.compile,Et=G.definition.inline,At=G.definition.macro,Le;if(Fe)Le=Fe.call(r,Q,se,Ue);else if(At)Le=At.call(r,Q,se,Ue),o.validateSchema!==!1&&r.validateSchema(Le,!0);else if(Et)Le=Et.call(r,Ue,G.keyword,Q,se);else if(Le=G.definition.validate,!Le)return;if(Le===void 0)throw new Error('custom keyword "'+G.keyword+'"failed to compile');var Ke=v.length;return v[Ke]=Le,{code:"customRule"+Ke,validate:Le}}}function tE(a,e,t){var s=Bf.call(this,a,e,t);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:t},{index:s,compiling:!1})}function rE(a,e,t){var s=Bf.call(this,a,e,t);s>=0&&this._compilations.splice(s,1)}function Bf(a,e,t){for(var s=0;s<this._compilations.length;s++){var r=this._compilations[s];if(r.schema==a&&r.root==e&&r.baseId==t)return s}return-1}function nE(a,e){return"var pattern"+a+" = new RegExp("+Ds.toQuotedString(e[a])+");"}function aE(a){return"var default"+a+" = defaults["+a+"];"}function iE(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}function sE(a){return"var customRule"+a+" = customRules["+a+"];"}function Cs(a,e){if(!a.length)return"";for(var t="",s=0;s<a.length;s++)t+=e(s,a);return t}});var Kf=me((fP,Gf)=>{"use strict";var Is=Gf.exports=function(){this._cache={}};Is.prototype.put=function(e,t){this._cache[e]=t};Is.prototype.get=function(e){return this._cache[e]};Is.prototype.del=function(e){delete this._cache[e]};Is.prototype.clear=function(){this._cache={}}});var oh=me((hP,sh)=>{"use strict";var oE=Zn(),lE=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,cE=[0,31,28,31,30,31,30,31,31,30,31,30,31],uE=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Yf=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,dE=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,fE=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Qf=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Jf=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Xf=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,eh=/^(?:\/(?:[^~/]|~0|~1)*)*$/,th=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,rh=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;sh.exports=$s;function $s(a){return a=a=="full"?"full":"fast",oE.copy($s[a])}$s.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Qf,url:Jf,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Yf,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ih,uuid:Xf,"json-pointer":eh,"json-pointer-uri-fragment":th,"relative-json-pointer":rh};$s.full={date:nh,time:ah,"date-time":mE,uri:vE,"uri-reference":fE,"uri-template":Qf,url:Jf,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Yf,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:ih,uuid:Xf,"json-pointer":eh,"json-pointer-uri-fragment":th,"relative-json-pointer":rh};function hE(a){return a%4===0&&(a%100!==0||a%400===0)}function nh(a){var e=a.match(lE);if(!e)return!1;var t=+e[1],s=+e[2],r=+e[3];return s>=1&&s<=12&&r>=1&&r<=(s==2&&hE(t)?29:cE[s])}function ah(a,e){var t=a.match(uE);if(!t)return!1;var s=t[1],r=t[2],o=t[3],c=t[5];return(s<=23&&r<=59&&o<=59||s==23&&r==59&&o==60)&&(!e||c)}var pE=/t|\s/i;function mE(a){var e=a.split(pE);return e.length==2&&nh(e[0])&&ah(e[1],!0)}var gE=/\/|:/;function vE(a){return gE.test(a)&&dE.test(a)}var _E=/[^\\]\\Z/;function ih(a){if(_E.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}});var ch=me((pP,lh)=>{"use strict";lh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,m="data"+(c||""),g="valid"+o,v,p;if(u=="#"||u=="#/")e.isRoot?(v=e.async,p="validate"):(v=e.root.schema.$async===!0,p="root.refVal[0]");else{var y=e.resolveRef(e.baseId,u,e.isRoot);if(y===void 0){var x=e.MissingRefError.message(e.baseId,u);if(e.opts.missingRefs=="fail"){e.logger.error(x);var b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",e.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(r+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var R=r;r=b.pop(),!e.compositeRule&&h?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(r+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(x),h&&(r+=" if (true) { ");else throw new e.MissingRefError(e.baseId,u,x)}else if(y.inline){var z=e.util.copy(e);z.level++;var I="valid"+z.level;z.schema=y.schema,z.schemaPath="",z.errSchemaPath=u;var j=e.validate(z).replace(/validate\.schema/g,y.code);r+=" "+j+" ",h&&(r+=" if ("+I+") { ")}else v=y.$async===!0||e.async&&y.$async!==!1,p=y.code}if(p){var b=b||[];b.push(r),r="",e.opts.passContext?r+=" "+p+".call(this, ":r+=" "+p+"( ",r+=" "+m+", (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var M=c?"data"+(c-1||""):"parentData",$=c?e.dataPathArr[c]:"parentDataProperty";r+=" , "+M+" , "+$+", rootData)  ";var H=r;if(r=b.pop(),v){if(!e.async)throw new Error("async schema referenced by sync schema");h&&(r+=" var "+g+"; "),r+=" try { await "+H+"; ",h&&(r+=" "+g+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",h&&(r+=" "+g+" = false; "),r+=" } ",h&&(r+=" if ("+g+") { ")}else r+=" if (!"+H+") { if (vErrors === null) vErrors = "+p+".errors; else vErrors = vErrors.concat("+p+".errors); errors = vErrors.length; } ",h&&(r+=" else { ")}return r}});var dh=me((mP,uh)=>{"use strict";uh.exports=function(e,t,s){var r=" ",o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,h=e.util.copy(e),m="";h.level++;var g="valid"+h.level,v=h.baseId,p=!0,y=o;if(y)for(var x,b=-1,R=y.length-1;b<R;)x=y[b+=1],(e.opts.strictKeywords?typeof x=="object"&&Object.keys(x).length>0||x===!1:e.util.schemaHasRules(x,e.RULES.all))&&(p=!1,h.schema=x,h.schemaPath=c+"["+b+"]",h.errSchemaPath=u+"/"+b,r+="  "+e.validate(h)+" ",h.baseId=v,d&&(r+=" if ("+g+") { ",m+="}"));return d&&(p?r+=" if (true) { ":r+=" "+m.slice(0,-1)+" "),r}});var hh=me((gP,fh)=>{"use strict";fh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e),x="";y.level++;var b="valid"+y.level,R=u.every(function(W){return e.opts.strictKeywords?typeof W=="object"&&Object.keys(W).length>0||W===!1:e.util.schemaHasRules(W,e.RULES.all)});if(R){var z=y.baseId;r+=" var "+p+" = errors; var "+v+" = false;  ";var I=e.compositeRule;e.compositeRule=y.compositeRule=!0;var j=u;if(j)for(var M,$=-1,H=j.length-1;$<H;)M=j[$+=1],y.schema=M,y.schemaPath=d+"["+$+"]",y.errSchemaPath=h+"/"+$,r+="  "+e.validate(y)+" ",y.baseId=z,r+=" "+v+" = "+v+" || "+b+"; if (!"+v+") { ",x+="}";e.compositeRule=y.compositeRule=I,r+=" "+x+" if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else m&&(r+=" if (true) { ");return r}});var mh=me((vP,ph)=>{"use strict";ph.exports=function(e,t,s){var r=" ",o=e.schema[t],c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d=e.util.toQuotedString(o);return e.opts.$comment===!0?r+=" console.log("+d+");":typeof e.opts.$comment=="function"&&(r+=" self._opts.$comment("+d+", "+e.util.toQuotedString(c)+", validate.root.schema);"),r}});var vh=me((_P,gh)=>{"use strict";gh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",y="schema"+o):y=u,p||(r+=" var schema"+o+" = validate.schema"+d+";"),r+="var "+v+" = equal("+g+", schema"+o+"); if (!"+v+") {   ";var x=x||[];x.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var b=r;return r=x.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",m&&(r+=" else { "),r}});var yh=me((yP,_h)=>{"use strict";_h.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e),x="";y.level++;var b="valid"+y.level,R="i"+o,z=y.dataLevel=e.dataLevel+1,I="data"+z,j=e.baseId,M=e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all);if(r+="var "+p+" = errors;var "+v+";",M){var $=e.compositeRule;e.compositeRule=y.compositeRule=!0,y.schema=u,y.schemaPath=d,y.errSchemaPath=h,r+=" var "+b+" = false; for (var "+R+" = 0; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var H=g+"["+R+"]";y.dataPathArr[z]=R;var W=e.validate(y);y.baseId=j,e.util.varOccurences(W,I)<2?r+=" "+e.util.varReplace(W,I,H)+" ":r+=" var "+I+" = "+H+"; "+W+" ",r+=" if ("+b+") break; }  ",e.compositeRule=y.compositeRule=$,r+=" "+x+" if (!"+b+") {"}else r+=" if ("+g+".length == 0) {";var B=B||[];B.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var J=r;return r=B.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+J+"]); ":r+=" validate.errors = ["+J+"]; return false; ":r+=" var err = "+J+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",M&&(r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}});var wh=me((bP,bh)=>{"use strict";bh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="errs__"+o,p=e.util.copy(e),y="";p.level++;var x="valid"+p.level,b={},R={},z=e.opts.ownProperties;for($ in u)if($!="__proto__"){var I=u[$],j=Array.isArray(I)?R:b;j[$]=I}r+="var "+v+" = errors;";var M=e.errorPath;r+="var missing"+o+";";for(var $ in R)if(j=R[$],j.length){if(r+=" if ( "+g+e.util.getProperty($)+" !== undefined ",z&&(r+=" && Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes($)+"') "),m){r+=" && ( ";var H=j;if(H)for(var W,B=-1,J=H.length-1;B<J;){W=H[B+=1],B&&(r+=" || ");var te=e.util.getProperty(W),ie=g+te;r+=" ( ( "+ie+" === undefined ",z&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(W)+"') "),r+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?W:te)+") ) "}r+=")) {  ";var G="missing"+o,Q="' + "+G+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(M,G,!0):M+" + "+G);var se=se||[];se.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes($)+"', missingProperty: '"+Q+"', depsCount: "+j.length+", deps: '"+e.util.escapeQuotes(j.length==1?j[0]:j.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",j.length==1?r+="property "+e.util.escapeQuotes(j[0]):r+="properties "+e.util.escapeQuotes(j.join(", ")),r+=" when property "+e.util.escapeQuotes($)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ue=r;r=se.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ue+"]); ":r+=" validate.errors = ["+Ue+"]; return false; ":r+=" var err = "+Ue+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var ge=j;if(ge)for(var W,_e=-1,xe=ge.length-1;_e<xe;){W=ge[_e+=1];var te=e.util.getProperty(W),Q=e.util.escapeQuotes(W),ie=g+te;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(M,W,e.opts.jsonPointers)),r+=" if ( "+ie+" === undefined ",z&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(W)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { property: '"+e.util.escapeQuotes($)+"', missingProperty: '"+Q+"', depsCount: "+j.length+", deps: '"+e.util.escapeQuotes(j.length==1?j[0]:j.join(", "))+"' } ",e.opts.messages!==!1&&(r+=" , message: 'should have ",j.length==1?r+="property "+e.util.escapeQuotes(j[0]):r+="properties "+e.util.escapeQuotes(j.join(", ")),r+=" when property "+e.util.escapeQuotes($)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",m&&(y+="}",r+=" else { ")}e.errorPath=M;var ce=p.baseId;for(var $ in b){var I=b[$];(e.opts.strictKeywords?typeof I=="object"&&Object.keys(I).length>0||I===!1:e.util.schemaHasRules(I,e.RULES.all))&&(r+=" "+x+" = true; if ( "+g+e.util.getProperty($)+" !== undefined ",z&&(r+=" && Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes($)+"') "),r+=") { ",p.schema=I,p.schemaPath=d+e.util.getProperty($),p.errSchemaPath=h+"/"+e.util.escapeFragment($),r+="  "+e.validate(p)+" ",p.baseId=ce,r+=" }  ",m&&(r+=" if ("+x+") { ",y+="}"))}return m&&(r+="   "+y+" if ("+v+" == errors) {"),r}});var xh=me((wP,Eh)=>{"use strict";Eh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",y="schema"+o):y=u;var x="i"+o,b="schema"+o;p||(r+=" var "+b+" = validate.schema"+d+";"),r+="var "+v+";",p&&(r+=" if (schema"+o+" === undefined) "+v+" = true; else if (!Array.isArray(schema"+o+")) "+v+" = false; else {"),r+=""+v+" = false;for (var "+x+"=0; "+x+"<"+b+".length; "+x+"++) if (equal("+g+", "+b+"["+x+"])) { "+v+" = true; break; }",p&&(r+="  }  "),r+=" if (!"+v+") {   ";var R=R||[];R.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var z=r;return r=R.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+z+"]); ":r+=" validate.errors = ["+z+"]; return false; ":r+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",m&&(r+=" else { "),r}});var Ph=me((EP,Sh)=>{"use strict";Sh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||"");if(e.opts.format===!1)return m&&(r+=" if (true) { "),r;var v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u;var y=e.opts.unknownFormats,x=Array.isArray(y);if(v){var b="format"+o,R="isObject"+o,z="formatType"+o;r+=" var "+b+" = formats["+p+"]; var "+R+" = typeof "+b+" == 'object' && !("+b+" instanceof RegExp) && "+b+".validate; var "+z+" = "+R+" && "+b+".type || 'string'; if ("+R+") { ",e.async&&(r+=" var async"+o+" = "+b+".async; "),r+=" "+b+" = "+b+".validate; } if (  ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" (",y!="ignore"&&(r+=" ("+p+" && !"+b+" ",x&&(r+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),r+=") || "),r+=" ("+b+" && "+z+" == '"+s+"' && !(typeof "+b+" == 'function' ? ",e.async?r+=" (async"+o+" ? await "+b+"("+g+") : "+b+"("+g+")) ":r+=" "+b+"("+g+") ",r+=" : "+b+".test("+g+"))))) {"}else{var b=e.formats[u];if(!b){if(y=="ignore")return e.logger.warn('unknown format "'+u+'" ignored in schema at path "'+e.errSchemaPath+'"'),m&&(r+=" if (true) { "),r;if(x&&y.indexOf(u)>=0)return m&&(r+=" if (true) { "),r;throw new Error('unknown format "'+u+'" is used in schema at path "'+e.errSchemaPath+'"')}var R=typeof b=="object"&&!(b instanceof RegExp)&&b.validate,z=R&&b.type||"string";if(R){var I=b.async===!0;b=b.validate}if(z!=s)return m&&(r+=" if (true) { "),r;if(I){if(!e.async)throw new Error("async format in sync schema");var j="formats"+e.util.getProperty(u)+".validate";r+=" if (!(await "+j+"("+g+"))) { "}else{r+=" if (! ";var j="formats"+e.util.getProperty(u);R&&(j+=".validate"),typeof b=="function"?r+=" "+j+"("+g+") ":r+=" "+j+".test("+g+") ",r+=") { "}}var M=M||[];M.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { format:  ",v?r+=""+p:r+=""+e.util.toQuotedString(u),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match format "`,v?r+="' + "+p+" + '":r+=""+e.util.escapeQuotes(u),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+e.util.toQuotedString(u),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var $=r;return r=M.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { "),r}});var Ah=me((xP,Rh)=>{"use strict";Rh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e);y.level++;var x="valid"+y.level,b=e.schema.then,R=e.schema.else,z=b!==void 0&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all)),I=R!==void 0&&(e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all)),j=y.baseId;if(z||I){var M;y.createErrors=!1,y.schema=u,y.schemaPath=d,y.errSchemaPath=h,r+=" var "+p+" = errors; var "+v+" = true;  ";var $=e.compositeRule;e.compositeRule=y.compositeRule=!0,r+="  "+e.validate(y)+" ",y.baseId=j,y.createErrors=!0,r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",e.compositeRule=y.compositeRule=$,z?(r+=" if ("+x+") {  ",y.schema=e.schema.then,y.schemaPath=e.schemaPath+".then",y.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(y)+" ",y.baseId=j,r+=" "+v+" = "+x+"; ",z&&I?(M="ifClause"+o,r+=" var "+M+" = 'then'; "):M="'then'",r+=" } ",I&&(r+=" else { ")):r+=" if (!"+x+") { ",I&&(y.schema=e.schema.else,y.schemaPath=e.schemaPath+".else",y.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(y)+" ",y.baseId=j,r+=" "+v+" = "+x+"; ",z&&I?(M="ifClause"+o,r+=" var "+M+" = 'else'; "):M="'else'",r+=" } "),r+=" if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { failingKeyword: "+M+" } ",e.opts.messages!==!1&&(r+=` , message: 'should match "' + `+M+` + '" schema' `),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",m&&(r+=" else { ")}else m&&(r+=" if (true) { ");return r}});var kh=me((SP,Th)=>{"use strict";Th.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e),x="";y.level++;var b="valid"+y.level,R="i"+o,z=y.dataLevel=e.dataLevel+1,I="data"+z,j=e.baseId;if(r+="var "+p+" = errors;var "+v+";",Array.isArray(u)){var M=e.schema.additionalItems;if(M===!1){r+=" "+v+" = "+g+".length <= "+u.length+"; ";var $=h;h=e.errSchemaPath+"/additionalItems",r+="  if (!"+v+") {   ";var H=H||[];H.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+u.length+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+u.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var W=r;r=H.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+W+"]); ":r+=" validate.errors = ["+W+"]; return false; ":r+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",h=$,m&&(x+="}",r+=" else { ")}var B=u;if(B){for(var J,te=-1,ie=B.length-1;te<ie;)if(J=B[te+=1],e.opts.strictKeywords?typeof J=="object"&&Object.keys(J).length>0||J===!1:e.util.schemaHasRules(J,e.RULES.all)){r+=" "+b+" = true; if ("+g+".length > "+te+") { ";var G=g+"["+te+"]";y.schema=J,y.schemaPath=d+"["+te+"]",y.errSchemaPath=h+"/"+te,y.errorPath=e.util.getPathExpr(e.errorPath,te,e.opts.jsonPointers,!0),y.dataPathArr[z]=te;var Q=e.validate(y);y.baseId=j,e.util.varOccurences(Q,I)<2?r+=" "+e.util.varReplace(Q,I,G)+" ":r+=" var "+I+" = "+G+"; "+Q+" ",r+=" }  ",m&&(r+=" if ("+b+") { ",x+="}")}}if(typeof M=="object"&&(e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all))){y.schema=M,y.schemaPath=e.schemaPath+".additionalItems",y.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+b+" = true; if ("+g+".length > "+u.length+") {  for (var "+R+" = "+u.length+"; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var G=g+"["+R+"]";y.dataPathArr[z]=R;var Q=e.validate(y);y.baseId=j,e.util.varOccurences(Q,I)<2?r+=" "+e.util.varReplace(Q,I,G)+" ":r+=" var "+I+" = "+G+"; "+Q+" ",m&&(r+=" if (!"+b+") break; "),r+=" } }  ",m&&(r+=" if ("+b+") { ",x+="}")}}else if(e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){y.schema=u,y.schemaPath=d,y.errSchemaPath=h,r+="  for (var "+R+" = 0; "+R+" < "+g+".length; "+R+"++) { ",y.errorPath=e.util.getPathExpr(e.errorPath,R,e.opts.jsonPointers,!0);var G=g+"["+R+"]";y.dataPathArr[z]=R;var Q=e.validate(y);y.baseId=j,e.util.varOccurences(Q,I)<2?r+=" "+e.util.varReplace(Q,I,G)+" ":r+=" var "+I+" = "+G+"; "+Q+" ",m&&(r+=" if (!"+b+") break; "),r+=" }"}return m&&(r+=" "+x+" if ("+p+" == errors) {"),r}});var cc=me((PP,Oh)=>{"use strict";Oh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,j,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u;var y=t=="maximum",x=y?"exclusiveMaximum":"exclusiveMinimum",b=e.schema[x],R=e.opts.$data&&b&&b.$data,z=y?"<":">",I=y?">":"<",j=void 0;if(!(v||typeof u=="number"||u===void 0))throw new Error(t+" must be number");if(!(R||b===void 0||typeof b=="number"||typeof b=="boolean"))throw new Error(x+" must be number or boolean");if(R){var M=e.util.getData(b.$data,c,e.dataPathArr),$="exclusive"+o,H="exclType"+o,W="exclIsNumber"+o,B="op"+o,J="' + "+B+" + '";r+=" var schemaExcl"+o+" = "+M+"; ",M="schemaExcl"+o,r+=" var "+$+"; var "+H+" = typeof "+M+"; if ("+H+" != 'boolean' && "+H+" != 'undefined' && "+H+" != 'number') { ";var j=x,te=te||[];te.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: '"+x+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var ie=r;r=te.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+ie+"]); ":r+=" validate.errors = ["+ie+"]; return false; ":r+=" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+H+" == 'number' ? ( ("+$+" = "+p+" === undefined || "+M+" "+z+"= "+p+") ? "+g+" "+I+"= "+M+" : "+g+" "+I+" "+p+" ) : ( ("+$+" = "+M+" === true) ? "+g+" "+I+"= "+p+" : "+g+" "+I+" "+p+" ) || "+g+" !== "+g+") { var op"+o+" = "+$+" ? '"+z+"' : '"+z+"='; ",u===void 0&&(j=x,h=e.errSchemaPath+"/"+x,p=M,v=R)}else{var W=typeof b=="number",J=z;if(W&&v){var B="'"+J+"'";r+=" if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" ( "+p+" === undefined || "+b+" "+z+"= "+p+" ? "+g+" "+I+"= "+b+" : "+g+" "+I+" "+p+" ) || "+g+" !== "+g+") { "}else{W&&u===void 0?($=!0,j=x,h=e.errSchemaPath+"/"+x,p=b,I+="="):(W&&(p=Math[y?"min":"max"](b,u)),b===(W?p:!0)?($=!0,j=x,h=e.errSchemaPath+"/"+x,I+="="):($=!1,J+="="));var B="'"+J+"'";r+=" if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+g+" "+I+" "+p+" || "+g+" !== "+g+") { "}}j=j||t;var te=te||[];te.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(j||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { comparison: "+B+", limit: "+p+", exclusive: "+$+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be "+J+" ",v?r+="' + "+p:r+=""+p+"'"),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var ie=r;return r=te.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+ie+"]); ":r+=" validate.errors = ["+ie+"]; return false; ":r+=" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { "),r}});var uc=me((RP,Ch)=>{"use strict";Ch.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,x,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxItems"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" "+g+".length "+y+" "+p+") { ";var x=t,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(x||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxItems"?r+="more":r+="fewer",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" items' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=b.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var dc=me((AP,Dh)=>{"use strict";Dh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,x,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxLength"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),e.opts.unicode===!1?r+=" "+g+".length ":r+=" ucs2length("+g+") ",r+=" "+y+" "+p+") { ";var x=t,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(x||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be ",t=="maxLength"?r+="longer":r+="shorter",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" characters' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=b.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var fc=me((TP,Ih)=>{"use strict";Ih.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,x,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");var y=t=="maxProperties"?">":"<";r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),r+=" Object.keys("+g+").length "+y+" "+p+") { ";var x=t,b=b||[];b.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(x||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have ",t=="maxProperties"?r+="more":r+="fewer",r+=" than ",v?r+="' + "+p+" + '":r+=""+u,r+=" properties' "),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var R=r;return r=b.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+R+"]); ":r+=" validate.errors = ["+R+"]; return false; ":r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Mh=me((kP,$h)=>{"use strict";$h.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;if(v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u,!(v||typeof u=="number"))throw new Error(t+" must be number");r+="var division"+o+";if (",v&&(r+=" "+p+" !== undefined && ( typeof "+p+" != 'number' || "),r+=" (division"+o+" = "+g+" / "+p+", ",e.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":r+=" division"+o+" !== parseInt(division"+o+") ",r+=" ) ",v&&(r+="  )  "),r+=" ) {   ";var y=y||[];y.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { multipleOf: "+p+" } ",e.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",v?r+="' + "+p:r+=""+p+"'"),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var x=r;return r=y.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+x+"]); ":r+=" validate.errors = ["+x+"]; return false; ":r+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Nh=me((OP,Lh)=>{"use strict";Lh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="errs__"+o,p=e.util.copy(e);p.level++;var y="valid"+p.level;if(e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){p.schema=u,p.schemaPath=d,p.errSchemaPath=h,r+=" var "+v+" = errors;  ";var x=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1;var b;p.opts.allErrors&&(b=p.opts.allErrors,p.opts.allErrors=!1),r+=" "+e.validate(p)+" ",p.createErrors=!0,b&&(p.opts.allErrors=b),e.compositeRule=p.compositeRule=x,r+=" if ("+y+") {   ";var R=R||[];R.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var z=r;r=R.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+z+"]); ":r+=" validate.errors = ["+z+"]; return false; ":r+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+v+"; if (vErrors !== null) { if ("+v+") vErrors.length = "+v+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",e.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",m&&(r+=" if (false) { ");return r}});var jh=me((CP,Fh)=>{"use strict";Fh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p="errs__"+o,y=e.util.copy(e),x="";y.level++;var b="valid"+y.level,R=y.baseId,z="prevValid"+o,I="passingSchemas"+o;r+="var "+p+" = errors , "+z+" = false , "+v+" = false , "+I+" = null; ";var j=e.compositeRule;e.compositeRule=y.compositeRule=!0;var M=u;if(M)for(var $,H=-1,W=M.length-1;H<W;)$=M[H+=1],(e.opts.strictKeywords?typeof $=="object"&&Object.keys($).length>0||$===!1:e.util.schemaHasRules($,e.RULES.all))?(y.schema=$,y.schemaPath=d+"["+H+"]",y.errSchemaPath=h+"/"+H,r+="  "+e.validate(y)+" ",y.baseId=R):r+=" var "+b+" = true; ",H&&(r+=" if ("+b+" && "+z+") { "+v+" = false; "+I+" = ["+I+", "+H+"]; } else { ",x+="}"),r+=" if ("+b+") { "+v+" = "+z+" = true; "+I+" = "+H+"; }";return e.compositeRule=y.compositeRule=j,r+=""+x+"if (!"+v+") {   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { passingSchemas: "+I+" } ",e.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}});var zh=me((DP,qh)=>{"use strict";qh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v=e.opts.$data&&u&&u.$data,p;v?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",p="schema"+o):p=u;var y=v?"(new RegExp("+p+"))":e.usePattern(u);r+="if ( ",v&&(r+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),r+=" !"+y+".test("+g+") ) {   ";var x=x||[];x.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { pattern:  ",v?r+=""+p:r+=""+e.util.toQuotedString(u),r+="  } ",e.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,v?r+="' + "+p+" + '":r+=""+e.util.escapeQuotes(u),r+=`"' `),e.opts.verbose&&(r+=" , schema:  ",v?r+="validate.schema"+d:r+=""+e.util.toQuotedString(u),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var b=r;return r=x.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",m&&(r+=" else { "),r}});var Hh=me((IP,Uh)=>{"use strict";Uh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="errs__"+o,p=e.util.copy(e),y="";p.level++;var x="valid"+p.level,b="key"+o,R="idx"+o,z=p.dataLevel=e.dataLevel+1,I="data"+z,j="dataProperties"+o,M=Object.keys(u||{}).filter(_e),$=e.schema.patternProperties||{},H=Object.keys($).filter(_e),W=e.schema.additionalProperties,B=M.length||H.length,J=W===!1,te=typeof W=="object"&&Object.keys(W).length,ie=e.opts.removeAdditional,G=J||te||ie,Q=e.opts.ownProperties,se=e.baseId,Ue=e.schema.required;if(Ue&&!(e.opts.$data&&Ue.$data)&&Ue.length<e.opts.loopRequired)var ge=e.util.toHash(Ue);function _e(Ot){return Ot!=="__proto__"}if(r+="var "+v+" = errors;var "+x+" = true;",Q&&(r+=" var "+j+" = undefined;"),G){if(Q?r+=" "+j+" = "+j+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+j+".length; "+R+"++) { var "+b+" = "+j+"["+R+"]; ":r+=" for (var "+b+" in "+g+") { ",B){if(r+=" var isAdditional"+o+" = !(false ",M.length)if(M.length>8)r+=" || validate.schema"+d+".hasOwnProperty("+b+") ";else{var xe=M;if(xe)for(var ce,Fe=-1,Et=xe.length-1;Fe<Et;)ce=xe[Fe+=1],r+=" || "+b+" == "+e.util.toQuotedString(ce)+" "}if(H.length){var At=H;if(At)for(var Le,Ke=-1,lt=At.length-1;Ke<lt;)Le=At[Ke+=1],r+=" || "+e.usePattern(Le)+".test("+b+") "}r+=" ); if (isAdditional"+o+") { "}if(ie=="all")r+=" delete "+g+"["+b+"]; ";else{var Tt=e.errorPath,Vt="' + "+b+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers)),J)if(ie)r+=" delete "+g+"["+b+"]; ";else{r+=" "+x+" = false; ";var Lt=h;h=e.errSchemaPath+"/additionalProperties";var dt=dt||[];dt.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { additionalProperty: '"+Vt+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ye=r;r=dt.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ye+"]); ":r+=" validate.errors = ["+Ye+"]; return false; ":r+=" var err = "+Ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=Lt,m&&(r+=" break; ")}else if(te)if(ie=="failing"){r+=" var "+v+" = errors;  ";var dr=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=W,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var _t=g+"["+b+"]";p.dataPathArr[z]=b;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,I)<2?r+=" "+e.util.varReplace(ye,I,_t)+" ":r+=" var "+I+" = "+_t+"; "+ye+" ",r+=" if (!"+x+") { errors = "+v+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+g+"["+b+"]; }  ",e.compositeRule=p.compositeRule=dr}else{p.schema=W,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var _t=g+"["+b+"]";p.dataPathArr[z]=b;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,I)<2?r+=" "+e.util.varReplace(ye,I,_t)+" ":r+=" var "+I+" = "+_t+"; "+ye+" ",m&&(r+=" if (!"+x+") break; ")}e.errorPath=Tt}B&&(r+=" } "),r+=" }  ",m&&(r+=" if ("+x+") { ",y+="}")}var Wt=e.opts.useDefaults&&!e.compositeRule;if(M.length){var Sr=M;if(Sr)for(var ce,kt=-1,Nr=Sr.length-1;kt<Nr;){ce=Sr[kt+=1];var yt=u[ce];if(e.opts.strictKeywords?typeof yt=="object"&&Object.keys(yt).length>0||yt===!1:e.util.schemaHasRules(yt,e.RULES.all)){var xt=e.util.getProperty(ce),_t=g+xt,Je=Wt&&yt.default!==void 0;p.schema=yt,p.schemaPath=d+xt,p.errSchemaPath=h+"/"+e.util.escapeFragment(ce),p.errorPath=e.util.getPath(e.errorPath,ce,e.opts.jsonPointers),p.dataPathArr[z]=e.util.toQuotedString(ce);var ye=e.validate(p);if(p.baseId=se,e.util.varOccurences(ye,I)<2){ye=e.util.varReplace(ye,I,_t);var mt=_t}else{var mt=I;r+=" var "+I+" = "+_t+"; "}if(Je)r+=" "+ye+" ";else{if(ge&&ge[ce]){r+=" if ( "+mt+" === undefined ",Q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(ce)+"') "),r+=") { "+x+" = false; ";var Tt=e.errorPath,Lt=h,Nt=e.util.escapeQuotes(ce);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(Tt,ce,e.opts.jsonPointers)),h=e.errSchemaPath+"/required";var dt=dt||[];dt.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+Nt+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Nt+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var Ye=r;r=dt.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+Ye+"]); ":r+=" validate.errors = ["+Ye+"]; return false; ":r+=" var err = "+Ye+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h=Lt,e.errorPath=Tt,r+=" } else { "}else m?(r+=" if ( "+mt+" === undefined ",Q&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(ce)+"') "),r+=") { "+x+" = true; } else { "):(r+=" if ("+mt+" !== undefined ",Q&&(r+=" &&   Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(ce)+"') "),r+=" ) { ");r+=" "+ye+" } "}}m&&(r+=" if ("+x+") { ",y+="}")}}if(H.length){var Ft=H;if(Ft)for(var Le,Fr=-1,Ra=Ft.length-1;Fr<Ra;){Le=Ft[Fr+=1];var yt=$[Le];if(e.opts.strictKeywords?typeof yt=="object"&&Object.keys(yt).length>0||yt===!1:e.util.schemaHasRules(yt,e.RULES.all)){p.schema=yt,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Le),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Le),Q?r+=" "+j+" = "+j+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+j+".length; "+R+"++) { var "+b+" = "+j+"["+R+"]; ":r+=" for (var "+b+" in "+g+") { ",r+=" if ("+e.usePattern(Le)+".test("+b+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,b,e.opts.jsonPointers);var _t=g+"["+b+"]";p.dataPathArr[z]=b;var ye=e.validate(p);p.baseId=se,e.util.varOccurences(ye,I)<2?r+=" "+e.util.varReplace(ye,I,_t)+" ":r+=" var "+I+" = "+_t+"; "+ye+" ",m&&(r+=" if (!"+x+") break; "),r+=" } ",m&&(r+=" else "+x+" = true; "),r+=" }  ",m&&(r+=" if ("+x+") { ",y+="}")}}}return m&&(r+=" "+y+" if ("+v+" == errors) {"),r}});var Bh=me(($P,Zh)=>{"use strict";Zh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="errs__"+o,p=e.util.copy(e),y="";p.level++;var x="valid"+p.level;if(r+="var "+v+" = errors;",e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){p.schema=u,p.schemaPath=d,p.errSchemaPath=h;var b="key"+o,R="idx"+o,z="i"+o,I="' + "+b+" + '",j=p.dataLevel=e.dataLevel+1,M="data"+j,$="dataProperties"+o,H=e.opts.ownProperties,W=e.baseId;H&&(r+=" var "+$+" = undefined; "),H?r+=" "+$+" = "+$+" || Object.keys("+g+"); for (var "+R+"=0; "+R+"<"+$+".length; "+R+"++) { var "+b+" = "+$+"["+R+"]; ":r+=" for (var "+b+" in "+g+") { ",r+=" var startErrs"+o+" = errors; ";var B=b,J=e.compositeRule;e.compositeRule=p.compositeRule=!0;var te=e.validate(p);p.baseId=W,e.util.varOccurences(te,M)<2?r+=" "+e.util.varReplace(te,M,B)+" ":r+=" var "+M+" = "+B+"; "+te+" ",e.compositeRule=p.compositeRule=J,r+=" if (!"+x+") { for (var "+z+"=startErrs"+o+"; "+z+"<errors; "+z+"++) { vErrors["+z+"].propertyName = "+b+"; }   var err =   ",e.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { propertyName: '"+I+"' } ",e.opts.messages!==!1&&(r+=" , message: 'property name \\'"+I+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),m&&(r+=" break; "),r+=" } }"}return m&&(r+=" "+y+" if ("+v+" == errors) {"),r}});var Wh=me((MP,Vh)=>{"use strict";Vh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p=e.opts.$data&&u&&u.$data,y;p?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",y="schema"+o):y=u;var x="schema"+o;if(!p)if(u.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var b=[],R=u;if(R)for(var z,I=-1,j=R.length-1;I<j;){z=R[I+=1];var M=e.schema.properties[z];M&&(e.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:e.util.schemaHasRules(M,e.RULES.all))||(b[b.length]=z)}}else var b=u;if(p||b.length){var $=e.errorPath,H=p||b.length>=e.opts.loopRequired,W=e.opts.ownProperties;if(m)if(r+=" var missing"+o+"; ",H){p||(r+=" var "+x+" = validate.schema"+d+"; ");var B="i"+o,J="schema"+o+"["+B+"]",te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr($,J,e.opts.jsonPointers)),r+=" var "+v+" = true; ",p&&(r+=" if (schema"+o+" === undefined) "+v+" = true; else if (!Array.isArray(schema"+o+")) "+v+" = false; else {"),r+=" for (var "+B+" = 0; "+B+" < "+x+".length; "+B+"++) { "+v+" = "+g+"["+x+"["+B+"]] !== undefined ",W&&(r+=" &&   Object.prototype.hasOwnProperty.call("+g+", "+x+"["+B+"]) "),r+="; if (!"+v+") break; } ",p&&(r+="  }  "),r+="  if (!"+v+") {   ";var ie=ie||[];ie.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var G=r;r=ie.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+G+"]); ":r+=" validate.errors = ["+G+"]; return false; ":r+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var Q=b;if(Q)for(var se,B=-1,Ue=Q.length-1;B<Ue;){se=Q[B+=1],B&&(r+=" || ");var ge=e.util.getProperty(se),_e=g+ge;r+=" ( ( "+_e+" === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(se)+"') "),r+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?se:ge)+") ) "}r+=") {  ";var J="missing"+o,te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr($,J,!0):$+" + "+J);var ie=ie||[];ie.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var G=r;r=ie.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+G+"]); ":r+=" validate.errors = ["+G+"]; return false; ":r+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(H){p||(r+=" var "+x+" = validate.schema"+d+"; ");var B="i"+o,J="schema"+o+"["+B+"]",te="' + "+J+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr($,J,e.opts.jsonPointers)),p&&(r+=" if ("+x+" && !Array.isArray("+x+")) {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+x+" !== undefined) { "),r+=" for (var "+B+" = 0; "+B+" < "+x+".length; "+B+"++) { if ("+g+"["+x+"["+B+"]] === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", "+x+"["+B+"]) "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(r+="  }  ")}else{var xe=b;if(xe)for(var se,ce=-1,Fe=xe.length-1;ce<Fe;){se=xe[ce+=1];var ge=e.util.getProperty(se),te=e.util.escapeQuotes(se),_e=g+ge;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath($,se,e.opts.jsonPointers)),r+=" if ( "+_e+" === undefined ",W&&(r+=" || ! Object.prototype.hasOwnProperty.call("+g+", '"+e.util.escapeQuotes(se)+"') "),r+=") {  var err =   ",e.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { missingProperty: '"+te+"' } ",e.opts.messages!==!1&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+te+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=$}else m&&(r+=" if (true) {");return r}});var Kh=me((LP,Gh)=>{"use strict";Gh.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g="data"+(c||""),v="valid"+o,p=e.opts.$data&&u&&u.$data,y;if(p?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",y="schema"+o):y=u,(u||p)&&e.opts.uniqueItems!==!1){p&&(r+=" var "+v+"; if ("+y+" === false || "+y+" === undefined) "+v+" = true; else if (typeof "+y+" != 'boolean') "+v+" = false; else { "),r+=" var i = "+g+".length , "+v+" = true , j; if (i > 1) { ";var x=e.schema.items&&e.schema.items.type,b=Array.isArray(x);if(!x||x=="object"||x=="array"||b&&(x.indexOf("object")>=0||x.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+g+"[i], "+g+"[j])) { "+v+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+g+"[i]; ";var R="checkDataType"+(b?"s":"");r+=" if ("+e.util[R](x,"item",e.opts.strictNumbers,!0)+") continue; ",b&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+v+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",p&&(r+="  }  "),r+=" if (!"+v+") {   ";var z=z||[];z.push(r),r="",e.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(r+=" , schema:  ",p?r+="validate.schema"+d:r+=""+u,r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),r+=" } "):r+=" {} ";var I=r;r=z.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+I+"]); ":r+=" validate.errors = ["+I+"]; return false; ":r+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",m&&(r+=" else { ")}else m&&(r+=" if (true) { ");return r}});var Qh=me((NP,Yh)=>{"use strict";Yh.exports={$ref:ch(),allOf:dh(),anyOf:hh(),$comment:mh(),const:vh(),contains:yh(),dependencies:wh(),enum:xh(),format:Ph(),if:Ah(),items:kh(),maximum:cc(),minimum:cc(),maxItems:uc(),minItems:uc(),maxLength:dc(),minLength:dc(),maxProperties:fc(),minProperties:fc(),multipleOf:Mh(),not:Nh(),oneOf:jh(),pattern:zh(),properties:Hh(),propertyNames:Bh(),required:Wh(),uniqueItems:Kh(),validate:oc()}});var ep=me((FP,Xh)=>{"use strict";var Jh=Qh(),hc=Zn().toHash;Xh.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return e.all=hc(t),e.types=hc(r),e.forEach(function(o){o.rules=o.rules.map(function(c){var u;if(typeof c=="object"){var d=Object.keys(c)[0];u=c[d],c=d,u.forEach(function(m){t.push(m),e.all[m]=!0})}t.push(c);var h=e.all[c]={keyword:c,code:Jh[c],implements:u};return h}),e.all.$comment={keyword:"$comment",code:Jh.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=hc(t.concat(s)),e.custom={},e}});var np=me((jP,rp)=>{"use strict";var tp=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];rp.exports=function(a,e){for(var t=0;t<e.length;t++){a=JSON.parse(JSON.stringify(a));var s=e[t].split("/"),r=a,o;for(o=1;o<s.length;o++)r=r[s[o]];for(o=0;o<tp.length;o++){var c=tp[o],u=r[c];u&&(r[c]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var sp=me((qP,ip)=>{"use strict";var yE=ks().MissingRef;ip.exports=ap;function ap(a,e,t){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var r=o(a).then(function(){var u=s._addSchema(a,void 0,e);return u.validate||c(u)});return t&&r.then(function(u){t(null,u)},t),r;function o(u){var d=u.$schema;return d&&!s.getSchema(d)?ap.call(s,{$ref:d},!0):Promise.resolve()}function c(u){try{return s._compile(u)}catch(h){if(h instanceof yE)return d(h);throw h}function d(h){var m=h.missingSchema;if(p(m))throw new Error("Schema "+m+" is loaded but "+h.missingRef+" cannot be resolved");var g=s._loadingSchemas[m];return g||(g=s._loadingSchemas[m]=s._opts.loadSchema(m),g.then(v,v)),g.then(function(y){if(!p(m))return o(y).then(function(){p(m)||s.addSchema(y,m,void 0,e)})}).then(function(){return c(u)});function v(){delete s._loadingSchemas[m]}function p(y){return s._refs[y]||s._schemas[y]}}}}});var lp=me((zP,op)=>{"use strict";op.exports=function(e,t,s){var r=" ",o=e.level,c=e.dataLevel,u=e.schema[t],d=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,m=!e.opts.allErrors,g,v="data"+(c||""),p="valid"+o,y="errs__"+o,x=e.opts.$data&&u&&u.$data,b;x?(r+=" var schema"+o+" = "+e.util.getData(u.$data,c,e.dataPathArr)+"; ",b="schema"+o):b=u;var R=this,z="definition"+o,I=R.definition,j="",M,$,H,W,B;if(x&&I.$data){B="keywordValidate"+o;var J=I.validateSchema;r+=" var "+z+" = RULES.custom['"+t+"'].definition; var "+B+" = "+z+".validate;"}else{if(W=e.useCustomRule(R,u,e.schema,e),!W)return;b="validate.schema"+d,B=W.code,M=I.compile,$=I.inline,H=I.macro}var te=B+".errors",ie="i"+o,G="ruleErr"+o,Q=I.async;if(Q&&!e.async)throw new Error("async keyword in sync schema");if($||H||(r+=""+te+" = null;"),r+="var "+y+" = errors;var "+p+";",x&&I.$data&&(j+="}",r+=" if ("+b+" === undefined) { "+p+" = true; } else { ",J&&(j+="}",r+=" "+p+" = "+z+".validateSchema("+b+"); if ("+p+") { ")),$)I.statements?r+=" "+W.validate+" ":r+=" "+p+" = "+W.validate+"; ";else if(H){var se=e.util.copy(e),j="";se.level++;var Ue="valid"+se.level;se.schema=W.validate,se.schemaPath="";var ge=e.compositeRule;e.compositeRule=se.compositeRule=!0;var _e=e.validate(se).replace(/validate\.schema/g,B);e.compositeRule=se.compositeRule=ge,r+=" "+_e}else{var xe=xe||[];xe.push(r),r="",r+="  "+B+".call( ",e.opts.passContext?r+="this":r+="self",M||I.schema===!1?r+=" , "+v+" ":r+=" , "+b+" , "+v+" , validate.schema"+e.schemaPath+" ",r+=" , (dataPath || '')",e.errorPath!='""'&&(r+=" + "+e.errorPath);var ce=c?"data"+(c-1||""):"parentData",Fe=c?e.dataPathArr[c]:"parentDataProperty";r+=" , "+ce+" , "+Fe+" , rootData )  ";var Et=r;r=xe.pop(),I.errors===!1?(r+=" "+p+" = ",Q&&(r+="await "),r+=""+Et+"; "):Q?(te="customErrors"+o,r+=" var "+te+" = null; try { "+p+" = await "+Et+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+te+" = e.errors; else throw e; } "):r+=" "+te+" = null; "+p+" = "+Et+"; "}if(I.modifying&&(r+=" if ("+ce+") "+v+" = "+ce+"["+Fe+"];"),r+=""+j,I.valid)m&&(r+=" if (true) { ");else{r+=" if ( ",I.valid===void 0?(r+=" !",H?r+=""+Ue:r+=""+p):r+=" "+!I.valid+" ",r+=") { ",g=R.keyword;var xe=xe||[];xe.push(r),r="";var xe=xe||[];xe.push(r),r="",e.createErrors!==!1?(r+=" { keyword: '"+(g||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+R.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+R.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ";var At=r;r=xe.pop(),!e.compositeRule&&m?e.async?r+=" throw new ValidationError(["+At+"]); ":r+=" validate.errors = ["+At+"]; return false; ":r+=" var err = "+At+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Le=r;r=xe.pop(),$?I.errors?I.errors!="full"&&(r+="  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(r+=" "+G+".schema = "+b+"; "+G+".data = "+v+"; "),r+=" } "):I.errors===!1?r+=" "+Le+" ":(r+=" if ("+y+" == errors) { "+Le+" } else {  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+h+'"; } ',e.opts.verbose&&(r+=" "+G+".schema = "+b+"; "+G+".data = "+v+"; "),r+=" } } "):H?(r+="   var err =   ",e.createErrors!==!1?(r+=" { keyword: '"+(g||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { keyword: '"+R.keyword+"' } ",e.opts.messages!==!1&&(r+=` , message: 'should pass "`+R.keyword+`" keyword validation' `),e.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):I.errors===!1?r+=" "+Le+" ":(r+=" if (Array.isArray("+te+")) { if (vErrors === null) vErrors = "+te+"; else vErrors = vErrors.concat("+te+"); errors = vErrors.length;  for (var "+ie+"="+y+"; "+ie+"<errors; "+ie+"++) { var "+G+" = vErrors["+ie+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+";  "+G+'.schemaPath = "'+h+'";  ',e.opts.verbose&&(r+=" "+G+".schema = "+b+"; "+G+".data = "+v+"; "),r+=" } } else { "+Le+" } "),r+=" } ",m&&(r+=" else { ")}return r}});var pc=me((UP,bE)=>{bE.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var dp=me((HP,up)=>{"use strict";var cp=pc();up.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:cp.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:cp.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var hp=me((ZP,fp)=>{"use strict";var wE=/^[a-z_$][a-z0-9_$-]*$/i,EE=lp(),xE=dp();fp.exports={add:SE,get:PE,remove:RE,validate:mc};function SE(a,e){var t=this.RULES;if(t.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!wE.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var r=0;r<s.length;r++)c(a,s[r],e);else c(a,s,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}t.keywords[a]=t.all[a]=!0;function c(u,d,h){for(var m,g=0;g<t.length;g++){var v=t[g];if(v.type==d){m=v;break}}m||(m={type:d,rules:[]},t.push(m));var p={keyword:u,definition:h,custom:!0,code:EE,implements:h.implements};m.rules.push(p),t.custom[u]=p}return this}function PE(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}function RE(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var t=0;t<e.length;t++)for(var s=e[t].rules,r=0;r<s.length;r++)if(s[r].keyword==a){s.splice(r,1);break}return this}function mc(a,e){mc.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(xE,!0);if(t(a))return!0;if(mc.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var pp=me((BP,AE)=>{AE.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Sp=me((VP,xp)=>{"use strict";var gp=Wf(),Bn=Ts(),TE=Kf(),vp=ec(),kE=sc(),OE=oh(),CE=ep(),_p=np(),yp=Zn();xp.exports=pt;pt.prototype.validate=IE;pt.prototype.compile=$E;pt.prototype.addSchema=ME;pt.prototype.addMetaSchema=LE;pt.prototype.validateSchema=NE;pt.prototype.getSchema=jE;pt.prototype.removeSchema=zE;pt.prototype.addFormat=KE;pt.prototype.errorsText=GE;pt.prototype._addSchema=UE;pt.prototype._compile=HE;pt.prototype.compileAsync=sp();var Ns=hp();pt.prototype.addKeyword=Ns.add;pt.prototype.getKeyword=Ns.get;pt.prototype.removeKeyword=Ns.remove;pt.prototype.validateKeyword=Ns.validate;var bp=ks();pt.ValidationError=bp.Validation;pt.MissingRefError=bp.MissingRef;pt.$dataMetaSchema=_p;var Ls="http://json-schema.org/draft-07/schema",mp=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],DE=["/properties"];function pt(a){if(!(this instanceof pt))return new pt(a);a=this._opts=yp.copy(a)||{},tx(this),this._schemas={},this._refs={},this._fragments={},this._formats=OE(a.format),this._cache=a.cache||new TE,this._loadingSchemas={},this._compilations=[],this.RULES=CE(),this._getId=ZE(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=kE),this._metaOpts=ex(this),a.formats&&JE(this),a.keywords&&XE(this),YE(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),QE(this)}function IE(a,e){var t;if(typeof a=="string"){if(t=this.getSchema(a),!t)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);t=s.validate||this._compile(s)}var r=t(e);return t.$async!==!0&&(this.errors=t.errors),r}function $E(a,e){var t=this._addSchema(a,void 0,e);return t.validate||this._compile(t)}function ME(a,e,t,s){if(Array.isArray(a)){for(var r=0;r<a.length;r++)this.addSchema(a[r],void 0,t,s);return this}var o=this._getId(a);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=Bn.normalizeId(e||o),Ep(this,e),this._schemas[e]=this._addSchema(a,t,s,!0),this}function LE(a,e,t){return this.addSchema(a,e,t,!0),this}function NE(a,e){var t=a.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||FE(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(t,a);if(!s&&e){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return s}function FE(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(Ls)?Ls:void 0,a._opts.defaultMeta}function jE(a){var e=wp(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return qE(this,a)}}function qE(a,e){var t=Bn.schema.call(a,{schema:{}},e);if(t){var s=t.schema,r=t.root,o=t.baseId,c=gp.call(a,s,r,void 0,o);return a._fragments[e]=new vp({ref:e,fragment:!0,schema:s,root:r,baseId:o,validate:c}),c}}function wp(a,e){return e=Bn.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}function zE(a){if(a instanceof RegExp)return Ms(this,this._schemas,a),Ms(this,this._refs,a),this;switch(typeof a){case"undefined":return Ms(this,this._schemas),Ms(this,this._refs),this._cache.clear(),this;case"string":var e=wp(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var t=this._opts.serialize,s=t?t(a):a;this._cache.del(s);var r=this._getId(a);r&&(r=Bn.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function Ms(a,e,t){for(var s in e){var r=e[s];!r.meta&&(!t||t.test(s))&&(a._cache.del(r.cacheKey),delete e[s])}}function UE(a,e,t,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,o=r?r(a):a,c=this._cache.get(o);if(c)return c;s=s||this._opts.addUsedSchema!==!1;var u=Bn.normalizeId(this._getId(a));u&&s&&Ep(this,u);var d=this._opts.validateSchema!==!1&&!e,h;d&&!(h=u&&u==Bn.normalizeId(a.$schema))&&this.validateSchema(a,!0);var m=Bn.ids.call(this,a),g=new vp({id:u,schema:a,localRefs:m,cacheKey:o,meta:t});return u[0]!="#"&&s&&(this._refs[u]=g),this._cache.put(o,g),d&&h&&this.validateSchema(a,!0),g}function HE(a,e){if(a.compiling)return a.validate=r,r.schema=a.schema,r.errors=null,r.root=e||r,a.schema.$async===!0&&(r.$async=!0),r;a.compiling=!0;var t;a.meta&&(t=this._opts,this._opts=this._metaOpts);var s;try{s=gp.call(this,a.schema,e,a.localRefs)}catch(o){throw delete a.validate,o}finally{a.compiling=!1,a.meta&&(this._opts=t)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function r(){var o=a.validate,c=o.apply(this,arguments);return r.errors=o.errors,c}}function ZE(a){switch(a.schemaId){case"auto":return WE;case"id":return BE;default:return VE}}function BE(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function VE(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function WE(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function GE(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,r="",o=0;o<a.length;o++){var c=a[o];c&&(r+=s+c.dataPath+" "+c.message+t)}return r.slice(0,-t.length)}function KE(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}function YE(a){var e;if(a._opts.$data&&(e=pp(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var t=pc();a._opts.$data&&(t=_p(t,DE)),a.addMetaSchema(t,Ls,!0),a._refs["http://json-schema.org/schema"]=Ls}}function QE(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var t in e)a.addSchema(e[t],t)}function JE(a){for(var e in a._opts.formats){var t=a._opts.formats[e];a.addFormat(e,t)}}function XE(a){for(var e in a._opts.keywords){var t=a._opts.keywords[e];a.addKeyword(e,t)}}function Ep(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function ex(a){for(var e=yp.copy(a._opts),t=0;t<mp.length;t++)delete e[mp[t]];return e}function tx(a){var e=a._opts.logger;if(e===!1)a.logger={log:gc,warn:gc,error:gc};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}function gc(){}});var Ec={};Ib(Ec,{configSchema:()=>px,default:()=>um});var w=require("zod"),Ml="2025-06-18";var af=[Ml,"2025-03-26","2024-11-05","2024-10-07"],rs="2.0",sf=w.z.union([w.z.string(),w.z.number().int()]),of=w.z.string(),Mb=w.z.object({progressToken:w.z.optional(sf)}).passthrough(),Er=w.z.object({_meta:w.z.optional(Mb)}).passthrough(),er=w.z.object({method:w.z.string(),params:w.z.optional(Er)}),Ga=w.z.object({_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),Br=w.z.object({method:w.z.string(),params:w.z.optional(Ga)}),xr=w.z.object({_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),ns=w.z.union([w.z.string(),w.z.number().int()]),lf=w.z.object({jsonrpc:w.z.literal(rs),id:ns}).merge(er).strict(),cf=a=>lf.safeParse(a).success,uf=w.z.object({jsonrpc:w.z.literal(rs)}).merge(Br).strict(),df=a=>uf.safeParse(a).success,ff=w.z.object({jsonrpc:w.z.literal(rs),id:ns,result:xr}).strict(),Ll=a=>ff.safeParse(a).success,tt;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(tt||(tt={}));var hf=w.z.object({jsonrpc:w.z.literal(rs),id:ns,error:w.z.object({code:w.z.number().int(),message:w.z.string(),data:w.z.optional(w.z.unknown())})}).strict(),pf=a=>hf.safeParse(a).success,mf=w.z.union([lf,uf,ff,hf]),as=xr.strict(),is=Br.extend({method:w.z.literal("notifications/cancelled"),params:Ga.extend({requestId:ns,reason:w.z.string().optional()})}),ss=w.z.object({src:w.z.string(),mimeType:w.z.optional(w.z.string()),sizes:w.z.optional(w.z.string())}).passthrough(),Ka=w.z.object({name:w.z.string(),title:w.z.optional(w.z.string())}).passthrough(),gf=Ka.extend({version:w.z.string(),websiteUrl:w.z.optional(w.z.string()),icons:w.z.optional(w.z.array(ss))}),Lb=w.z.object({experimental:w.z.optional(w.z.object({}).passthrough()),sampling:w.z.optional(w.z.object({}).passthrough()),elicitation:w.z.optional(w.z.object({}).passthrough()),roots:w.z.optional(w.z.object({listChanged:w.z.optional(w.z.boolean())}).passthrough())}).passthrough(),Nl=er.extend({method:w.z.literal("initialize"),params:Er.extend({protocolVersion:w.z.string(),capabilities:Lb,clientInfo:gf})});var Nb=w.z.object({experimental:w.z.optional(w.z.object({}).passthrough()),logging:w.z.optional(w.z.object({}).passthrough()),completions:w.z.optional(w.z.object({}).passthrough()),prompts:w.z.optional(w.z.object({listChanged:w.z.optional(w.z.boolean())}).passthrough()),resources:w.z.optional(w.z.object({subscribe:w.z.optional(w.z.boolean()),listChanged:w.z.optional(w.z.boolean())}).passthrough()),tools:w.z.optional(w.z.object({listChanged:w.z.optional(w.z.boolean())}).passthrough())}).passthrough(),Fb=xr.extend({protocolVersion:w.z.string(),capabilities:Nb,serverInfo:gf,instructions:w.z.optional(w.z.string())}),Fl=Br.extend({method:w.z.literal("notifications/initialized")});var os=er.extend({method:w.z.literal("ping")}),jb=w.z.object({progress:w.z.number(),total:w.z.optional(w.z.number()),message:w.z.optional(w.z.string())}).passthrough(),ls=Br.extend({method:w.z.literal("notifications/progress"),params:Ga.merge(jb).extend({progressToken:sf})}),cs=er.extend({params:Er.extend({cursor:w.z.optional(of)}).optional()}),us=xr.extend({nextCursor:w.z.optional(of)}),vf=w.z.object({uri:w.z.string(),mimeType:w.z.optional(w.z.string()),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),_f=vf.extend({text:w.z.string()}),jl=w.z.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),yf=vf.extend({blob:jl}),bf=Ka.extend({uri:w.z.string(),description:w.z.optional(w.z.string()),mimeType:w.z.optional(w.z.string()),icons:w.z.optional(w.z.array(ss)),_meta:w.z.optional(w.z.object({}).passthrough())}),qb=Ka.extend({uriTemplate:w.z.string(),description:w.z.optional(w.z.string()),mimeType:w.z.optional(w.z.string()),_meta:w.z.optional(w.z.object({}).passthrough())}),ds=cs.extend({method:w.z.literal("resources/list")}),zb=us.extend({resources:w.z.array(bf)}),fs=cs.extend({method:w.z.literal("resources/templates/list")}),Ub=us.extend({resourceTemplates:w.z.array(qb)}),hs=er.extend({method:w.z.literal("resources/read"),params:Er.extend({uri:w.z.string()})}),Hb=xr.extend({contents:w.z.array(w.z.union([_f,yf]))}),Zb=Br.extend({method:w.z.literal("notifications/resources/list_changed")}),Bb=er.extend({method:w.z.literal("resources/subscribe"),params:Er.extend({uri:w.z.string()})}),Vb=er.extend({method:w.z.literal("resources/unsubscribe"),params:Er.extend({uri:w.z.string()})}),Wb=Br.extend({method:w.z.literal("notifications/resources/updated"),params:Ga.extend({uri:w.z.string()})}),Gb=w.z.object({name:w.z.string(),description:w.z.optional(w.z.string()),required:w.z.optional(w.z.boolean())}).passthrough(),Kb=Ka.extend({description:w.z.optional(w.z.string()),arguments:w.z.optional(w.z.array(Gb)),icons:w.z.optional(w.z.array(ss)),_meta:w.z.optional(w.z.object({}).passthrough())}),ps=cs.extend({method:w.z.literal("prompts/list")}),Yb=us.extend({prompts:w.z.array(Kb)}),ms=er.extend({method:w.z.literal("prompts/get"),params:Er.extend({name:w.z.string(),arguments:w.z.optional(w.z.record(w.z.string()))})}),ql=w.z.object({type:w.z.literal("text"),text:w.z.string(),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),zl=w.z.object({type:w.z.literal("image"),data:jl,mimeType:w.z.string(),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),Ul=w.z.object({type:w.z.literal("audio"),data:jl,mimeType:w.z.string(),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),Qb=w.z.object({type:w.z.literal("resource"),resource:w.z.union([_f,yf]),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),Jb=bf.extend({type:w.z.literal("resource_link")}),wf=w.z.union([ql,zl,Ul,Jb,Qb]),Xb=w.z.object({role:w.z.enum(["user","assistant"]),content:wf}).passthrough(),ew=xr.extend({description:w.z.optional(w.z.string()),messages:w.z.array(Xb)}),tw=Br.extend({method:w.z.literal("notifications/prompts/list_changed")}),rw=w.z.object({title:w.z.optional(w.z.string()),readOnlyHint:w.z.optional(w.z.boolean()),destructiveHint:w.z.optional(w.z.boolean()),idempotentHint:w.z.optional(w.z.boolean()),openWorldHint:w.z.optional(w.z.boolean())}).passthrough(),nw=Ka.extend({description:w.z.optional(w.z.string()),inputSchema:w.z.object({type:w.z.literal("object"),properties:w.z.optional(w.z.object({}).passthrough()),required:w.z.optional(w.z.array(w.z.string()))}).passthrough(),outputSchema:w.z.optional(w.z.object({type:w.z.literal("object"),properties:w.z.optional(w.z.object({}).passthrough()),required:w.z.optional(w.z.array(w.z.string()))}).passthrough()),annotations:w.z.optional(rw),icons:w.z.optional(w.z.array(ss)),_meta:w.z.optional(w.z.object({}).passthrough())}),gs=cs.extend({method:w.z.literal("tools/list")}),aw=us.extend({tools:w.z.array(nw)}),Ef=xr.extend({content:w.z.array(wf).default([]),structuredContent:w.z.object({}).passthrough().optional(),isError:w.z.optional(w.z.boolean())}),VS=Ef.or(xr.extend({toolResult:w.z.unknown()})),vs=er.extend({method:w.z.literal("tools/call"),params:Er.extend({name:w.z.string(),arguments:w.z.optional(w.z.record(w.z.unknown()))})}),iw=Br.extend({method:w.z.literal("notifications/tools/list_changed")}),Ya=w.z.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Hl=er.extend({method:w.z.literal("logging/setLevel"),params:Er.extend({level:Ya})}),sw=Br.extend({method:w.z.literal("notifications/message"),params:Ga.extend({level:Ya,logger:w.z.optional(w.z.string()),data:w.z.unknown()})}),ow=w.z.object({name:w.z.string().optional()}).passthrough(),lw=w.z.object({hints:w.z.optional(w.z.array(ow)),costPriority:w.z.optional(w.z.number().min(0).max(1)),speedPriority:w.z.optional(w.z.number().min(0).max(1)),intelligencePriority:w.z.optional(w.z.number().min(0).max(1))}).passthrough(),cw=w.z.object({role:w.z.enum(["user","assistant"]),content:w.z.union([ql,zl,Ul])}).passthrough(),uw=er.extend({method:w.z.literal("sampling/createMessage"),params:Er.extend({messages:w.z.array(cw),systemPrompt:w.z.optional(w.z.string()),includeContext:w.z.optional(w.z.enum(["none","thisServer","allServers"])),temperature:w.z.optional(w.z.number()),maxTokens:w.z.number().int(),stopSequences:w.z.optional(w.z.array(w.z.string())),metadata:w.z.optional(w.z.object({}).passthrough()),modelPreferences:w.z.optional(lw)})}),Zl=xr.extend({model:w.z.string(),stopReason:w.z.optional(w.z.enum(["endTurn","stopSequence","maxTokens"]).or(w.z.string())),role:w.z.enum(["user","assistant"]),content:w.z.discriminatedUnion("type",[ql,zl,Ul])}),dw=w.z.object({type:w.z.literal("boolean"),title:w.z.optional(w.z.string()),description:w.z.optional(w.z.string()),default:w.z.optional(w.z.boolean())}).passthrough(),fw=w.z.object({type:w.z.literal("string"),title:w.z.optional(w.z.string()),description:w.z.optional(w.z.string()),minLength:w.z.optional(w.z.number()),maxLength:w.z.optional(w.z.number()),format:w.z.optional(w.z.enum(["email","uri","date","date-time"]))}).passthrough(),hw=w.z.object({type:w.z.enum(["number","integer"]),title:w.z.optional(w.z.string()),description:w.z.optional(w.z.string()),minimum:w.z.optional(w.z.number()),maximum:w.z.optional(w.z.number())}).passthrough(),pw=w.z.object({type:w.z.literal("string"),title:w.z.optional(w.z.string()),description:w.z.optional(w.z.string()),enum:w.z.array(w.z.string()),enumNames:w.z.optional(w.z.array(w.z.string()))}).passthrough(),mw=w.z.union([dw,fw,hw,pw]),gw=er.extend({method:w.z.literal("elicitation/create"),params:Er.extend({message:w.z.string(),requestedSchema:w.z.object({type:w.z.literal("object"),properties:w.z.record(w.z.string(),mw),required:w.z.optional(w.z.array(w.z.string()))}).passthrough()})}),Bl=xr.extend({action:w.z.enum(["accept","decline","cancel"]),content:w.z.optional(w.z.record(w.z.string(),w.z.unknown()))}),vw=w.z.object({type:w.z.literal("ref/resource"),uri:w.z.string()}).passthrough();var _w=w.z.object({type:w.z.literal("ref/prompt"),name:w.z.string()}).passthrough(),_s=er.extend({method:w.z.literal("completion/complete"),params:Er.extend({ref:w.z.union([_w,vw]),argument:w.z.object({name:w.z.string(),value:w.z.string()}).passthrough(),context:w.z.optional(w.z.object({arguments:w.z.optional(w.z.record(w.z.string(),w.z.string()))}))})}),yw=xr.extend({completion:w.z.object({values:w.z.array(w.z.string()).max(100),total:w.z.optional(w.z.number().int()),hasMore:w.z.optional(w.z.boolean())}).passthrough()}),bw=w.z.object({uri:w.z.string().startsWith("file://"),name:w.z.optional(w.z.string()),_meta:w.z.optional(w.z.object({}).passthrough())}).passthrough(),ww=er.extend({method:w.z.literal("roots/list")}),Vl=xr.extend({roots:w.z.array(bw)}),Ew=Br.extend({method:w.z.literal("notifications/roots/list_changed")}),WS=w.z.union([os,Nl,_s,Hl,ms,ps,ds,fs,hs,Bb,Vb,vs,gs]),GS=w.z.union([is,ls,Fl,Ew]),KS=w.z.union([as,Zl,Bl,Vl]),YS=w.z.union([os,uw,gw,ww]),QS=w.z.union([is,ls,sw,Wb,Zb,iw,tw]),JS=w.z.union([as,Fb,yw,ew,Yb,zb,Ub,Hb,Ef,aw]),rt=class extends Error{constructor(e,t,s){super(`MCP error ${e}: ${t}`),this.code=e,this.data=s,this.name="McpError"}};var xw=6e4,ys=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(is,t=>{let s=this._requestHandlerAbortControllers.get(t.params.requestId);s?.abort(t.params.reason)}),this.setNotificationHandler(ls,t=>{this._onprogress(t)}),this.setRequestHandler(os,t=>({}))}_setupTimeout(e,t,s,r,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:s,resetTimeoutOnProgress:o,onTimeout:r})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let s=Date.now()-t.startTime;if(t.maxTotalTimeout&&s>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new rt(tt.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:s});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var t,s,r;this._transport=e;let o=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let c=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=d=>{c?.(d),this._onerror(d)};let u=(r=this._transport)===null||r===void 0?void 0:r.onmessage;this._transport.onmessage=(d,h)=>{u?.(d,h),Ll(d)||pf(d)?this._onresponse(d):cf(d)?this._onrequest(d,h):df(d)?this._onnotification(d):this._onerror(new Error(`Unknown message type: ${JSON.stringify(d)}`))},await this._transport.start()}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new rt(tt.ConnectionClosed,"Connection closed");for(let r of t.values())r(s)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let s=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(r=>this._onerror(new Error(`Uncaught error in notification handler: ${r}`)))}_onrequest(e,t){var s,r;let o=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,c=this._transport;if(o===void 0){c?.send({jsonrpc:"2.0",id:e.id,error:{code:tt.MethodNotFound,message:"Method not found"}}).catch(h=>this._onerror(new Error(`Failed to send an error response: ${h}`)));return}let u=new AbortController;this._requestHandlerAbortControllers.set(e.id,u);let d={signal:u.signal,sessionId:c?.sessionId,_meta:(r=e.params)===null||r===void 0?void 0:r._meta,sendNotification:h=>this.notification(h,{relatedRequestId:e.id}),sendRequest:(h,m,g)=>this.request(h,m,{...g,relatedRequestId:e.id}),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>o(e,d)).then(h=>{if(!u.signal.aborted)return c?.send({result:h,jsonrpc:"2.0",id:e.id})},h=>{var m;if(!u.signal.aborted)return c?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(h.code)?h.code:tt.InternalError,message:(m=h.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(h=>this._onerror(new Error(`Failed to send response: ${h}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...s}=e.params,r=Number(t),o=this._progressHandlers.get(r);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let c=this._responseHandlers.get(r),u=this._timeoutInfo.get(r);if(u&&c&&u.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(d){c(d);return}o(s)}_onresponse(e){let t=Number(e.id),s=this._responseHandlers.get(t);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),Ll(e))s(e);else{let r=new rt(e.error.code,e.error.message,e.error.data);s(r)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,t,s){let{relatedRequestId:r,resumptionToken:o,onresumptiontoken:c}=s??{};return new Promise((u,d)=>{var h,m,g,v,p,y;if(!this._transport){d(new Error("Not connected"));return}((h=this._options)===null||h===void 0?void 0:h.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(m=s?.signal)===null||m===void 0||m.throwIfAborted();let x=this._requestMessageId++,b={...e,jsonrpc:"2.0",id:x};s?.onprogress&&(this._progressHandlers.set(x,s.onprogress),b.params={...e.params,_meta:{...((g=e.params)===null||g===void 0?void 0:g._meta)||{},progressToken:x}});let R=j=>{var M;this._responseHandlers.delete(x),this._progressHandlers.delete(x),this._cleanupTimeout(x),(M=this._transport)===null||M===void 0||M.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:x,reason:String(j)}},{relatedRequestId:r,resumptionToken:o,onresumptiontoken:c}).catch($=>this._onerror(new Error(`Failed to send cancellation: ${$}`))),d(j)};this._responseHandlers.set(x,j=>{var M;if(!(!((M=s?.signal)===null||M===void 0)&&M.aborted)){if(j instanceof Error)return d(j);try{let $=t.parse(j.result);u($)}catch($){d($)}}}),(v=s?.signal)===null||v===void 0||v.addEventListener("abort",()=>{var j;R((j=s?.signal)===null||j===void 0?void 0:j.reason)});let z=(p=s?.timeout)!==null&&p!==void 0?p:xw,I=()=>R(new rt(tt.RequestTimeout,"Request timed out",{timeout:z}));this._setupTimeout(x,z,s?.maxTotalTimeout,I,(y=s?.resetTimeoutOnProgress)!==null&&y!==void 0?y:!1),this._transport.send(b,{relatedRequestId:r,resumptionToken:o,onresumptiontoken:c}).catch(j=>{this._cleanupTimeout(x),d(j)})})}async notification(e,t){var s,r;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((r=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&r!==void 0?r:[]).includes(e.method)&&!e.params&&!t?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var d;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let h={...e,jsonrpc:"2.0"};(d=this._transport)===null||d===void 0||d.send(h,t).catch(m=>this._onerror(m))});return}let u={...e,jsonrpc:"2.0"};await this._transport.send(u,t)}setRequestHandler(e,t){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(r,o)=>Promise.resolve(t(e.parse(r),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(t(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function xf(a,e){return Object.entries(e).reduce((t,[s,r])=>(r&&typeof r=="object"?t[s]=t[s]?{...t[s],...r}:r:t[s]=r,t),{...a})}var Pp=$l(Sp(),1),Fs=class extends ys{constructor(e,t){var s;super(t),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Ya.options.map((r,o)=>[r,o])),this.isMessageIgnored=(r,o)=>{let c=this._loggingLevels.get(o);return c?this.LOG_LEVEL_SEVERITY.get(r)<this.LOG_LEVEL_SEVERITY.get(c):!1},this._capabilities=(s=t?.capabilities)!==null&&s!==void 0?s:{},this._instructions=t?.instructions,this.setRequestHandler(Nl,r=>this._oninitialize(r)),this.setNotificationHandler(Fl,()=>{var r;return(r=this.oninitialized)===null||r===void 0?void 0:r.call(this)}),this._capabilities.logging&&this.setRequestHandler(Hl,async(r,o)=>{var c;let u=o.sessionId||((c=o.requestInfo)===null||c===void 0?void 0:c.headers["mcp-session-id"])||void 0,{level:d}=r.params,h=Ya.safeParse(d);return h.success&&this._loggingLevels.set(u,h.data),{}})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=xf(this._capabilities,e)}assertCapabilityForMethod(e){var t,s,r;switch(e){case"sampling/createMessage":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let t=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:af.includes(t)?t:Ml,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},as)}async createMessage(e,t){return this.request({method:"sampling/createMessage",params:e},Zl,t)}async elicitInput(e,t){let s=await this.request({method:"elicitation/create",params:e},Bl,t);if(s.action==="accept"&&s.content)try{let r=new Pp.default,o=r.compile(e.requestedSchema);if(!o(s.content))throw new rt(tt.InvalidParams,`Elicitation response content does not match requested schema: ${r.errorsText(o.errors)}`)}catch(r){throw r instanceof rt?r:new rt(tt.InternalError,`Error validating elicitation response: ${r}`)}return s}async listRoots(e,t){return this.request({method:"roots/list",params:e},Vl,t)}async sendLoggingMessage(e,t){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,t))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};var Ap=Symbol("Let zodToJsonSchema decide on which parser to use");var Rp={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Tp=a=>typeof a=="string"?{...Rp,name:a}:{...Rp,...a};var kp=a=>{let e=Tp(a),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,r])=>[r._def,{def:r._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}};function vc(a,e,t,s){s?.errorMessages&&t&&(a.errorMessage={...a.errorMessage,[e]:t})}function Me(a,e,t,s,r){a[e]=t,vc(a,e,s,r)}var js=(a,e)=>{let t=0;for(;t<a.length&&t<e.length&&a[t]===e[t];t++);return[(a.length-t).toString(),...e.slice(t)].join("/")};var ke=require("zod");function ot(a){if(a.target!=="openAi")return{};let e=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:a.$refStrategy==="relative"?js(e,a.currentPath):e.join("/")}}var Op=require("zod");function Cp(a,e){let t={type:"array"};return a.type?._def&&a.type?._def?.typeName!==Op.ZodFirstPartyTypeKind.ZodAny&&(t.items=he(a.type._def,{...e,currentPath:[...e.currentPath,"items"]})),a.minLength&&Me(t,"minItems",a.minLength.value,a.minLength.message,e),a.maxLength&&Me(t,"maxItems",a.maxLength.value,a.maxLength.message,e),a.exactLength&&(Me(t,"minItems",a.exactLength.value,a.exactLength.message,e),Me(t,"maxItems",a.exactLength.value,a.exactLength.message,e)),t}function Dp(a,e){let t={type:"integer",format:"int64"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?Me(t,"minimum",s.value,s.message,e):Me(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Me(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Me(t,"maximum",s.value,s.message,e):Me(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Me(t,"maximum",s.value,s.message,e));break;case"multipleOf":Me(t,"multipleOf",s.value,s.message,e);break}return t}function Ip(){return{type:"boolean"}}function qs(a,e){return he(a.type._def,e)}var $p=(a,e)=>he(a.innerType._def,e);function _c(a,e,t){let s=t??e.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((r,o)=>_c(a,e,r))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return rx(a,e)}}var rx=(a,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let s of a.checks)switch(s.kind){case"min":Me(t,"minimum",s.value,s.message,e);break;case"max":Me(t,"maximum",s.value,s.message,e);break}return t};function Mp(a,e){return{...he(a.innerType._def,e),default:a.defaultValue()}}function Lp(a,e){return e.effectStrategy==="input"?he(a.schema._def,e):ot(e)}function Np(a){return{type:"string",enum:Array.from(a.values)}}var nx=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function Fp(a,e){let t=[he(a.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),he(a.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return t.forEach(o=>{if(nx(o))r.push(...o.allOf),o.unevaluatedProperties===void 0&&(s=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:u,...d}=o;c=d}else s=void 0;r.push(c)}}),r.length?{allOf:r,...s}:void 0}function jp(a,e){let t=typeof a.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(a.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[a.value]}:{type:t==="bigint"?"integer":t,const:a.value}}var ya=require("zod");var yc,Or={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(yc===void 0&&(yc=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),yc),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function zs(a,e){let t={type:"string"};if(a.checks)for(let s of a.checks)switch(s.kind){case"min":Me(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":Me(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Cr(t,"email",s.message,e);break;case"format:idn-email":Cr(t,"idn-email",s.message,e);break;case"pattern:zod":Zt(t,Or.email,s.message,e);break}break;case"url":Cr(t,"uri",s.message,e);break;case"uuid":Cr(t,"uuid",s.message,e);break;case"regex":Zt(t,s.regex,s.message,e);break;case"cuid":Zt(t,Or.cuid,s.message,e);break;case"cuid2":Zt(t,Or.cuid2,s.message,e);break;case"startsWith":Zt(t,RegExp(`^${bc(s.value,e)}`),s.message,e);break;case"endsWith":Zt(t,RegExp(`${bc(s.value,e)}$`),s.message,e);break;case"datetime":Cr(t,"date-time",s.message,e);break;case"date":Cr(t,"date",s.message,e);break;case"time":Cr(t,"time",s.message,e);break;case"duration":Cr(t,"duration",s.message,e);break;case"length":Me(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),Me(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{Zt(t,RegExp(bc(s.value,e)),s.message,e);break}case"ip":{s.version!=="v6"&&Cr(t,"ipv4",s.message,e),s.version!=="v4"&&Cr(t,"ipv6",s.message,e);break}case"base64url":Zt(t,Or.base64url,s.message,e);break;case"jwt":Zt(t,Or.jwt,s.message,e);break;case"cidr":{s.version!=="v6"&&Zt(t,Or.ipv4Cidr,s.message,e),s.version!=="v4"&&Zt(t,Or.ipv6Cidr,s.message,e);break}case"emoji":Zt(t,Or.emoji(),s.message,e);break;case"ulid":{Zt(t,Or.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Cr(t,"binary",s.message,e);break}case"contentEncoding:base64":{Me(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{Zt(t,Or.base64,s.message,e);break}}break}case"nanoid":Zt(t,Or.nanoid,s.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}function bc(a,e){return e.patternStrategy==="escape"?ix(a):a}var ax=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function ix(a){let e="";for(let t=0;t<a.length;t++)ax.has(a[t])||(e+="\\"),e+=a[t];return e}function Cr(a,e,t,s){a.format||a.anyOf?.some(r=>r.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&s.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:e,...t&&s.errorMessages&&{errorMessage:{format:t}}})):Me(a,"format",e,t,s)}function Zt(a,e,t,s){a.pattern||a.allOf?.some(r=>r.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&s.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:qp(e,s),...t&&s.errorMessages&&{errorMessage:{pattern:t}}})):Me(a,"pattern",qp(e,s),t,s)}/**
 * Convert a RegExp into an equivalent pattern string that does not rely on `i`, `m`, or `s` flags when requested.
 *
 * When `options.applyRegexFlags` is true and the provided RegExp has one or more of the `i` (case-insensitive),
 * `m` (multiline anchor behavior), or `s` (dot matches newlines) flags, this function returns a string pattern transformed
 * to preserve those flag semantics without requiring the flags themselves. If flag-aware conversion is not requested
 * or the RegExp has no flags, the original `source` is returned. If conversion fails, the original `source` is returned
 * and a warning is emitted that includes `options.currentPath`.
 *
 * @param {RegExp} a - The regular expression to convert.
 * @param {{applyRegexFlags?: boolean, currentPath?: string[]}} e - Options controlling conversion:
 *   - `applyRegexFlags`: when true, attempt to inline `i`, `m`, and `s` flag behavior into the returned pattern.
 *   - `currentPath`: path used in the warning message if conversion fails.
 * @returns {string} A regex pattern string that preserves the original RegExp's semantics; either the transformed pattern
 *                   (when conversion was applied) or the original `a.source`.
 */
function qp(a,e){if(!e.applyRegexFlags||!a.flags)return a.source;let t={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},s=t.i?a.source.toLowerCase():a.source,r="",o=!1,c=!1,u=!1;for(let d=0;d<s.length;d++){if(o){r+=s[d],o=!1;continue}if(t.i){if(c){if(s[d].match(/[a-z]/)){u?(r+=s[d],r+=`${s[d-2]}-${s[d]}`.toUpperCase(),u=!1):s[d+1]==="-"&&s[d+2]?.match(/[a-z]/)?(r+=s[d],u=!0):r+=`${s[d]}${s[d].toUpperCase()}`;continue}}else if(s[d].match(/[a-z]/)){r+=`[${s[d]}${s[d].toUpperCase()}]`;continue}}if(t.m){if(s[d]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(s[d]==="$"){r+=`($|(?=[\r
]))`;continue}}if(t.s&&s[d]==="."){r+=c?`${s[d]}\r
`:`[${s[d]}\r
]`;continue}r+=s[d],s[d]==="\\"?o=!0:c&&s[d]==="]"?c=!1:!c&&s[d]==="["&&(c=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return r}/**
 * Convert a Zod "record" type into a JSON Schema fragment, adapting output for targets and key/value constraints.
 *
 * @param {object} a - Zod record type definition (expects `keyType` and `valueType` in `_def`).
 * @param {object} e - Schema generation context. Expected fields include `target` (e.g., "openApi3", "openAi"), `currentPath` (array), and flags controlling additional properties (`allowedAdditionalProperties`, `rejectedAdditionalProperties`).
 * @returns {object} A JSON Schema object representing the record as an object: it contains `additionalProperties` (schema for values) and, when applicable, `propertyNames` or explicit `properties` along with `required` keys for enum-based keys.
function Us(a,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&a.keyType?._def.typeName===ya.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((s,r)=>({...s,[r]:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"properties",r]})??ot(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let t={type:"object",additionalProperties:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(a.keyType?._def.typeName===ya.ZodFirstPartyTypeKind.ZodString&&a.keyType._def.checks?.length){let{type:s,...r}=zs(a.keyType._def,e);return{...t,propertyNames:r}}else{if(a.keyType?._def.typeName===ya.ZodFirstPartyTypeKind.ZodEnum)return{...t,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===ya.ZodFirstPartyTypeKind.ZodBranded&&a.keyType._def.type._def.typeName===ya.ZodFirstPartyTypeKind.ZodString&&a.keyType._def.type._def.checks?.length){let{type:s,...r}=qs(a.keyType._def,e);return{...t,propertyNames:r}}}return t}/**
 * Generate a JSON-schema-like descriptor for a map type, either as a record (when mapStrategy is "record") or as an array of 2-tuples [key, value].
 *
 * @param {object} a - Type descriptor for the map; expected to contain `keyType` and `valueType` with `_def` shapes.
 * @param {object} e - Generation options and context. Recognized properties:
 *   - {string} [mapStrategy] - If `"record"`, produce a record-style schema via Us(a, e).
 *   - {string[]} [currentPath] - Path context used when delegating to `he` for key/value schemas.
 * @returns {object} A schema object: either the result of Us(a, e) or an array-schema describing an array of [key, value] pairs (outer array maxItems 125, inner items fixed to two elements). 
 */
function zp(a,e){if(e.mapStrategy==="record")return Us(a,e);let t=he(a.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||ot(e),s=he(a.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||ot(e);return{type:"array",maxItems:125,items:{type:"array",items:[t,s],minItems:2,maxItems:2}}}/**
 * Build a lightweight enum schema from the provided descriptor's `values` map.
 *
 * @param {Object} a - Descriptor object containing a `values` map (keys -> values).
 * @returns {{type: string | string[], enum: Array<string|number>}} An object with:
 *  - `type`: `"string"`, `"number"`, or `["string","number"]` indicating the value types present.
 *  - `enum`: array of unique values extracted from `a.values` (preserves strings or numbers).
 */
function Up(a){let e=a.values,s=Object.keys(a.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),r=Array.from(new Set(s.map(o=>typeof o)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:s}}/**
 * Wraps the given node/object in a `not` wrapper unless the target is "openAi".
 * @param {Object} a - Node or options object to wrap; expected to include `target` and `currentPath` properties.
 * @returns {Object|undefined} An object with a `not` property holding the transformed input (with `currentPath` extended by `"not"`), or `undefined` when `a.target === "openAi"`.
 */
function Hp(a){return a.target==="openAi"?void 0:{not:ot({...a,currentPath:[...a.currentPath,"not"]})}}/**
 * Build a JSON schema entry representing a null value, using OpenAPI 3 form when requested.
 * @param {{target?: string}} a - Options object; if `a.target === "openApi3"` the OpenAPI 3 representation is returned.
 * @returns {{enum?: string[], nullable?: boolean, type?: string}} The schema for null: `{ enum: ["null"], nullable: true }` for OpenAPI 3, otherwise `{ type: "null" }`.
 */
function Zp(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Ja={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};/**
 * Produce a simplified schema representation for a Zod union/options set, with special handling for OpenAPI v3 and common literal/enum unions.
 *
 * @param {object} a - Zod schema-like object whose `options` (Array or Map) are inspected; each option is expected to expose `_def.typeName` and related `_def` metadata.
 * @param {object} e - Context object controlling generation; supported field: `target` (e.g., `"openApi3"`) to force OpenAPI v3 formatting.
 * @returns {{type: string|string[], enum?: any[]}|any} An object describing the derived type (string or array of strings) and optional `enum` for literal/enum unions; when the input does not match recognized patterns the function delegates and returns the result of `Bp(a, e)`.
 */
function Vp(a,e){if(e.target==="openApi3")return Bp(a,e);let t=a.options instanceof Map?Array.from(a.options.values()):a.options;if(t.every(s=>s._def.typeName in Ja&&(!s._def.checks||!s._def.checks.length))){let s=t.reduce((r,o)=>{let c=Ja[o._def.typeName];return c&&!r.includes(c)?[...r,c]:r},[]);return{type:s.length>1?s:s[0]}}else if(t.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){let s=t.reduce((r,o)=>{let c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...r,c];case"bigint":return[...r,"integer"];case"object":if(o._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(s.length===t.length){let r=s.filter((o,c,u)=>u.indexOf(o)===c);return{type:r.length>1?r:r[0],enum:t.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(t.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((s,r)=>[...s,...r._def.values.filter(o=>!s.includes(o))],[])};return Bp(a,e)}var Bp=(a,e)=>{let t=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((s,r)=>he(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return t.length?{anyOf:t}:void 0};/**
 * Produce a JSON Schema / OpenAPI representation for a Zod "nullable/optional" wrapper type.
 *
 * If the wrapped type is a simple Zod primitive with no extra checks, returns a compact nullable schema:
 * - For OpenAPI 3 targets: `{ type: <primitive>, nullable: true }`
 * - For JSON Schema targets: `{ type: [<primitive>, "null"] }`
 *
 * For non-primitive or constrained wrapped types:
 * - For OpenAPI 3 targets: inlines the wrapped schema and marks it `nullable: true`; if the wrapped schema is a `$ref` it is wrapped with `allOf`.
 * - For JSON Schema targets: produces an `anyOf` combining the wrapped schema and `{ type: "null" }`.
 *
 * @param {object} a - Zod wrapper schema node; expected to have `innerType._def.typeName` and `innerType._def.checks`.
 * @param {object} e - Generation options; expected to include `target` (e.g., "openApi3") and `currentPath`. Passed through to schema generator helper `he`.
 * @returns {object|undefined} A schema object representing the nullable wrapper, or `undefined` if the inner schema generation failed.
 */
function Wp(a,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return e.target==="openApi3"?{type:Ja[a.innerType._def.typeName],nullable:!0}:{type:[Ja[a.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let s=he(a.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}let t=he(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}/**
 * Build a JSON Schema fragment for a numeric Zod-like schema by mapping its checks (int, min, max, multipleOf) to appropriate JSON Schema properties.
 *
 * @param {{ checks?: Array<{ kind: string, value?: number, inclusive?: boolean, message?: string }>} } a - Schema descriptor whose `checks` array describes numeric constraints.
 * @param {{ target?: string }} e - Generation options; when `target` equals `"jsonSchema7"` exclusive min/max are emitted as `exclusiveMinimum`/`exclusiveMaximum` numeric values, otherwise exclusivity is represented with boolean flags.
 * @returns {{ type: string, minimum?: number, maximum?: number, exclusiveMinimum?: boolean|number, exclusiveMaximum?: boolean|number, multipleOf?: number }} A JSON Schema object representing the numeric constraints (uses `"integer"` when an `int` check is present, otherwise `"number"`). 
 */
function Gp(a,e){let t={type:"number"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"int":t.type="integer",vc(t,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?Me(t,"minimum",s.value,s.message,e):Me(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Me(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Me(t,"maximum",s.value,s.message,e):Me(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Me(t,"maximum",s.value,s.message,e));break;case"multipleOf":Me(t,"multipleOf",s.value,s.message,e);break}return t}/**
 * Convert a Zod object schema into a JSON Schema object representation, honoring context flags (e.g., OpenAI target), required properties, nullable/optional adjustments, and additionalProperties.
 *
 * @param {object} a - Zod object schema instance; must implement `shape()` and expose `_def` metadata used for per-property conversion.
 * @param {object} e - Conversion context containing flags and paths (e.g., `target`, `currentPath`) used to influence property conversion and error/path reporting.
 * @returns {object} A JSON Schema `object` node with `properties`, optional `required` array, and `additionalProperties` when applicable.
function Kp(a,e){let t=e.target==="openAi",s={type:"object",properties:{}},r=[],o=a.shape();for(let u in o){let d=o[u];if(d===void 0||d._def===void 0)continue;let h=ox(d);h&&t&&(d._def.typeName==="ZodOptional"&&(d=d._def.innerType),d.isNullable()||(d=d.nullable()),h=!1);let m=he(d._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});m!==void 0&&(s.properties[u]=m,h||r.push(u))}r.length&&(s.required=r);let c=sx(a,e);return c!==void 0&&(s.additionalProperties=c),s}/**
 * Determine how additional (unknown) object properties should be handled for a Zod object schema.
 *
 * If the schema defines a `catchall` type, resolves that type using the provided resolution context
 * with `currentPath` extended by `"additionalProperties"`. Otherwise, returns one of the context's
 * markers based on the schema's `unknownKeys` policy (`passthrough`, `strict`, or `strip`) and the
 * `removeAdditionalStrategy` flag.
 *
 * @param {object} a - Zod object schema descriptor (expects `.catchall._def.typeName` and `.unknownKeys`).
 * @param {object} e - Resolution context containing `currentPath`, `allowedAdditionalProperties`, `rejectedAdditionalProperties`, and `removeAdditionalStrategy`.
 * @returns {any} The resolved catchall result or the context's allowed/rejected additional-properties marker.
 */
function sx(a,e){if(a.catchall._def.typeName!=="ZodNever")return he(a.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}/**
 * Check whether the given object represents an optional value, treating any error during inspection as optional.
 * @param {any} a - An object expected to expose an `isOptional` method.
 * @returns {boolean} `true` if the object is optional or if calling `isOptional` throws, `false` otherwise.
 */
function ox(a){try{return a.isOptional()}catch{return!0}}var Yp=(a,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return he(a.innerType._def,e);let t=he(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:ot(e)},t]}:ot(e)};var Qp=(a,e)=>{if(e.pipeStrategy==="input")return he(a.in._def,e);if(e.pipeStrategy==="output")return he(a.out._def,e);let t=he(a.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=he(a.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,s].filter(r=>r!==void 0)}};/**
 * Process the internal `_def` of a wrapped type using the supplied argument.
 * @param {object} a - Object containing a `type` property whose `_def` will be used.
 * @param {*} e - Value forwarded to the processor alongside the extracted `_def`.
 * @returns {*} The result of processing the extracted `_def` with `e`.
 */
function Jp(a,e){return he(a.type._def,e)}/**
 * Build a JSON Schema for an array based on a Zod-like array descriptor and compilation context.
 * @param {Object} a - Array descriptor containing `valueType` (element type descriptor) and optional `minSize`/`maxSize` objects with `value` and `message`.
 * @param {Object} e - Schema compilation context (e.g., contains `currentPath`) forwarded to nested schema generation.
 * @returns {Object} A JSON Schema for the array with `uniqueItems: true`, an `items` schema derived from `a.valueType`, and `minItems`/`maxItems` if provided.
 */
function Xp(a,e){let s={type:"array",uniqueItems:!0,items:he(a.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return a.minSize&&Me(s,"minItems",a.minSize.value,a.minSize.message,e),a.maxSize&&Me(s,"maxItems",a.maxSize.value,a.maxSize.message,e),s}/**
 * Convert a tuple-like schema definition into a JSON Schema array descriptor.
 * 
 * @param {object} a - Tuple schema definition containing `items` (array of item schemas) and optional `rest` (schema for additional items).
 * @param {object} e - Conversion context used for recursive schema conversion; expected to include `currentPath` and other metadata.
 * @returns {object} A JSON Schema representation for the array: `items` as a positional schema array, `minItems` set to the defined items length, `maxItems` set when no `rest` is present, and `additionalItems` populated when `rest` is provided.
 */
function em(a,e){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((t,s)=>he(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[]),additionalItems:he(a.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((t,s)=>he(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[])}}/**
 * Create an object whose `not` property is derived from the provided value.
 * @param {*} a - Value used to derive the `not` property.
 * @returns {{not: *}} An object with a `not` property containing the derived value.
 */
function tm(a){return{not:ot(a)}}function rm(a){return ot(a)}var nm=(a,e)=>he(a.innerType._def,e);var am=(a,e,t)=>{switch(e){case ke.ZodFirstPartyTypeKind.ZodString:return zs(a,t);case ke.ZodFirstPartyTypeKind.ZodNumber:return Gp(a,t);case ke.ZodFirstPartyTypeKind.ZodObject:return Kp(a,t);case ke.ZodFirstPartyTypeKind.ZodBigInt:return Dp(a,t);case ke.ZodFirstPartyTypeKind.ZodBoolean:return Ip();case ke.ZodFirstPartyTypeKind.ZodDate:return _c(a,t);case ke.ZodFirstPartyTypeKind.ZodUndefined:return tm(t);case ke.ZodFirstPartyTypeKind.ZodNull:return Zp(t);case ke.ZodFirstPartyTypeKind.ZodArray:return Cp(a,t);case ke.ZodFirstPartyTypeKind.ZodUnion:case ke.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return Vp(a,t);case ke.ZodFirstPartyTypeKind.ZodIntersection:return Fp(a,t);case ke.ZodFirstPartyTypeKind.ZodTuple:return em(a,t);case ke.ZodFirstPartyTypeKind.ZodRecord:return Us(a,t);case ke.ZodFirstPartyTypeKind.ZodLiteral:return jp(a,t);case ke.ZodFirstPartyTypeKind.ZodEnum:return Np(a);case ke.ZodFirstPartyTypeKind.ZodNativeEnum:return Up(a);case ke.ZodFirstPartyTypeKind.ZodNullable:return Wp(a,t);case ke.ZodFirstPartyTypeKind.ZodOptional:return Yp(a,t);case ke.ZodFirstPartyTypeKind.ZodMap:return zp(a,t);case ke.ZodFirstPartyTypeKind.ZodSet:return Xp(a,t);case ke.ZodFirstPartyTypeKind.ZodLazy:return()=>a.getter()._def;case ke.ZodFirstPartyTypeKind.ZodPromise:return Jp(a,t);case ke.ZodFirstPartyTypeKind.ZodNaN:case ke.ZodFirstPartyTypeKind.ZodNever:return Hp(t);case ke.ZodFirstPartyTypeKind.ZodEffects:return Lp(a,t);case ke.ZodFirstPartyTypeKind.ZodAny:return ot(t);case ke.ZodFirstPartyTypeKind.ZodUnknown:return rm(t);case ke.ZodFirstPartyTypeKind.ZodDefault:return Mp(a,t);case ke.ZodFirstPartyTypeKind.ZodBranded:return qs(a,t);case ke.ZodFirstPartyTypeKind.ZodReadonly:return nm(a,t);case ke.ZodFirstPartyTypeKind.ZodCatch:return $p(a,t);case ke.ZodFirstPartyTypeKind.ZodPipeline:return Qp(a,t);case ke.ZodFirstPartyTypeKind.ZodFunction:case ke.ZodFirstPartyTypeKind.ZodVoid:case ke.ZodFirstPartyTypeKind.ZodSymbol:return;default:return(s=>{})(e)}};/**
 * Resolve and produce a JSON Schema representation for the given type while handling recursion and applying optional override/post-process hooks.
 *
 * @param {Object} a - Type descriptor to resolve; expected to include a `typeName` property.
 * @param {Object} e - Resolution context containing runtime state and hooks:
 *                     - {Map} seen: map of already-seen types to their resolution records (used to detect recursion).
 *                     - {Function} [override]: optional hook invoked before resolution; may return a schema or a sentinel to continue default resolution.
 *                     - {Function} [postProcess]: optional hook invoked after resolution to transform the produced schema.
 *                     - {string[]} currentPath: path within the schema being built.
 * @param {boolean} [t=false] - When true, force re-resolution even if the type was previously seen (ignores cached seen result).
 * @returns {Object|undefined} The resolved JSON Schema object for the provided type, or `undefined` if resolution produced no schema.
function he(a,e,t=!1){let s=e.seen.get(a);if(e.override){let u=e.override?.(a,e,s,t);if(u!==Ap)return u}if(s&&!t){let u=lx(s,e);if(u!==void 0)return u}let r={def:a,path:e.currentPath,jsonSchema:void 0};e.seen.set(a,r);let o=am(a,a.typeName,e),c=typeof o=="function"?he(o(),e):o;if(c&&cx(a,e,c),e.postProcess){let u=e.postProcess(c,a,e);return r.jsonSchema=c,u}return r.jsonSchema=c,c}var lx=(a,e)=>{switch(e.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:js(e.currentPath,a.path)};case"none":case"seen":return a.path.length<e.currentPath.length&&a.path.every((t,s)=>e.currentPath[s]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),ot(e)):e.$refStrategy==="seen"?ot(e):void 0}},cx=(a,e,t)=>(a.description&&(t.description=a.description,e.markdownDescription&&(t.markdownDescription=a.description)),t);var Hs=(a,e)=>{let t=kp(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[h,m])=>({...d,[h]:he(m._def,{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??ot(t)}),{}):void 0,r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,o=he(a._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??ot(t),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(o.title=c),t.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[t.openAiAnyTypeName]||(s[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:t.$refStrategy==="relative"?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));let u=r===void 0?s?{...o,[t.definitionPath]:s}:o:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...s,[r]:o}};return t.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u};var wa=require("zod");var im=require("zod"),wc;(function(a){a.Completable="McpCompletable"})(wc||(wc={}));var ba=class extends im.ZodType{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}};ba.create=(a,e)=>new ba({type:a,typeName:wc.Completable,complete:e.complete,...ux(e)});/**
 * Build a validation error mapping configuration from the provided options.
 *
 * Accepts an options object to either supply a custom `errorMap` or legacy
 * per-case override strings (`invalid_type_error`, `required_error`, `message`)
 * and returns an object with an `errorMap` function and optional `description`.
 *
 * @param {Object|undefined|null} a - Configuration options.
 * @param {function} [a.errorMap] - Custom error mapping function; when present it is used verbatim.
 * @param {string} [a.invalid_type_error] - Legacy override message used for "invalid_type" errors when no custom `errorMap` is provided.
 * @param {string} [a.required_error] - Legacy override message used for "required" errors when no custom `errorMap` is provided.
 * @param {string} [a.message] - Generic legacy override message used for enum/other errors when no custom `errorMap` is provided.
 * @param {string} [a.description] - Optional description to include in the returned configuration.
 * @returns {{errorMap: function, description?: string}|{}} An object containing an `errorMap` function and optional `description`, or an empty object if no options were provided.
 * @throws {Error} If a custom `errorMap` is supplied together with `invalid_type_error` or `required_error`.
 */
function ux(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(c,u)=>{var d,h;let{message:m}=a;return c.code==="invalid_enum_value"?{message:m??u.defaultError}:typeof u.data>"u"?{message:(d=m??s)!==null&&d!==void 0?d:u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:(h=m??t)!==null&&h!==void 0?h:u.defaultError}},description:r}}var Bs=class{constructor(e,t){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Fs(e,t)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(gs.shape.method.value),this.server.assertCanSetRequestHandler(vs.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(gs,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,t])=>{let s={name:e,title:t.title,description:t.description,inputSchema:t.inputSchema?Hs(t.inputSchema,{strictUnions:!0}):dx,annotations:t.annotations,_meta:t._meta};return t.outputSchema&&(s.outputSchema=Hs(t.outputSchema,{strictUnions:!0})),s})})),this.server.setRequestHandler(vs,async(e,t)=>{let s=this._registeredTools[e.params.name];if(!s)throw new rt(tt.InvalidParams,`Tool ${e.params.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Tool ${e.params.name} disabled`);let r;if(s.inputSchema){let o=await s.inputSchema.safeParseAsync(e.params.arguments);if(!o.success)throw new rt(tt.InvalidParams,`Invalid arguments for tool ${e.params.name}: ${o.error.message}`);let c=o.data,u=s.callback;try{r=await Promise.resolve(u(c,t))}catch(d){r={content:[{type:"text",text:d instanceof Error?d.message:String(d)}],isError:!0}}}else{let o=s.callback;try{r=await Promise.resolve(o(t))}catch(c){r={content:[{type:"text",text:c instanceof Error?c.message:String(c)}],isError:!0}}}if(s.outputSchema&&!r.isError){if(!r.structuredContent)throw new rt(tt.InvalidParams,`Tool ${e.params.name} has an output schema but no structured content was provided`);let o=await s.outputSchema.safeParseAsync(r.structuredContent);if(!o.success)throw new rt(tt.InvalidParams,`Invalid structured content for tool ${e.params.name}: ${o.error.message}`)}return r}),this._toolHandlersInitialized=!0)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(_s.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(_s,async e=>{switch(e.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return this.handleResourceCompletion(e,e.params.ref);default:throw new rt(tt.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,t){let s=this._registeredPrompts[t.name];if(!s)throw new rt(tt.InvalidParams,`Prompt ${t.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Prompt ${t.name} disabled`);if(!s.argsSchema)return Zs;let r=s.argsSchema.shape[e.params.argument.name];if(!(r instanceof ba))return Zs;let c=await r._def.complete(e.params.argument.value,e.params.context);return om(c)}async handleResourceCompletion(e,t){let s=Object.values(this._registeredResourceTemplates).find(c=>c.resourceTemplate.uriTemplate.toString()===t.uri);if(!s){if(this._registeredResources[t.uri])return Zs;throw new rt(tt.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let r=s.resourceTemplate.completeCallback(e.params.argument.name);if(!r)return Zs;let o=await r(e.params.argument.value,e.params.context);return om(o)}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(ds.shape.method.value),this.server.assertCanSetRequestHandler(fs.shape.method.value),this.server.assertCanSetRequestHandler(hs.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(ds,async(e,t)=>{let s=Object.entries(this._registeredResources).filter(([o,c])=>c.enabled).map(([o,c])=>({uri:o,name:c.name,...c.metadata})),r=[];for(let o of Object.values(this._registeredResourceTemplates)){if(!o.resourceTemplate.listCallback)continue;let c=await o.resourceTemplate.listCallback(t);for(let u of c.resources)r.push({...o.metadata,...u})}return{resources:[...s,...r]}}),this.server.setRequestHandler(fs,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([t,s])=>({name:t,uriTemplate:s.resourceTemplate.uriTemplate.toString(),...s.metadata}))})),this.server.setRequestHandler(hs,async(e,t)=>{let s=new URL(e.params.uri),r=this._registeredResources[s.toString()];if(r){if(!r.enabled)throw new rt(tt.InvalidParams,`Resource ${s} disabled`);return r.readCallback(s,t)}for(let o of Object.values(this._registeredResourceTemplates)){let c=o.resourceTemplate.uriTemplate.match(s.toString());if(c)return o.readCallback(s,c,t)}throw new rt(tt.InvalidParams,`Resource ${s} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(ps.shape.method.value),this.server.assertCanSetRequestHandler(ms.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(ps,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,t])=>({name:e,title:t.title,description:t.description,arguments:t.argsSchema?hx(t.argsSchema):void 0}))})),this.server.setRequestHandler(ms,async(e,t)=>{let s=this._registeredPrompts[e.params.name];if(!s)throw new rt(tt.InvalidParams,`Prompt ${e.params.name} not found`);if(!s.enabled)throw new rt(tt.InvalidParams,`Prompt ${e.params.name} disabled`);if(s.argsSchema){let r=await s.argsSchema.safeParseAsync(e.params.arguments);if(!r.success)throw new rt(tt.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${r.error.message}`);let o=r.data,c=s.callback;return await Promise.resolve(c(o,t))}else{let r=s.callback;return await Promise.resolve(r(t))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,t,...s){let r;typeof s[0]=="object"&&(r=s.shift());let o=s[0];if(typeof t=="string"){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let c=this._createRegisteredResource(e,void 0,t,r,o);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),c}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let c=this._createRegisteredResourceTemplate(e,void 0,t,r,o);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),c}}registerResource(e,t,s,r){if(typeof t=="string"){if(this._registeredResources[t])throw new Error(`Resource ${t} is already registered`);let o=this._createRegisteredResource(e,s.title,t,s,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let o=this._createRegisteredResourceTemplate(e,s.title,t,s,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),o}}_createRegisteredResource(e,t,s,r,o){let c={name:e,title:t,metadata:r,readCallback:o,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({uri:null}),update:u=>{typeof u.uri<"u"&&u.uri!==s&&(delete this._registeredResources[s],u.uri&&(this._registeredResources[u.uri]=c)),typeof u.name<"u"&&(c.name=u.name),typeof u.title<"u"&&(c.title=u.title),typeof u.metadata<"u"&&(c.metadata=u.metadata),typeof u.callback<"u"&&(c.readCallback=u.callback),typeof u.enabled<"u"&&(c.enabled=u.enabled),this.sendResourceListChanged()}};return this._registeredResources[s]=c,c}_createRegisteredResourceTemplate(e,t,s,r,o){let c={resourceTemplate:s,title:t,metadata:r,readCallback:o,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({name:null}),update:u=>{typeof u.name<"u"&&u.name!==e&&(delete this._registeredResourceTemplates[e],u.name&&(this._registeredResourceTemplates[u.name]=c)),typeof u.title<"u"&&(c.title=u.title),typeof u.template<"u"&&(c.resourceTemplate=u.template),typeof u.metadata<"u"&&(c.metadata=u.metadata),typeof u.callback<"u"&&(c.readCallback=u.callback),typeof u.enabled<"u"&&(c.enabled=u.enabled),this.sendResourceListChanged()}};return this._registeredResourceTemplates[e]=c,c}_createRegisteredPrompt(e,t,s,r,o){let c={title:t,description:s,argsSchema:r===void 0?void 0:wa.z.object(r),callback:o,enabled:!0,disable:()=>c.update({enabled:!1}),enable:()=>c.update({enabled:!0}),remove:()=>c.update({name:null}),update:u=>{typeof u.name<"u"&&u.name!==e&&(delete this._registeredPrompts[e],u.name&&(this._registeredPrompts[u.name]=c)),typeof u.title<"u"&&(c.title=u.title),typeof u.description<"u"&&(c.description=u.description),typeof u.argsSchema<"u"&&(c.argsSchema=wa.z.object(u.argsSchema)),typeof u.callback<"u"&&(c.callback=u.callback),typeof u.enabled<"u"&&(c.enabled=u.enabled),this.sendPromptListChanged()}};return this._registeredPrompts[e]=c,c}_createRegisteredTool(e,t,s,r,o,c,u,d){let h={title:t,description:s,inputSchema:r===void 0?void 0:wa.z.object(r),outputSchema:o===void 0?void 0:wa.z.object(o),annotations:c,_meta:u,callback:d,enabled:!0,disable:()=>h.update({enabled:!1}),enable:()=>h.update({enabled:!0}),remove:()=>h.update({name:null}),update:m=>{typeof m.name<"u"&&m.name!==e&&(delete this._registeredTools[e],m.name&&(this._registeredTools[m.name]=h)),typeof m.title<"u"&&(h.title=m.title),typeof m.description<"u"&&(h.description=m.description),typeof m.paramsSchema<"u"&&(h.inputSchema=wa.z.object(m.paramsSchema)),typeof m.callback<"u"&&(h.callback=m.callback),typeof m.annotations<"u"&&(h.annotations=m.annotations),typeof m._meta<"u"&&(h._meta=m._meta),typeof m.enabled<"u"&&(h.enabled=m.enabled),this.sendToolListChanged()}};return this._registeredTools[e]=h,this.setToolRequestHandlers(),this.sendToolListChanged(),h}tool(e,...t){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let s,r,o,c;if(typeof t[0]=="string"&&(s=t.shift()),t.length>1){let d=t[0];sm(d)?(r=t.shift(),t.length>1&&typeof t[0]=="object"&&t[0]!==null&&!sm(t[0])&&(c=t.shift())):typeof d=="object"&&d!==null&&(c=t.shift())}let u=t[0];return this._createRegisteredTool(e,void 0,s,r,o,c,void 0,u)}registerTool(e,t,s){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let{title:r,description:o,inputSchema:c,outputSchema:u,annotations:d,_meta:h}=t;return this._createRegisteredTool(e,r,o,c,u,d,h,s)}prompt(e,...t){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let s;typeof t[0]=="string"&&(s=t.shift());let r;t.length>1&&(r=t.shift());let o=t[0],c=this._createRegisteredPrompt(e,void 0,s,r,o);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),c}registerPrompt(e,t,s){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let{title:r,description:o,argsSchema:c}=t,u=this._createRegisteredPrompt(e,r,o,c,s);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),u}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(e,t){return this.server.sendLoggingMessage(e,t)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}};var dx={type:"object",properties:{}};/**
 * Determine whether a value is a non-null object that is either empty or contains at least one value for which `fx` returns `true`.
 *
 * @param {*} a - The value to test; non-object values and `null` do not match.
 * @returns {boolean} `true` if `a` is an object (and not `null`) and either has no own enumerable properties or at least one of its property values makes `fx` return `true`, `false` otherwise.
 */
function sm(a){return typeof a!="object"||a===null?!1:Object.keys(a).length===0||Object.values(a).some(fx)}/**
 * Determines whether a value is a schema-like object exposing `parse` and `safeParse` methods.
 * @param {*} a - The value to test.
 * @returns {boolean} `true` if `a` is an object with callable `parse` and `safeParse` properties, `false` otherwise.
 */
function fx(a){return a!==null&&typeof a=="object"&&"parse"in a&&typeof a.parse=="function"&&"safeParse"in a&&typeof a.safeParse=="function"}/**
 * Build an array of field descriptors from a schema's shape.
 * @param {object} a - Schema-like object containing a `shape` mapping field names to field schemas; each field schema may have a `description` and an `isOptional()` method.
 * @returns {{name: string, description?: string, required: boolean}[]} An array of descriptors where each descriptor contains the field `name`, its `description` (if present), and `required` set to `true` when the field is required, `false` otherwise.
 */
function hx(a){return Object.entries(a.shape).map(([e,t])=>({name:e,description:t.description,required:!t.isOptional()}))}/**
 * Create a completion summary containing up to the first 100 items and metadata.
 * @param {Array} a - Source array of completion values.
 * @returns {Object} An object with a `completion` field:
 *  - `values`: an array with the first up to 100 items from `a`.
 *  - `total`: the total number of items in `a`.
 *  - `hasMore`: `true` if `a` contains more than 100 items, `false` otherwise.
 */
function om(a){return{completion:{values:a.slice(0,100),total:a.length,hasMore:a.length>100}}}var Zs={completion:{values:[],hasMore:!1}};var Pe=require("zod");var cm=$l(require("axios"),1);var lm=require("axios");var Dt=class{static{this.DEFAULT_RETRY_OPTIONS={maxRetries:3,baseDelay:1e3,maxDelay:1e4,exponentialBase:2,retryableErrors:["NETWORK_ERROR","TIMEOUT_ERROR","RATE_LIMIT_ERROR","VEHICLE_ASLEEP_ERROR"]}}static classifyError(e){return e instanceof lm.AxiosError?this.classifyAxiosError(e):e instanceof Error?{type:"UNKNOWN_ERROR",message:e.message,originalError:e,retryable:!1,userFriendly:"An unexpected error occurred. Please try again.",suggestion:"If the problem persists, check your internet connection and API credentials."}:{type:"UNKNOWN_ERROR",message:String(e),originalError:e,retryable:!1,userFriendly:"An unknown error occurred.",suggestion:"Please try again or contact support if the issue persists."}}static classifyAxiosError(e){let t=e.response?.status,s=e.response?.data;if(s?.error){let r=s.error;if(r.includes("asleep")||r.includes("sleeping"))return{type:"VEHICLE_ASLEEP_ERROR",message:`Vehicle is asleep: ${r}`,originalError:e,retryable:!0,statusCode:t,userFriendly:"Your Tesla is currently asleep.",suggestion:"The vehicle will wake up automatically when needed. You can also wake it using the Tesla app."};if(r.includes("offline")||r.includes("not connected"))return{type:"VEHICLE_OFFLINE_ERROR",message:`Vehicle is offline: ${r}`,originalError:e,retryable:!1,statusCode:t,userFriendly:"Your Tesla is currently offline.",suggestion:"Check that your vehicle has cellular connectivity. Try starting the vehicle or using the Tesla app."}}switch(t){case 401:case 403:return{type:"AUTHENTICATION_ERROR",message:"Authentication failed",originalError:e,retryable:!1,statusCode:t,userFriendly:"Authentication failed - invalid API token.",suggestion:"Check your Tessie API token in the configuration. Get a valid token from tessie.com."};case 429:let r=e.response?.headers["retry-after"];return{type:"RATE_LIMIT_ERROR",message:`Rate limit exceeded${r?` - retry after ${r}s`:""}`,originalError:e,retryable:!0,statusCode:t,userFriendly:"Too many requests - please wait a moment.",suggestion:r?`Wait ${r} seconds before trying again.`:"Wait a few seconds and try again. Tessie has rate limits to protect the service."};case 404:return{type:"API_ERROR",message:"Resource not found",originalError:e,retryable:!1,statusCode:t,userFriendly:"Requested information not found.",suggestion:"Check that the VIN is correct and the vehicle is linked to your Tessie account."};case 500:case 502:case 503:case 504:return{type:"API_ERROR",message:`Server error (${t})`,originalError:e,retryable:!0,statusCode:t,userFriendly:"Tessie service is temporarily unavailable.",suggestion:"This is a temporary server issue. Please try again in a few moments."};case 408:return{type:"TIMEOUT_ERROR",message:"Request timeout",originalError:e,retryable:!0,statusCode:t,userFriendly:"Request timed out.",suggestion:"The request took too long. This often happens when the vehicle is waking up. Try again."};default:return e.code==="ECONNABORTED"||e.code==="ETIMEDOUT"?{type:"TIMEOUT_ERROR",message:"Connection timeout",originalError:e,retryable:!0,userFriendly:"Connection timed out.",suggestion:"Check your internet connection and try again."}:e.code==="ENOTFOUND"||e.code==="ECONNREFUSED"?{type:"NETWORK_ERROR",message:"Network connection failed",originalError:e,retryable:!0,userFriendly:"Unable to connect to Tessie service.",suggestion:"Check your internet connection and try again."}:{type:"API_ERROR",message:`HTTP ${t}: ${e.message}`,originalError:e,retryable:t?t>=500:!1,statusCode:t,userFriendly:"An API error occurred.",suggestion:"Please try again. If the problem persists, check the Tessie service status."}}}static async withRetry(e,t={}){let s={...this.DEFAULT_RETRY_OPTIONS,...t},r;for(let o=0;o<=s.maxRetries;o++)try{return await e()}catch(c){if(r=this.classifyError(c),o===s.maxRetries||!s.retryableErrors.includes(r.type))throw r;let d=Math.min(s.baseDelay*Math.pow(s.exponentialBase,o),s.maxDelay)+Math.random()*1e3;console.warn(`Attempt ${o+1} failed: ${r.message}. Retrying in ${Math.round(d)}ms...`),await this.sleep(d)}throw r}static sleep(e){return new Promise(t=>setTimeout(t,e))}static formatErrorForUser(e){let t=`\u274C ${e.userFriendly}`;return e.suggestion&&(t+=`
\u{1F4A1} ${e.suggestion}`),e.type==="RATE_LIMIT_ERROR"&&(t+=`
\u23F1\uFE0F Tessie API has rate limits to ensure service reliability.`),e.type==="VEHICLE_ASLEEP_ERROR"&&(t+=`
\u{1F634} Teslas sleep to conserve battery when not in use.`),t}static shouldDegrade(e){return["VEHICLE_ASLEEP_ERROR","VEHICLE_OFFLINE_ERROR","RATE_LIMIT_ERROR","TIMEOUT_ERROR"].includes(e.type)}static generateFallbackResponse(e,t){return{status:"degraded",error_type:e.type,message:e.userFriendly,suggestion:e.suggestion,context:`${t} unavailable due to ${e.type.toLowerCase().replace("_"," ")}`,retry_recommended:e.retryable,fallback_data:{timestamp:new Date().toISOString(),note:"This is a fallback response due to service unavailability"}}}};var Vs=class{constructor(e){this.accessToken=e,this.client=cm.default.create({baseURL:"https://api.tessie.com",timeout:3e4,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})}async getVehicleState(e,t=!0){return Dt.withRetry(async()=>(await this.client.get(`/${e}/state${t?"?use_cache=true":""}`)).data,{maxRetries:t?2:3,baseDelay:1500})}async getVehicleStates(e,t,s){return Dt.withRetry(async()=>{let r=new URLSearchParams;return t&&r.append("start",t),s&&r.append("end",s),(await this.client.get(`/${e}/states?${r.toString()}`)).data},{maxRetries:2,baseDelay:2e3})}async getVehicleLocation(e){return Dt.withRetry(async()=>(await this.client.get(`/${e}/location`)).data,{maxRetries:3,baseDelay:1e3})}async getDrives(e,t,s,r=50){return Dt.withRetry(async()=>{let o=new URLSearchParams;t&&o.append("start",t),s&&o.append("end",s),o.append("limit",r.toString());let c=await this.client.get(`/${e}/drives?${o.toString()}`);return c.data&&typeof c.data=="object"&&"results"in c.data?c.data.results:c.data},{maxRetries:2,baseDelay:2500})}async getDrivingPath(e,t,s){return Dt.withRetry(async()=>{let r=new URLSearchParams;return r.append("start",t),r.append("end",s),(await this.client.get(`/${e}/path?${r.toString()}`)).data},{maxRetries:1,baseDelay:3e3})}async getVehicles(){return Dt.withRetry(async()=>{let e=await this.client.get("/vehicles"),t;return e.data&&typeof e.data=="object"&&"results"in e.data?t=e.data.results:t=e.data,t.map(s=>({vin:s.vin,display_name:s.last_state?.vehicle_state?.vehicle_name||s.display_name||`Vehicle ${s.vin.slice(-6)}`}))},{maxRetries:2,baseDelay:1500})}};var Ws=class{analyzeQuery(e,t,s=1){let r=1,o=1,c=1,u=[];switch(e){case"get_driving_history":r=30,o=50*s,c=1,t.limit&&t.limit>100&&(u.push("Consider reducing limit to 100 or less for better performance"),r+=10);let d=this.calculateDateRange(t.start_date,t.end_date);d>90&&(u.push("Large date ranges may cause timeouts. Consider smaller chunks."),r+=20,c=Math.ceil(d/30));break;case"get_weekly_mileage":r=35,o=30*s,c=1,this.calculateDateRange(t.start_date,t.end_date)>30&&(u.push("Weekly breakdowns work best for 1-month periods"),r+=15);break;case"get_vehicle_current_state":r=5,o=2,c=1,t.use_cache===!1&&(u.push("Consider using cache to avoid waking the vehicle"),r+=5);break;case"analyze_latest_drive":r=40,o=25,c=1,t.days_back&&t.days_back>7&&(u.push("Consider limiting search to 7 days for faster analysis"),r+=10);break;default:r=10,o=5}return{estimatedResponseSize:o,complexity:r,apiCallsRequired:c,suggestions:u}}optimizeForMCP(e,t){let s=this.analyzeQuery(e,t),r={...t},o=[];switch(e){case"get_driving_history":(!t.limit||t.limit>50)&&(r.limit=50,o.push("Reduced limit to 50 for optimal MCP performance")),this.calculateDateRange(t.start_date,t.end_date)>30&&(r.chunked=!0,o.push("Large date range will be automatically chunked"));break;case"get_weekly_mileage":if(this.calculateDateRange(t.start_date,t.end_date)>30){let h=new Date(t.start_date);h.setDate(h.getDate()+30),r.end_date=h.toISOString(),o.push("Limited to 30-day window for weekly breakdown")}break;case"get_vehicle_current_state":t.use_cache===!1&&(r.use_cache=!0,o.push("Enabled cache to prevent vehicle wake-up"));break;case"analyze_latest_drive":(!t.days_back||t.days_back>14)&&(r.days_back=7,o.push("Limited search to 7 days for optimal performance"));break}let c=this.analyzeQuery(e,r);return{isOptimized:c.complexity<s.complexity,originalComplexity:s.complexity,optimizedComplexity:c.complexity,recommendations:[...s.suggestions,...o],optimizedParameters:r}}calculateDateRange(e,t){if(!e||!t)return 7;let s=new Date(e),r=new Date(t),o=Math.abs(r.getTime()-s.getTime());return Math.ceil(o/(1e3*60*60*24))}parseNaturalLanguage(e){let t=e.toLowerCase();if((t.includes("latest")||t.includes("last")||t.includes("recent"))&&(t.includes("drive")||t.includes("trip"))&&(t.includes("analyz")||t.includes("detail")||t.includes("how long")||t.includes("battery")||t.includes("fsd")||t.includes("duration")))return{operation:"analyze_latest_drive",parameters:{days_back:t.includes("yesterday")?2:t.includes("today")?1:7},confidence:.95};if((t.includes("finish")||t.includes("completed")||t.includes("just drove"))&&(t.includes("how long")||t.includes("battery")||t.includes("duration")||t.includes("analyz")||t.includes("fsd")))return{operation:"analyze_latest_drive",parameters:{days_back:1},confidence:.9};if((t.includes("week")||t.includes("month"))&&(t.includes("mile")||t.includes("driv"))){let s=this.extractTimeFrame(e);return t.includes("week by week")||t.includes("weekly breakdown")||t.includes("break")||t.includes("basis")?{operation:"get_weekly_mileage",parameters:s,confidence:.95}:{operation:"get_weekly_mileage",parameters:s,confidence:.9}}return t.includes("driv")&&(t.includes("history")||t.includes("trip"))?{operation:"get_driving_history",parameters:{...this.extractTimeFrame(e),limit:50},confidence:.8}:t.includes("location")||t.includes("place")||t.includes("where")?{operation:"get_mileage_at_location",parameters:{...this.extractTimeFrame(e),location:"extracted_location"},confidence:.6}:t.includes("current")||t.includes("now")||t.includes("status")?{operation:"get_vehicle_current_state",parameters:{use_cache:!0},confidence:.8}:t.includes("vehicle")&&(t.includes("list")||t.includes("all"))?{operation:"get_vehicles",parameters:{},confidence:.8}:{operation:"unknown",parameters:{},confidence:0}}extractTimeFrame(e){let t=new Date,s=e.toLowerCase();if(s.includes("last month")||s.includes("previous month")){let c=new Date(t);c.setMonth(c.getMonth()-1),c.setDate(1),c.setHours(0,0,0,0);let u=new Date(c);return u.setMonth(u.getMonth()+1),u.setDate(0),u.setHours(23,59,59,999),{start_date:c.toISOString(),end_date:u.toISOString()}}if(s.includes("this month")||s.includes("current month")){let c=new Date(t);return c.setDate(1),c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}if(s.includes("last week")||s.includes("previous week")){let c=new Date(t);return c.setDate(c.getDate()-7),c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}if(s.includes("this week")){let c=new Date(t),u=c.getDay(),d=u===0?6:u-1;return c.setDate(c.getDate()-d),c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}let r=s.match(/last (\d+) days?/);if(r){let c=parseInt(r[1]),u=new Date(t);return u.setDate(u.getDate()-c),u.setHours(0,0,0,0),{start_date:u.toISOString(),end_date:t.toISOString()}}if(s.includes("today")){let c=new Date(t);return c.setHours(0,0,0,0),{start_date:c.toISOString(),end_date:t.toISOString()}}if(s.includes("yesterday")){let c=new Date(t);c.setDate(c.getDate()-1),c.setHours(0,0,0,0);let u=new Date(c);return u.setHours(23,59,59,999),{start_date:c.toISOString(),end_date:u.toISOString()}}let o=new Date(t);return o.setDate(o.getDate()-30),o.setHours(0,0,0,0),{start_date:o.toISOString(),end_date:t.toISOString()}}};var Gs=class{mergeDrives(e){if(e.length===0)return[];let t=[...e].sort((o,c)=>o.started_at-c.started_at),s=[],r=[t[0]];for(let o=1;o<t.length;o++){let c=t[o-1],u=t[o],d=(u.started_at-c.ended_at)/60;this.shouldMergeDrives(c,u,d)?r.push(u):(s.push(this.createMergedDrive(r)),r=[u])}return r.length>0&&s.push(this.createMergedDrive(r)),s}shouldMergeDrives(e,t,s){return s<7||t.starting_battery-e.ending_battery>5}createMergedDrive(e){if(e.length===0)throw new Error("Cannot create merged drive from empty array");let t=e[0],s=e[e.length-1],r=[];for(let v=0;v<e.length-1;v++){let p=e[v],y=e[v+1],x=(y.started_at-p.ended_at)/60;if(x>0){let R=y.starting_battery-p.ending_battery>5?"charging":x<7?"short":"excluded";r.push({location:p.ending_location,duration_minutes:Math.round(x*100)/100,stop_type:R,started_at:p.ended_at,ended_at:y.started_at})}}let o=e.reduce((v,p)=>v+p.odometer_distance,0),c=(s.ended_at-t.started_at)/60,u=e.reduce((v,p)=>v+(p.ended_at-p.started_at)/60,0),d=Math.max(...e.map(v=>v.max_speed||0)),h=o>0?o/(u/60):0,m={id:`merged_${e.map(v=>v.id).join("_")}`,originalDriveIds:e.map(v=>v.id),started_at:t.started_at,ended_at:s.ended_at,starting_location:t.starting_location,ending_location:s.ending_location,starting_battery:t.starting_battery,ending_battery:s.ending_battery,total_distance:Math.round(o*100)/100,total_duration_minutes:Math.round(c*100)/100,driving_duration_minutes:Math.round(u*100)/100,stops:r,autopilot_distance:0,autopilot_percentage:0,energy_consumed:t.starting_battery-s.ending_battery,average_speed:Math.round(h*100)/100,max_speed:Math.round(d*100)/100},g=this.predictAutopilotUsage(m);return m.autopilot_distance=g,m.autopilot_percentage=o>0?Math.round(g/o*1e4)/100:0,m}analyzeLatestDrive(e){if(e.length===0)return null;let t=this.mergeDrives(e);if(t.length===0)return null;let s=t[t.length-1],r=this.analyzeBatteryConsumption(s),o=this.analyzeFSDUsage(s),c=this.generateDriveSummary(s,r,o);return{mergedDrive:s,batteryConsumption:r,fsdAnalysis:o,summary:c}}analyzeBatteryConsumption(e){let t=Math.round(e.energy_consumed*100)/100,r=Math.round(t/100*75*100)/100,o=e.total_distance>0&&r>0?Math.round(e.total_distance/r*100)/100:void 0;return{percentage_used:t,estimated_kwh_used:r,efficiency_miles_per_kwh:o}}analyzeFSDUsage(e){let t=this.predictAutopilotUsage(e),s=e.total_distance>0?Math.round(t/e.total_distance*1e4)/100:0;return{total_autopilot_miles:t,fsd_percentage:s,autopilot_available:!0,note:t>0?"Estimated based on highway driving patterns and speed consistency":"Low probability of FSD usage detected from driving patterns"}}predictAutopilotUsage(e){if(e.total_distance<2)return 0;let t=0;e.average_speed>35?t+=.5:e.average_speed>25?t+=.3:e.average_speed>15&&(t+=.1),e.total_distance>15?t+=.4:e.total_distance>8?t+=.3:e.total_distance>4&&(t+=.2),e.max_speed>65?t+=.2:e.max_speed>45&&(t+=.1);let s=this.calculateSpeedConsistency(e);if(t+=s*.15,e.driving_duration_minutes>20?t+=.15:e.driving_duration_minutes>10&&(t+=.1),t=Math.min(t,1),e.average_speed>40&&e.total_distance>20?t=Math.max(t,.75):e.average_speed>30&&e.total_distance>10&&(t=Math.max(t,.65)),e.total_distance>5){let o=Math.min(2/e.total_distance,.15);t=Math.max(0,t-o)}t=Math.min(t,.92);let r=e.total_distance*t;return Math.round(r*100)/100}calculateSpeedConsistency(e){if(e.average_speed===0||e.max_speed===0)return 0;let t=e.average_speed/e.max_speed;return t>.85?1:t>.75?.8:t>.65?.6:t>.55?.4:.2}generateDriveSummary(e,t,s){let r=e.total_duration_minutes,o=e.driving_duration_minutes,c=r-o,u=`Drive from ${e.starting_location} to ${e.ending_location}:
`;if(u+=`\u2022 Total time: ${Math.floor(r/60)}h ${Math.round(r%60)}m
`,u+=`\u2022 Driving time: ${Math.floor(o/60)}h ${Math.round(o%60)}m
`,c>1){if(u+=`\u2022 Stop time: ${Math.floor(c/60)}h ${Math.round(c%60)}m`,e.stops.length>0){let d=e.stops.filter(m=>m.stop_type==="charging").length,h=e.stops.filter(m=>m.stop_type==="short").length;d>0&&(u+=` (${d} charging stop${d>1?"s":""})`),h>0&&(u+=` (${h} short stop${h>1?"s":""})`)}u+=`
`}return u+=`\u2022 Distance: ${e.total_distance} miles
`,u+=`\u2022 Average speed: ${e.average_speed} mph (max: ${e.max_speed} mph)
`,u+=`\u2022 Battery used: ${t.percentage_used}% (\u2248${t.estimated_kwh_used} kWh)
`,t.efficiency_miles_per_kwh&&(u+=`\u2022 Efficiency: ${t.efficiency_miles_per_kwh} mi/kWh
`),s.autopilot_available&&s.total_autopilot_miles>0?u+=`\u2022 FSD/Autopilot: ${s.total_autopilot_miles} miles (${s.fsd_percentage}% of drive)`:u+=`\u2022 FSD/Autopilot: ${s.note||"Data not available"}`,u}};var Xa=class{constructor(e){this.customRates=e;this.defaultRates={home_rate_per_kwh:.13,supercharger_rate_per_kwh:.28,public_rate_per_kwh:.2,work_rate_per_kwh:0,time_of_use:{off_peak:{hours:"23:00-07:00",rate:.09},peak:{hours:"16:00-21:00",rate:.32}}};this.homeLocations=new Set;this.workLocations=new Set;this.frequentLocations=new Map;e&&(this.defaultRates={...this.defaultRates,...e})}detectChargingSessions(e){let t=[],s=[...e].sort((r,o)=>r.started_at-o.started_at);for(let r=1;r<s.length;r++){let o=s[r-1],c=s[r],u=c.starting_battery-o.ending_battery;if(u>2){let d=this.createChargingSession(o,c,u);t.push(d)}}return t}createChargingSession(e,t,s){let r=(t.started_at-e.ended_at)/60,o=e.ending_location,c=this.classifyLocation(o,r,s),d=s/100*75,h=r>0?d/(r/60):0,m=this.getRateForLocation(c,e.ended_at),g=d*m,v=d*4;return{id:`charge_${e.id}_${t.id}`,started_at:e.ended_at,ended_at:t.started_at,location:o,location_type:c,starting_battery:e.ending_battery,ending_battery:t.starting_battery,energy_added_kwh:Math.round(d*100)/100,cost_estimate:Math.round(g*100)/100,cost_per_kwh:m,miles_added:Math.round(v*100)/100,charge_rate_kw:Math.round(h*10)/10,duration_minutes:Math.round(r*100)/100}}classifyLocation(e,t,s){let r=e.toLowerCase();if(r.includes("supercharger")||r.includes("tesla")||t<60&&s>40)return"supercharger";if(this.homeLocations.has(e))return"home";if(this.workLocations.has(e))return"work";if(t>240){let o=this.frequentLocations.get(e)||0;return this.frequentLocations.set(e,o+1),o>5?(this.homeLocations.add(e),"home"):t>480?"home":"work"}return t>30&&t<240?"public":"unknown"}getRateForLocation(e,t){let s=new Date(t*1e3).getHours();switch(e){case"home":if(this.defaultRates.time_of_use){if(s>=23||s<7)return this.defaultRates.time_of_use.off_peak.rate;if(s>=16&&s<21)return this.defaultRates.time_of_use.peak.rate}return this.defaultRates.home_rate_per_kwh;case"supercharger":return this.defaultRates.supercharger_rate_per_kwh;case"public":return this.defaultRates.public_rate_per_kwh;case"work":return this.defaultRates.work_rate_per_kwh;default:return this.defaultRates.public_rate_per_kwh}}analyzeChargingCosts(e){if(e.length===0)return{total_sessions:0,total_cost:0,total_kwh:0,total_miles_added:0,average_cost_per_session:0,average_cost_per_kwh:0,average_cost_per_mile:0,sessions_by_location:{home:{sessions:0,cost:0,kwh:0},supercharger:{sessions:0,cost:0,kwh:0},public:{sessions:0,cost:0,kwh:0},work:{sessions:0,cost:0,kwh:0},unknown:{sessions:0,cost:0,kwh:0}},recommendations:["No charging sessions found in the selected period"],potential_savings:0};let t=e.reduce((d,h)=>d+h.cost_estimate,0),s=e.reduce((d,h)=>d+h.energy_added_kwh,0),r=e.reduce((d,h)=>d+h.miles_added,0),o={home:{sessions:0,cost:0,kwh:0},supercharger:{sessions:0,cost:0,kwh:0},public:{sessions:0,cost:0,kwh:0},work:{sessions:0,cost:0,kwh:0},unknown:{sessions:0,cost:0,kwh:0}};e.forEach(d=>{let h=o[d.location_type];h.sessions++,h.cost+=d.cost_estimate,h.kwh+=d.energy_added_kwh});let c=this.generateRecommendations(e,o),u=this.calculatePotentialSavings(e,o);return{total_sessions:e.length,total_cost:Math.round(t*100)/100,total_kwh:Math.round(s*100)/100,total_miles_added:Math.round(r*100)/100,average_cost_per_session:Math.round(t/e.length*100)/100,average_cost_per_kwh:Math.round(t/s*100)/100,average_cost_per_mile:Math.round(t/r*1e3)/1e3,sessions_by_location:o,recommendations:c,potential_savings:Math.round(u*100)/100}}generateRecommendations(e,t){let s=[],r=t.supercharger.cost/e.reduce((u,d)=>u+d.cost_estimate,0)*100;r>30&&s.push(`\u{1F4A1} ${Math.round(r)}% of charging costs are from Superchargers. Increase home charging to save ~$${Math.round(t.supercharger.cost*.5)}/month`);let o=e.filter(u=>{let d=new Date(u.started_at*1e3).getHours();return u.location_type==="home"&&d>=16&&d<21});if(o.length>0){let u=o.reduce((d,h)=>d+h.cost_estimate,0);s.push(`\u26A1 Shift ${o.length} peak-hour charging sessions to overnight to save ~$${Math.round(u*.6)}/month`)}let c=e.reduce((u,d)=>u+(d.charge_rate_kw||0),0)/e.length;return c<7&&t.home.sessions>0&&s.push(`\u{1F50C} Your average home charge rate is ${c.toFixed(1)}kW. Consider installing a Level 2 charger for faster charging`),t.work.sessions===0&&e.length>10&&s.push("\u{1F3E2} No workplace charging detected. Check if your employer offers free EV charging"),s.length>0?s:["\u2705 Your charging strategy is well optimized!"]}calculatePotentialSavings(e,t){let s=0,r=t.supercharger.kwh,o=this.defaultRates.time_of_use?.off_peak.rate||this.defaultRates.home_rate_per_kwh;s+=r*(this.defaultRates.supercharger_rate_per_kwh-o)*.5;let u=e.filter(d=>{let h=new Date(d.started_at*1e3).getHours();return d.location_type==="home"&&h>=16&&h<21}).reduce((d,h)=>d+h.energy_added_kwh,0);return this.defaultRates.time_of_use&&(s+=u*(this.defaultRates.time_of_use.peak.rate-this.defaultRates.time_of_use.off_peak.rate)),s}learnLocations(e){let t=new Map;for(let o=1;o<e.length;o++){let c=e[o-1],u=e[o],d=c.ending_location,h=(u.started_at-c.ended_at)/3600,m=t.get(d)||{count:0,overnight:0,duration:0};m.count++,m.duration+=h;let g=new Date(c.ended_at*1e3).getHours(),v=new Date(u.started_at*1e3).getHours();(g>20||g<6)&&h>6&&m.overnight++,t.set(d,m)}let s=0,r="";t.forEach((o,c)=>{o.overnight>s&&(s=o.overnight,r=c)}),r&&this.homeLocations.add(r),t.forEach((o,c)=>{o.count>10&&o.duration/o.count>6&&!this.homeLocations.has(c)&&this.workLocations.add(c)})}};var Ks=class{constructor(){this.BATTERY_CAPACITY_KWH=75;this.DEFAULT_HOME_RATE=.13;this.DEFAULT_SUPERCHARGER_RATE=.28;this.DEFAULT_GAS_PRICE=4.5;this.DEFAULT_MPG=30;this.CO2_PER_GALLON=19.6;this.CO2_PER_KWH_GRID=.855}calculateTripCost(e,t=this.DEFAULT_HOME_RATE,s=this.DEFAULT_SUPERCHARGER_RATE,r=this.DEFAULT_GAS_PRICE){if(e.length===0)return this.emptyAnalysis();let o=[...e].sort((b,R)=>b.started_at-R.started_at),c=e.reduce((b,R)=>b+R.odometer_distance,0),u=this.calculateTotalDuration(o),d=this.calculateTotalBatteryUsed(o),h=d/100*this.BATTERY_CAPACITY_KWH,m=h>0?c/h:0,g=this.estimateChargingCosts(o,h,t,s),v=this.calculateGasComparison(c,r),p=this.calculateOptimalCharging(h,t),y=this.generateChargingStrategy(o,d,g),x=this.calculateEnvironmentalImpact(c,h);return{trip_summary:{distance_miles:Math.round(c*100)/100,duration_hours:Math.round(u*100)/100,battery_used_percent:Math.round(d*100)/100,energy_used_kwh:Math.round(h*100)/100,efficiency_miles_per_kwh:Math.round(m*100)/100},cost_breakdown:{electricity_cost:Math.round(g.electricityCost*100)/100,charging_stops_cost:Math.round(g.chargingStopsCost*100)/100,total_cost:Math.round(g.totalCost*100)/100,cost_per_mile:Math.round(g.totalCost/c*1e3)/1e3},comparison:{vs_gas_vehicle:{gas_cost_estimate:Math.round(v.gasCost*100)/100,savings:Math.round(v.savings*100)/100,savings_percentage:Math.round(v.savingsPercent*100)/100},vs_optimal_charging:{optimal_cost:Math.round(p.optimal*100)/100,current_cost:Math.round(g.totalCost*100)/100,potential_savings:Math.round(p.savings*100)/100}},charging_strategy:y,environmental_impact:{co2_saved_lbs:Math.round(x.co2Saved*10)/10,trees_equivalent:Math.round(x.treesEquivalent)}}}emptyAnalysis(){return{trip_summary:{distance_miles:0,duration_hours:0,battery_used_percent:0,energy_used_kwh:0,efficiency_miles_per_kwh:0},cost_breakdown:{electricity_cost:0,charging_stops_cost:0,total_cost:0,cost_per_mile:0},comparison:{vs_gas_vehicle:{gas_cost_estimate:0,savings:0,savings_percentage:0},vs_optimal_charging:{optimal_cost:0,current_cost:0,potential_savings:0}},charging_strategy:["No trip data available"],environmental_impact:{co2_saved_lbs:0,trees_equivalent:0}}}calculateTotalDuration(e){if(e.length===0)return 0;let t=e[0].started_at;return(e[e.length-1].ended_at-t)/3600}calculateTotalBatteryUsed(e){let t=0,s=e[0].starting_battery;for(let r of e){r.starting_battery>s;let o=r.starting_battery-r.ending_battery;o>0&&(t+=o),s=r.ending_battery}return t}estimateChargingCosts(e,t,s,r){let o=0,c=0;for(let d=1;d<e.length;d++){let h=e[d-1],m=e[d],g=m.starting_battery-h.ending_battery;if(g>2){let v=g/100*this.BATTERY_CAPACITY_KWH;(m.started_at-h.ended_at)/3600<1&&g>30?c+=v*r:o+=v*s}}let u=o/s+c/r;if(u<t*.5){let d=t-u;o+=d*s}return{electricityCost:o,chargingStopsCost:c,totalCost:o+c}}calculateGasComparison(e,t){return{gasCost:e/this.DEFAULT_MPG*t,savings:0,savingsPercent:0}}calculateOptimalCharging(e,t){let s=t*.7;return{optimal:e*s,savings:0}}generateChargingStrategy(e,t,s){let r=[],o=s.chargingStopsCost/s.totalCost*100;o>40&&r.push(`\u26A1 High Supercharger usage (${Math.round(o)}%). Consider charging at home before long trips`),t<80&&r.push("\u{1F50B} This trip could be completed with a single overnight charge at home");let c=Math.min(90,t+20);return r.push(`\u{1F4CA} Optimal starting charge: ${Math.round(c)}% for this trip distance`),s.electricityCost>0&&r.push("\u{1F319} Schedule home charging for off-peak hours (11pm-7am) to save 30-50% on electricity"),r}calculateEnvironmentalImpact(e,t){let r=e/this.DEFAULT_MPG*this.CO2_PER_GALLON,o=t*this.CO2_PER_KWH_GRID,c=r-o,u=c/48;return{co2Saved:Math.max(0,c),treesEquivalent:Math.max(0,u)}}estimateFutureTripCost(e,t,s=this.DEFAULT_HOME_RATE,r=this.DEFAULT_SUPERCHARGER_RATE){let d=e/4/this.BATTERY_CAPACITY_KWH*100*1.15,h=d>t,m=Math.max(0,d-t),g=Math.ceil(m/50),v=0,p="";if(h)if(m<=60)v=m/100*this.BATTERY_CAPACITY_KWH*s,p=`Charge to ${Math.round(t+m)}% at home before departure`;else{let y=(90-t)/100*this.BATTERY_CAPACITY_KWH,x=(m-(90-t))/100*this.BATTERY_CAPACITY_KWH;v=y*s+x*r,p=`Charge to 90% at home, then ${g} Supercharger stop${g>1?"s":""} during trip`}else p=`No charging needed - current ${t}% is sufficient`;return{estimated_cost:Math.round(v*100)/100,charging_needed:h,recommended_charge_level:Math.min(100,Math.round(t+m)),charging_stops_needed:g,strategy:p}}};var Ys=class{constructor(){this.MIN_ROUTE_FREQUENCY=3;this.LOCATION_SIMILARITY_THRESHOLD=.8;this.HOME_RATE_PER_KWH=.13}analyzeCommutes(e){if(e.length<10)return this.emptyAnalysis("Not enough driving data to detect commute patterns");let s=this.groupDrivesByRoute(e).filter(d=>d.drives.length>=this.MIN_ROUTE_FREQUENCY).map(d=>this.analyzeRoute(d)),r=this.calculateWeeklySummary(e,s),o=this.generateCommuteRecommendations(s,r),c=s.reduce((d,h)=>d+h.typical_distance*h.frequency,0),u=this.calculateCommuteCost(c);return{routes_detected:s.length,total_commute_miles:Math.round(c*100)/100,total_commute_cost:Math.round(u*100)/100,avg_commute_efficiency:this.calculateAvgEfficiency(s),routes:s,recommendations:o,weekly_summary:r}}emptyAnalysis(e){return{routes_detected:0,total_commute_miles:0,total_commute_cost:0,avg_commute_efficiency:0,routes:[],recommendations:[e],weekly_summary:{total_drives:0,total_miles:0,total_cost:0,avg_efficiency:0,best_day:"N/A",worst_day:"N/A"}}}groupDrivesByRoute(e){let t=new Map;for(let s of e){let r=this.generateRouteId(s.starting_location,s.ending_location);t.has(r)||t.set(r,[]),t.get(r).push(s)}return Array.from(t.entries()).map(([s,r])=>({routeId:s,drives:r}))}generateRouteId(e,t){let s=c=>{let u=c.split(",");return u.length>=3?`${u[u.length-3].trim()}, ${u[u.length-2].trim()}`:c},r=s(e),o=s(t);return[r,o].sort().join(" \u2194 ")}analyzeRoute(e){let{drives:t}=e,s=t.map(m=>m.odometer_distance),r=t.map(m=>(m.ended_at-m.started_at)/60),o=t.map(m=>m.starting_battery-m.ending_battery),c=t.map(m=>{let g=m.odometer_distance,v=m.starting_battery-m.ending_battery;return g===0?0:v/100*75/g*100}).filter(m=>m>0&&m<50),u=this.analyzeTimePatterns(t),d=this.calculateEfficiencyTrend(t),h=this.generateRouteName(t[0]);return{id:e.routeId,name:h,from_location:t[0].starting_location,to_location:t[0].ending_location,typical_distance:this.average(s),frequency:this.calculateWeeklyFrequency(t),avg_duration_minutes:this.average(r),avg_efficiency_kwh_per_100mi:this.average(c),avg_battery_used:this.average(o),best_efficiency:Math.min(...c),worst_efficiency:Math.max(...c),recent_trend:d,time_patterns:u}}generateRouteName(e){let t=o=>{let c=o.split(",");return c.length>=2?c[c.length-3]?.trim()||c[0].trim():o.split(" ")[0]},s=t(e.starting_location),r=t(e.ending_location);return s===r?`${s} Local`:`${s} \u2194 ${r}`}analyzeTimePatterns(e){let t=e.filter(o=>{let c=new Date(o.started_at*1e3).getHours(),u=new Date(o.started_at*1e3).getDay();return c>=6&&c<=10&&u>=1&&u<=5}),s=e.filter(o=>{let c=new Date(o.started_at*1e3).getHours(),u=new Date(o.started_at*1e3).getDay();return c>=15&&c<=19&&u>=1&&u<=5}),r=e.filter(o=>{let c=new Date(o.started_at*1e3).getDay();return c===0||c===6});return{morning_commute:{count:t.length,avg_time:this.calculateAvgTime(t)},evening_commute:{count:s.length,avg_time:this.calculateAvgTime(s)},weekend:{count:r.length,avg_time:this.calculateAvgTime(r)}}}calculateAvgTime(e){if(e.length===0)return"N/A";let t=e.reduce((s,r)=>s+r.started_at,0)/e.length;return new Date(t*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}calculateEfficiencyTrend(e){if(e.length<6)return"stable";let t=e.sort((d,h)=>d.started_at-h.started_at),s=t.slice(-6),r=t.slice(0,Math.min(6,e.length-6));if(r.length===0)return"stable";let o=this.calculateAvgEfficiencyForDrives(s),c=this.calculateAvgEfficiencyForDrives(r),u=(c-o)/c*100;return u>5?"improving":u<-5?"declining":"stable"}calculateAvgEfficiencyForDrives(e){let t=e.map(s=>{let r=s.odometer_distance,o=s.starting_battery-s.ending_battery;return r===0?0:o/100*75/r*100}).filter(s=>s>0&&s<50);return this.average(t)}calculateWeeklyFrequency(e){if(e.length===0)return 0;let t=e.sort((c,u)=>c.started_at-u.started_at),s=t[0],o=(t[t.length-1].started_at-s.started_at)/(168*3600);return o===0?e.length:Math.round(e.length/o*100)/100}calculateWeeklySummary(e,t){let s=new Map,r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];r.forEach(v=>{s.set(v,{drives:0,miles:0,efficiency:0})}),e.forEach(v=>{let p=r[new Date(v.started_at*1e3).getDay()],y=s.get(p);y.drives++,y.miles+=v.odometer_distance;let x=v.odometer_distance,b=v.starting_battery-v.ending_battery;if(x>0){let R=b/100*75/x*100;y.efficiency=(y.efficiency*(y.drives-1)+R)/y.drives}});let o="N/A",c="N/A",u=1/0,d=0;s.forEach((v,p)=>{v.drives>0&&(v.efficiency<u&&v.efficiency>0&&(u=v.efficiency,o=p),v.efficiency>d&&(d=v.efficiency,c=p))});let h=e.reduce((v,p)=>v+p.odometer_distance,0),m=this.calculateCommuteCost(h),g=this.calculateAvgEfficiencyForDrives(e);return{total_drives:e.length,total_miles:Math.round(h*100)/100,total_cost:Math.round(m*100)/100,avg_efficiency:Math.round(g*100)/100,best_day:o,worst_day:c}}generateCommuteRecommendations(e,t){let s=[];return e.forEach(r=>{if(r.recent_trend==="declining"&&s.push(`\u{1F4C9} ${r.name}: Efficiency declining recently. Check tire pressure and driving habits.`),r.avg_efficiency_kwh_per_100mi>30&&s.push(`\u26A1 ${r.name}: High energy usage (${r.avg_efficiency_kwh_per_100mi.toFixed(1)} kWh/100mi). Try smoother acceleration and regenerative braking.`),r.frequency>10){let o=r.typical_distance*r.frequency*r.avg_efficiency_kwh_per_100mi/100*this.HOME_RATE_PER_KWH;s.push(`\u{1F697} ${r.name}: Your most frequent route (${r.frequency.toFixed(1)}x/week, ~$${o.toFixed(2)}/week)`)}}),e.length>2&&s.push(`\u{1F4CA} You have ${e.length} regular routes. Consider optimizing departure times to avoid traffic for better efficiency.`),s.push("\u{1F50B} Pro tip: Pre-condition your car while plugged in to save battery on commutes."),t.best_day!=="N/A"&&t.worst_day!=="N/A"&&s.push(`\u{1F4C8} Best efficiency day: ${t.best_day}. Worst: ${t.worst_day}. Traffic patterns may be affecting your efficiency.`),s}calculateCommuteCost(e){return e/4*this.HOME_RATE_PER_KWH}calculateAvgEfficiency(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r.avg_efficiency_kwh_per_100mi,0);return Math.round(t/e.length*100)/100}average(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r,0);return Math.round(t/e.length*100)/100}};var Qs=class{constructor(){this.BATTERY_CAPACITY_KWH=75;this.HIGHWAY_SPEED_THRESHOLD=55}analyzeEfficiencyTrends(e){if(e.length<5)return this.emptyAnalysis("Insufficient driving data for trend analysis (minimum 5 drives required)");let t=e.sort((h,m)=>h.started_at-m.started_at),s=this.convertToDataPoints(t),r=this.calculateCurrentPeriodStats(s),o=this.calculateTrends(s),c=this.analyzeEfficiencyFactors(t,s),u=this.generateInsights(s,o,c),d=this.generateRecommendations(o,c);return{current_period:r,trends:o,factors_analysis:c,recommendations:d,insights:u}}emptyAnalysis(e){let t={period:"N/A",trend_direction:"stable",trend_percentage:0,avg_efficiency:0,best_efficiency:0,worst_efficiency:0,confidence:"low"};return{current_period:{avg_efficiency:0,total_miles:0,total_drives:0,efficiency_range:{best:0,worst:0}},trends:{weekly:t,monthly:t,seasonal:t},factors_analysis:{weather_impact:{hot_weather_penalty:0,cold_weather_penalty:0,optimal_temp_range:"Unknown"},speed_impact:{highway_efficiency:0,city_efficiency:0,optimal_speed_range:"Unknown"},time_patterns:{best_day_of_week:"Unknown",worst_day_of_week:"Unknown",best_time_of_day:"Unknown"}},recommendations:[e],insights:[]}}convertToDataPoints(e){return e.map(t=>{let s=t.odometer_distance,r=t.starting_battery-t.ending_battery,o=s>0?r/100*this.BATTERY_CAPACITY_KWH/s*100:0,c=t.average_speed||0,u=c>this.HIGHWAY_SPEED_THRESHOLD?Math.min(100,(c-25)/45*100):0,d="mild";return o>35?d="cold":o>30&&(d="hot"),{date:new Date(t.started_at*1e3).toISOString().split("T")[0],efficiency_kwh_per_100mi:o,distance_miles:s,weather_factor:d,highway_percentage:u,avg_speed:c}}).filter(t=>t.efficiency_kwh_per_100mi>0&&t.efficiency_kwh_per_100mi<60)}calculateCurrentPeriodStats(e){let t=e.map(r=>r.efficiency_kwh_per_100mi),s=e.reduce((r,o)=>r+o.distance_miles,0);return{avg_efficiency:this.average(t),total_miles:Math.round(s*100)/100,total_drives:e.length,efficiency_range:{best:Math.min(...t),worst:Math.max(...t)}}}calculateTrends(e){let t=new Date,s=this.calculatePeriodTrend(e,7,"weekly"),r=this.calculatePeriodTrend(e,30,"monthly"),o=this.calculatePeriodTrend(e,90,"seasonal");return{weekly:s,monthly:r,seasonal:o}}calculatePeriodTrend(e,t,s){let r=new Date,o=new Date(r.getTime()-t*24*60*60*1e3),c=new Date(r.getTime()-2*t*24*60*60*1e3),u=e.filter(y=>new Date(y.date)>=o&&new Date(y.date)<=r),d=e.filter(y=>new Date(y.date)>=c&&new Date(y.date)<o);if(u.length<2||d.length<2)return{period:s,trend_direction:"stable",trend_percentage:0,avg_efficiency:u.length>0?this.average(u.map(y=>y.efficiency_kwh_per_100mi)):0,best_efficiency:u.length>0?Math.min(...u.map(y=>y.efficiency_kwh_per_100mi)):0,worst_efficiency:u.length>0?Math.max(...u.map(y=>y.efficiency_kwh_per_100mi)):0,confidence:"low"};let h=this.average(u.map(y=>y.efficiency_kwh_per_100mi)),m=this.average(d.map(y=>y.efficiency_kwh_per_100mi)),g=(m-h)/m*100,v="stable";g>3?v="improving":g<-3&&(v="declining");let p=u.length>=5&&d.length>=5?"high":u.length>=3&&d.length>=3?"medium":"low";return{period:s,trend_direction:v,trend_percentage:Math.abs(g),avg_efficiency:h,best_efficiency:Math.min(...u.map(y=>y.efficiency_kwh_per_100mi)),worst_efficiency:Math.max(...u.map(y=>y.efficiency_kwh_per_100mi)),confidence:p}}analyzeEfficiencyFactors(e,t){let s=t.filter(y=>y.weather_factor==="hot"),r=t.filter(y=>y.weather_factor==="cold"),o=t.filter(y=>y.weather_factor==="mild"),c=o.length>0?this.average(o.map(y=>y.efficiency_kwh_per_100mi)):0,u=s.length>0?this.average(s.map(y=>y.efficiency_kwh_per_100mi)):c,d=r.length>0?this.average(r.map(y=>y.efficiency_kwh_per_100mi)):c,h=t.filter(y=>y.highway_percentage>50),m=t.filter(y=>y.highway_percentage<=50),g=h.length>0?this.average(h.map(y=>y.efficiency_kwh_per_100mi)):0,v=m.length>0?this.average(m.map(y=>y.efficiency_kwh_per_100mi)):0,p=this.analyzeTimePatterns(e,t);return{weather_impact:{hot_weather_penalty:c>0?(u-c)/c*100:0,cold_weather_penalty:c>0?(d-c)/c*100:0,optimal_temp_range:"65-75\xB0F"},speed_impact:{highway_efficiency:Math.round(g*100)/100,city_efficiency:Math.round(v*100)/100,optimal_speed_range:"45-65 mph"},time_patterns:p}}analyzeTimePatterns(e,t){let s={},r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];e.forEach((v,p)=>{let y=r[new Date(v.started_at*1e3).getDay()];s[y]||(s[y]=[]),t[p]&&s[y].push(t[p].efficiency_kwh_per_100mi)});let o="Unknown",c="Unknown",u=1/0,d=0;Object.entries(s).forEach(([v,p])=>{if(p.length>0){let y=this.average(p);y<u&&(u=y,o=v),y>d&&(d=y,c=v)}});let h={};e.forEach((v,p)=>{let y=new Date(v.started_at*1e3).getHours();h[y]||(h[y]=[]),t[p]&&h[y].push(t[p].efficiency_kwh_per_100mi)});let m="Unknown",g=1/0;return Object.entries(h).forEach(([v,p])=>{if(p.length>=2){let y=this.average(p);if(y<g){g=y;let x=parseInt(v);m=`${x===0?12:x>12?x-12:x}${x<12?"AM":"PM"}`}}}),{best_day_of_week:o,worst_day_of_week:c,best_time_of_day:m}}generateInsights(e,t,s){let r=[];if(t.weekly.confidence!=="low"&&(t.weekly.trend_direction==="improving"?r.push(`\u{1F4C8} Your efficiency has improved ${t.weekly.trend_percentage.toFixed(1)}% this week - great driving habits!`):t.weekly.trend_direction==="declining"&&r.push(`\u{1F4C9} Your efficiency declined ${t.weekly.trend_percentage.toFixed(1)}% this week - check driving patterns and tire pressure`)),s.weather_impact.cold_weather_penalty>15&&r.push(`\u{1F976} Cold weather is significantly impacting efficiency (+${s.weather_impact.cold_weather_penalty.toFixed(1)}% consumption)`),s.weather_impact.hot_weather_penalty>10&&r.push(`\u{1F525} Hot weather and A/C usage is increasing consumption (+${s.weather_impact.hot_weather_penalty.toFixed(1)}%)`),s.speed_impact.highway_efficiency>0&&s.speed_impact.city_efficiency>0){let o=s.speed_impact.highway_efficiency-s.speed_impact.city_efficiency;Math.abs(o)>3&&(o>0?r.push(`\u{1F3D9}\uFE0F City driving is ${Math.abs(o).toFixed(1)} kWh/100mi more efficient than highway driving`):r.push(`\u{1F6E3}\uFE0F Highway driving is ${Math.abs(o).toFixed(1)} kWh/100mi more efficient than city driving`))}return s.time_patterns.best_day_of_week!=="Unknown"&&s.time_patterns.worst_day_of_week!=="Unknown"&&r.push(`\u{1F4C5} Most efficient driving: ${s.time_patterns.best_day_of_week}s. Least efficient: ${s.time_patterns.worst_day_of_week}s`),t.monthly.confidence==="high"&&t.monthly.trend_direction==="improving"&&r.push(`\u{1F3AF} Monthly trend shows ${t.monthly.trend_percentage.toFixed(1)}% efficiency improvement - your driving is optimizing!`),r}generateRecommendations(e,t){let s=[];return e.weekly.trend_direction==="declining"&&e.weekly.confidence!=="low"&&(s.push("\u26A1 Check tire pressure and reduce aggressive acceleration to improve efficiency"),s.push("\u{1F321}\uFE0F Use Eco mode in extreme weather conditions")),t.weather_impact.cold_weather_penalty>20&&(s.push("\u2744\uFE0F Pre-condition cabin while plugged in during cold weather"),s.push("\u{1F50B} Expect 15-25% reduced range in freezing temperatures")),t.weather_impact.hot_weather_penalty>15&&(s.push("\u2600\uFE0F Park in shade and use mobile app to pre-cool before driving"),s.push("\u{1F32C}\uFE0F Use seat heaters instead of cabin heat when possible")),t.speed_impact.highway_efficiency>t.speed_impact.city_efficiency+5&&(s.push("\u{1F3C1} Reduce highway speeds to 65-70 mph for optimal efficiency"),s.push("\u{1F6E3}\uFE0F Use cruise control on highways to maintain consistent speed")),s.push("\u{1F697} Maintain following distance to maximize regenerative braking"),s.push("\u{1F4F1} Monitor real-time efficiency display to develop efficient habits"),t.time_patterns.best_day_of_week!=="Unknown"&&s.push(`\u{1F4C5} Schedule non-urgent trips on ${t.time_patterns.best_day_of_week}s for best efficiency`),s}average(e){if(e.length===0)return 0;let t=e.reduce((s,r)=>s+r,0);return Math.round(t/e.length*100)/100}};var Js=class{constructor(){this.COMFORT_RANGE_THRESHOLD=50;this.EMERGENCY_RANGE_THRESHOLD=20;this.OPTIMAL_CHARGE_LEVEL=80;this.DAILY_CHARGE_LEVEL=90;this.COLD_WEATHER_THRESHOLD=32;this.HOT_WEATHER_THRESHOLD=85;this.OFF_PEAK_START=23;this.OFF_PEAK_END=7;this.PEAK_RATE=.35;this.OFF_PEAK_RATE=.13}generateChargingStrategy(e,t=40,s,r){let o=e.battery_level||0,c=e.battery_range||0,u=e.charging_state||"Disconnected",d=u!=="Disconnected"&&u!=="Complete",h=this.generateReminders(e,t,s,r),m=this.calculateOptimalSchedule(o,t),g=this.analyzeRange(o,c,t,s),v=this.generateSmartInsights(e,o,c,t,r);return{current_status:{battery_level:o,charging_state:u,range_miles:Math.round(c),plugged_in:d},recommendations:h.sort((p,y)=>this.getPriorityWeight(p.priority)-this.getPriorityWeight(y.priority)),charging_schedule:m,range_analysis:g,smart_insights:v}}generateReminders(e,t,s,r){let o=[],c=e.battery_level||0,u=e.battery_range||0,d=e.charging_state||"Disconnected",h=this.isHomeLocation(e);if(u<this.EMERGENCY_RANGE_THRESHOLD?o.push({priority:"urgent",type:"range_warning",title:"\u{1F6A8} Critical Range Alert",message:`Only ${Math.round(u)} miles remaining. Find charging immediately!`,action_required:!0,time_sensitive:!0,deadline:"ASAP"}):u<this.COMFORT_RANGE_THRESHOLD&&o.push({priority:"high",type:"range_warning",title:"\u26A0\uFE0F Low Range Warning",message:`${Math.round(u)} miles remaining. Plan charging for today.`,action_required:!0,time_sensitive:!0,deadline:"Today"}),h&&d==="Disconnected"&&c<this.OPTIMAL_CHARGE_LEVEL){let g=this.OPTIMAL_CHARGE_LEVEL-c,v=this.calculateOffPeakSavings(g);o.push({priority:c<30?"high":"medium",type:"optimal_charge",title:"\u{1F50C} Plug In Recommended",message:`Battery at ${c}%. Charge to ${this.OPTIMAL_CHARGE_LEVEL}% during off-peak hours.`,action_required:!0,estimated_savings:`$${v.toFixed(2)}/charge`,time_sensitive:!1})}if(d==="Charging"&&this.isDuringPeakHours()){let g=this.calculateOffPeakSavings(20);o.push({priority:"medium",type:"time_of_use",title:"\u{1F4B0} Peak Hour Charging Alert",message:"Currently charging during peak rates. Consider scheduling for off-peak hours.",action_required:!1,estimated_savings:`$${g.toFixed(2)}/session`,time_sensitive:!0})}if(r!==void 0&&(r<this.COLD_WEATHER_THRESHOLD&&c<90?o.push({priority:"medium",type:"weather_prep",title:"\u2744\uFE0F Cold Weather Prep",message:`Freezing weather ahead (${r}\xB0F). Charge to 90% and precondition cabin.`,action_required:!0,time_sensitive:!0,deadline:"Before tomorrow"}):r>this.HOT_WEATHER_THRESHOLD&&c<85&&o.push({priority:"medium",type:"weather_prep",title:"\u{1F525} Hot Weather Prep",message:`High temperatures forecast (${r}\xB0F). Charge to 85% and precondition.`,action_required:!0,time_sensitive:!0,deadline:"Before peak heat"})),s&&s>0){let g=s*1.3;if(u<g){let v=Math.ceil((g-u)/3);o.push({priority:"high",type:"trip_prep",title:"\u{1F6E3}\uFE0F Trip Charging Required",message:`${s}-mile trip needs ${v}% more charge. Plan charging stops if needed.`,action_required:!0,time_sensitive:!0,deadline:"Before departure"})}}let m=u-t;return m<this.COMFORT_RANGE_THRESHOLD&&h&&o.push({priority:"medium",type:"optimal_charge",title:"\u{1F305} Daily Routine Charging",message:`Tomorrow's commute (~${t} mi) will leave ${Math.round(m)} miles. Plug in tonight.`,action_required:!0,time_sensitive:!1}),c===100&&d==="Complete"&&o.push({priority:"low",type:"maintenance",title:"\u{1F50B} Battery Health Tip",message:"Avoid keeping battery at 100% unless needed for long trips. Consider setting daily limit to 80%.",action_required:!1,time_sensitive:!1}),o}calculateOptimalSchedule(e,t){let s=t*1.5,r=Math.max(0,this.OPTIMAL_CHARGE_LEVEL-e),o=Math.ceil(r*3/25),c=Math.max(this.OFF_PEAK_START,23),u=Math.min(this.OFF_PEAK_END+o,7),d=this.calculateOffPeakSavings(r);return{optimal_start_time:`${c===23?11:c}:00 PM`,optimal_end_time:`${u}:00 AM`,off_peak_window:"11:00 PM - 7:00 AM",estimated_cost_savings:Math.round(d*100)/100}}analyzeRange(e,t,s,r){let o=t>this.COMFORT_RANGE_THRESHOLD,c=t<this.EMERGENCY_RANGE_THRESHOLD,u=this.OPTIMAL_CHARGE_LEVEL;r&&r>200?u=Math.min(100,90):s>60&&(u=this.DAILY_CHARGE_LEVEL);let d=t-s,h="Not needed";return d<this.COMFORT_RANGE_THRESHOLD?h="Tonight":d<s*2?h="Tomorrow evening":h=`In ${Math.floor(d/s)} days`,{comfort_range:o,emergency_range:c,recommended_charge_level:u,next_charge_needed:h}}generateSmartInsights(e,t,s,r,o){let c=[],u=e.charging_state||"Disconnected";u==="Charging"&&(this.isDuringPeakHours()?c.push("\u{1F4B8} Charging during peak hours costs ~170% more than off-peak rates"):c.push("\u{1F49A} Great timing! Off-peak charging saves $2-5 per session")),t>95?c.push("\u{1F50B} Consider setting daily charge limit to 80% to optimize battery longevity"):t<20&&c.push("\u26A1 Low battery increases phantom drain - charge soon to maintain efficiency");let d=Math.floor(s/r);return d>=5?c.push(`\u{1F3AF} Current range covers ${d} days of typical driving - you're well prepared`):d<=1&&c.push("\u{1F4C5} Less than 2 days of range remaining - plan charging today"),o!==void 0&&(o<32?c.push("\u2744\uFE0F Cold weather reduces range ~20-30% - factor this into trip planning"):o>85?c.push("\u{1F321}\uFE0F Hot weather increases A/C usage - expect 10-15% range reduction"):c.push("\u{1F324}\uFE0F Mild weather conditions optimal for efficiency and range")),t<50&&u==="Disconnected"&&c.push("\u{1F50C} Plugging in now would complete charging during off-peak hours tonight"),c}isHomeLocation(e){return(e.speed||0)===0}isDuringPeakHours(){let e=new Date().getHours();return e>=16&&e<=21}calculateOffPeakSavings(e){let t=e/100*75,s=t*this.PEAK_RATE,r=t*this.OFF_PEAK_RATE;return s-r}getPriorityWeight(e){return{urgent:1,high:2,medium:3,low:4}[e]}};var ei=class{static{this.NOMINATIM_BASE_URL="https://nominatim.openstreetmap.org/reverse"}static{this.USER_AGENT="TessieMCP/1.1.1"}static{this.RATE_LIMIT_MS=1e3}static{this.lastRequestTime=0}static{this.cache=new Map}static async reverseGeocode(e,t){if(!e||!t||isNaN(e)||isNaN(t))return"Location unavailable";let s=`${e.toFixed(4)},${t.toFixed(4)}`;if(this.cache.has(s))return this.cache.get(s);try{await this.enforceRateLimit();let r=new URL(this.NOMINATIM_BASE_URL);r.searchParams.set("lat",e.toString()),r.searchParams.set("lon",t.toString()),r.searchParams.set("format","json"),r.searchParams.set("addressdetails","1"),r.searchParams.set("zoom","18");let o=await fetch(r.toString(),{headers:{"User-Agent":this.USER_AGENT,Accept:"application/json"},signal:AbortSignal.timeout(5e3)});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);let c=await o.json(),u=this.formatAddress(c);if(this.cache.set(s,u),this.cache.size>100){let d=this.cache.keys().next().value;this.cache.delete(d)}return u}catch(r){return console.warn(`Geocoding failed for ${e}, ${t}:`,r),`${e.toFixed(4)}, ${t.toFixed(4)}`}}static formatAddress(e){if(!e||!e.address)return e?.display_name?.split(",").slice(0,3).join(", ")||"Unknown location";let t=e.address,s=[];return t.house_number&&t.road?s.push(`${t.house_number} ${t.road}`):t.road?s.push(t.road):t.amenity&&s.push(t.amenity),t.city||t.town||t.village?s.push(t.city||t.town||t.village):t.county&&s.push(t.county),(t.state||t.province)&&s.push(t.state||t.province),t.country_code&&s.push(t.country_code.toUpperCase()),s.length===0?e.display_name?.split(",").slice(0,4).join(", ")||"Unknown location":s.join(", ")}static async enforceRateLimit(){let t=Date.now()-this.lastRequestTime;if(t<this.RATE_LIMIT_MS){let s=this.RATE_LIMIT_MS-t;await new Promise(r=>setTimeout(r,s))}this.lastRequestTime=Date.now()}static getDistance(e,t,s,r){let c=this.toRadians(s-e),u=this.toRadians(r-t),d=Math.sin(c/2)*Math.sin(c/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(s))*Math.sin(u/2)*Math.sin(u/2);return 3959*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}static toRadians(e){return e*(Math.PI/180)}};var px=Pe.z.object({apiKey:Pe.z.string().describe("Your API key"),modelName:Pe.z.string().default("gpt-4").describe("Model to use"),temperature:Pe.z.number().min(0).max(1).default(.7).describe("Temperature setting")});function um({config:a}){let e=new Bs({name:"tessie-mcp-server",title:"Tessie Vehicle Data",version:"1.1.1"});console.log(`Using model: ${a.modelName}`);let t=a.apiKey,s=new Vs(t),r=new Ws,o=new Gs,c=new Xa,u=new Ks,d=new Ys,h=new Qs,m=new Js;return e.tool("get_vehicle_current_state","Get the current state of a vehicle including location, battery level, odometer reading",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),use_cache:Pe.z.boolean().optional().default(!0).describe("Whether to use cached data to avoid waking the vehicle")},async({vin:g,use_cache:v=!0})=>{try{let p=await s.getVehicleState(g,v),y="Location unavailable";if(p.drive_state?.latitude&&p.drive_state?.longitude)try{y=await ei.reverseGeocode(p.drive_state.latitude,p.drive_state.longitude)}catch(x){console.warn("Geocoding failed:",x),y=`${p.drive_state.latitude.toFixed(4)}, ${p.drive_state.longitude.toFixed(4)}`}return{vehicle:p.display_name||p.vehicle_state?.vehicle_name||`Vehicle ${p.vin?.slice(-6)}`,vin:p.vin,current_location:{address:y,latitude:p.drive_state?.latitude,longitude:p.drive_state?.longitude},battery:{level:p.charge_state?.battery_level,range:p.charge_state?.est_battery_range,charging_state:p.charge_state?.charging_state,time_to_full_charge:p.charge_state?.time_to_full_charge},vehicle_state:{locked:p.vehicle_state?.locked,sentry_mode:p.vehicle_state?.sentry_mode,odometer:p.vehicle_state?.odometer},climate:{inside_temp:p.climate_state?.inside_temp,outside_temp:p.climate_state?.outside_temp,climate_on:p.climate_state?.is_climate_on},last_updated:p.timestamp||new Date().toISOString()}}catch(p){let y=Dt.classifyError(p);if(Dt.shouldDegrade(y))return Dt.generateFallbackResponse(y,"Vehicle state");throw new Error(Dt.formatErrorForUser(y))}}),e.tool("get_driving_history","Get driving history for a vehicle within a date range",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),start_date:Pe.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ssZ)"),end_date:Pe.z.string().optional().describe("End date in ISO format (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ssZ)"),limit:Pe.z.number().optional().default(50).describe("Maximum number of drives to return")},async({vin:g,start_date:v,end_date:p,limit:y=50})=>{try{let x=await s.getDrives(g,v,p,y);return{vehicle_vin:g,total_drives:x.length,date_range:{start:v||"Not specified",end:p||"Not specified"},drives:x.map(b=>({id:b.id,start_time:new Date(b.started_at*1e3).toISOString(),end_time:new Date(b.ended_at*1e3).toISOString(),starting_location:b.starting_location,ending_location:b.ending_location,distance_miles:b.odometer_distance,duration_minutes:Math.round((b.ended_at-b.started_at)/60*100)/100,starting_battery:b.starting_battery,ending_battery:b.ending_battery,battery_used:b.starting_battery-b.ending_battery,average_speed:b.average_speed,max_speed:b.max_speed,autopilot_distance:0}))}}catch(x){throw new Error(`Failed to get driving history: ${x}`)}}),e.tool("get_weekly_mileage","Calculate total miles driven in a specific week or time period",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),start_date:Pe.z.string().describe("Start date of the period (ISO format)"),end_date:Pe.z.string().describe("End date of the period (ISO format)")},async({vin:g,start_date:v,end_date:p})=>{try{let y=await s.getDrives(g,v,p,500),x=y.reduce((I,j)=>I+j.odometer_distance,0),b=0,R={};y.forEach(I=>{let j=new Date(I.started_at*1e3).toISOString().split("T")[0];R[j]||(R[j]={miles:0,drives:0,autopilot_miles:0});let M={id:`temp_${I.id}`,originalDriveIds:[I.id],started_at:I.started_at,ended_at:I.ended_at,starting_location:I.starting_location,ending_location:I.ending_location,starting_battery:I.starting_battery,ending_battery:I.ending_battery,total_distance:I.odometer_distance,total_duration_minutes:(I.ended_at-I.started_at)/60,driving_duration_minutes:(I.ended_at-I.started_at)/60,stops:[],autopilot_distance:0,autopilot_percentage:0,energy_consumed:I.starting_battery-I.ending_battery,average_speed:I.average_speed||0,max_speed:I.max_speed||0},$=o.predictAutopilotUsage(M);R[j].miles+=I.odometer_distance,R[j].drives+=1,R[j].autopilot_miles+=$,b+=$});let z=Object.entries(R).map(([I,j])=>({date:I,miles:Math.round(j.miles*100)/100,drives:j.drives,autopilot_miles:Math.round(j.autopilot_miles*100)/100,fsd_percentage:j.miles>0?Math.round(j.autopilot_miles/j.miles*1e4)/100:0}));return{vehicle_vin:g,period:{start_date:v,end_date:p},summary:{total_miles:Math.round(x*100)/100,total_drives:y.length,total_autopilot_miles:Math.round(b*100)/100,fsd_percentage:x>0?Math.round(b/x*1e4)/100:0},daily_breakdown:z.sort((I,j)=>I.date.localeCompare(j.date))}}catch(y){throw new Error(`Failed to get weekly mileage: ${y}`)}}),e.tool("analyze_latest_drive","Analyze the most recent drive with comprehensive metrics including duration, battery consumption, FSD usage, and drive merging for stops <7 minutes",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),days_back:Pe.z.number().optional().default(7).describe("Number of days to look back for recent drives")},async({vin:g,days_back:v=7})=>{try{let p=new Date,y=new Date;y.setDate(y.getDate()-v);let x=await s.getDrives(g,y.toISOString(),p.toISOString(),100);if(x.length===0)return{error:"No drives found in the specified time period",period:`${y.toISOString().split("T")[0]} to ${p.toISOString().split("T")[0]}`,suggestion:"Try increasing days_back or check if the vehicle has been driven recently"};let b=o.analyzeLatestDrive(x);return b?{analysis_summary:b.summary,detailed_analysis:{drive_details:{id:b.mergedDrive.id,original_drives:b.mergedDrive.originalDriveIds.length,start_time:new Date(b.mergedDrive.started_at*1e3).toISOString(),end_time:new Date(b.mergedDrive.ended_at*1e3).toISOString(),route:`${b.mergedDrive.starting_location} \u2192 ${b.mergedDrive.ending_location}`,distance_miles:b.mergedDrive.total_distance,total_duration_minutes:b.mergedDrive.total_duration_minutes,driving_duration_minutes:b.mergedDrive.driving_duration_minutes,average_speed_mph:b.mergedDrive.average_speed,max_speed_mph:b.mergedDrive.max_speed},stops:b.mergedDrive.stops.map(R=>({location:R.location,duration_minutes:R.duration_minutes,type:R.stop_type,time:`${new Date(R.started_at*1e3).toLocaleTimeString()} - ${new Date(R.ended_at*1e3).toLocaleTimeString()}`})),battery_analysis:{starting_level:`${b.mergedDrive.starting_battery}%`,ending_level:`${b.mergedDrive.ending_battery}%`,percentage_consumed:`${b.batteryConsumption.percentage_used}%`,estimated_kwh_used:b.batteryConsumption.estimated_kwh_used,efficiency_miles_per_kwh:b.batteryConsumption.efficiency_miles_per_kwh},fsd_analysis:{autopilot_miles:b.fsdAnalysis.total_autopilot_miles,fsd_percentage:`${b.fsdAnalysis.fsd_percentage}%`,data_available:b.fsdAnalysis.autopilot_available,note:b.fsdAnalysis.note}},metadata:{analysis_time:new Date().toISOString(),drives_analyzed:x.length,period_searched:`${y.toISOString().split("T")[0]} to ${p.toISOString().split("T")[0]}`}}:{error:"Could not analyze drives",drives_found:x.length,suggestion:"Drives may be incomplete or missing required data"}}catch(p){throw new Error(`Failed to analyze latest drive: ${p}`)}}),e.tool("analyze_charging_costs","Analyze charging sessions and costs from driving history, with recommendations to save money",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),start_date:Pe.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD)"),end_date:Pe.z.string().optional().describe("End date in ISO format (YYYY-MM-DD)"),home_rate:Pe.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),peak_rate:Pe.z.number().optional().describe("Peak hour electricity rate per kWh (default: $0.32)"),off_peak_rate:Pe.z.number().optional().describe("Off-peak electricity rate per kWh (default: $0.09)")},async({vin:g,start_date:v,end_date:p,home_rate:y,peak_rate:x,off_peak_rate:b})=>{try{let R=await s.getDrives(g,v,p,500);if(R.length===0)return{error:"No drives found in the specified period",suggestion:"Try a longer date range or check if the vehicle has been driven recently"};let z=y||x||b?{home_rate_per_kwh:y||.13,time_of_use:{off_peak:{hours:"23:00-07:00",rate:b||.09},peak:{hours:"16:00-21:00",rate:x||.32}}}:void 0,I=z?new Xa(z):c;I.learnLocations(R);let j=I.detectChargingSessions(R),M=I.analyzeChargingCosts(j);return{period:{start:v||"Not specified",end:p||"Not specified",days_analyzed:Math.ceil((R[R.length-1].started_at-R[0].started_at)/(3600*24))},summary:{total_sessions:M.total_sessions,total_cost:`$${M.total_cost.toFixed(2)}`,total_energy:`${M.total_kwh.toFixed(1)} kWh`,total_miles_added:`${M.total_miles_added.toFixed(0)} miles`,avg_cost_per_session:`$${M.average_cost_per_session.toFixed(2)}`,avg_cost_per_kwh:`$${M.average_cost_per_kwh.toFixed(3)}/kWh`,cost_per_mile:`$${M.average_cost_per_mile.toFixed(3)}/mile`},breakdown_by_location:{home:{sessions:M.sessions_by_location.home.sessions,cost:`$${M.sessions_by_location.home.cost.toFixed(2)}`,energy:`${M.sessions_by_location.home.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.home.cost/M.total_cost*100).toFixed(1)}%`:"0%"},supercharger:{sessions:M.sessions_by_location.supercharger.sessions,cost:`$${M.sessions_by_location.supercharger.cost.toFixed(2)}`,energy:`${M.sessions_by_location.supercharger.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.supercharger.cost/M.total_cost*100).toFixed(1)}%`:"0%"},public:{sessions:M.sessions_by_location.public.sessions,cost:`$${M.sessions_by_location.public.cost.toFixed(2)}`,energy:`${M.sessions_by_location.public.kwh.toFixed(1)} kWh`,percentage:M.total_cost>0?`${(M.sessions_by_location.public.cost/M.total_cost*100).toFixed(1)}%`:"0%"},work:{sessions:M.sessions_by_location.work.sessions,cost:`$${M.sessions_by_location.work.cost.toFixed(2)}`,energy:`${M.sessions_by_location.work.kwh.toFixed(1)} kWh`,note:M.sessions_by_location.work.sessions>0?"Free workplace charging!":"No workplace charging detected"}},money_saving_tips:M.recommendations,potential_monthly_savings:`$${M.potential_savings.toFixed(2)}`,detailed_sessions:j.slice(0,10).map($=>({date:new Date($.started_at*1e3).toLocaleDateString(),time:new Date($.started_at*1e3).toLocaleTimeString(),location:$.location,type:$.location_type,battery_added:`${$.ending_battery-$.starting_battery}%`,energy:`${$.energy_added_kwh.toFixed(1)} kWh`,cost:`$${$.cost_estimate.toFixed(2)}`,duration:`${Math.round($.duration_minutes)} min`,rate:$.charge_rate_kw?`${$.charge_rate_kw} kW`:"Unknown"}))}}catch(R){throw new Error(`Failed to analyze charging costs: ${R}`)}}),e.tool("calculate_trip_cost","Calculate the cost and environmental impact of completed trips with gas comparison and optimization tips",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),start_date:Pe.z.string().optional().describe("Start date in ISO format (YYYY-MM-DD)"),end_date:Pe.z.string().optional().describe("End date in ISO format (YYYY-MM-DD)"),home_rate:Pe.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),gas_price:Pe.z.number().optional().describe("Current gas price per gallon (default: $4.50)")},async({vin:g,start_date:v,end_date:p,home_rate:y,gas_price:x})=>{try{let b=await s.getDrives(g,v,p,100);if(b.length===0)return{error:"No drives found in the specified period",suggestion:"Try a longer date range or check if the vehicle has been driven recently"};let R=u.calculateTripCost(b,y||.13,.28,x||4.5),z=R.comparison.vs_gas_vehicle.gas_cost_estimate,I=R.cost_breakdown.total_cost,j=z-I,M=z>0?j/z*100:0,$=R.comparison.vs_optimal_charging.optimal_cost,H=I-$;return{trip_overview:{distance:`${R.trip_summary.distance_miles} miles`,duration:`${R.trip_summary.duration_hours} hours`,efficiency:`${R.trip_summary.efficiency_miles_per_kwh} mi/kWh`,battery_used:`${R.trip_summary.battery_used_percent}%`,energy_consumed:`${R.trip_summary.energy_used_kwh} kWh`},cost_analysis:{total_cost:`$${R.cost_breakdown.total_cost.toFixed(2)}`,cost_per_mile:`$${R.cost_breakdown.cost_per_mile.toFixed(3)}/mile`,home_charging:`$${R.cost_breakdown.electricity_cost.toFixed(2)}`,supercharger_stops:`$${R.cost_breakdown.charging_stops_cost.toFixed(2)}`},savings_vs_gas:{gas_vehicle_cost:`$${z.toFixed(2)}`,your_ev_cost:`$${I.toFixed(2)}`,money_saved:`$${j.toFixed(2)}`,savings_percentage:`${M.toFixed(1)}%`,note:j>0?"\u{1F389} You saved money vs gas!":"\u26A0\uFE0F Gas would have been cheaper"},optimization_opportunities:{current_cost:`$${I.toFixed(2)}`,optimal_cost:`$${$.toFixed(2)}`,potential_savings:`$${H.toFixed(2)}`,efficiency_tips:R.charging_strategy},environmental_impact:{co2_emissions_avoided:`${R.environmental_impact.co2_saved_lbs} lbs`,trees_planted_equivalent:`${R.environmental_impact.trees_equivalent} trees`,impact_note:R.environmental_impact.co2_saved_lbs>0?"\u{1F331} Your trip was carbon-friendly!":"\u26A0\uFE0F Grid emissions offset EV benefits"}}}catch(b){throw new Error(`Failed to calculate trip cost: ${b}`)}}),e.tool("estimate_future_trip","Estimate cost and charging strategy for a planned trip based on distance and current battery level",{distance_miles:Pe.z.number().describe("Trip distance in miles"),current_battery_percent:Pe.z.number().min(0).max(100).describe("Current battery percentage"),home_rate:Pe.z.number().optional().describe("Your home electricity rate per kWh (default: $0.13)"),supercharger_rate:Pe.z.number().optional().describe("Supercharger rate per kWh (default: $0.28)")},async({distance_miles:g,current_battery_percent:v,home_rate:p,supercharger_rate:y})=>{try{let x=u.estimateFutureTripCost(g,v,p||.13,y||.28);return{trip_feasibility:{distance:`${g} miles`,current_charge:`${v}%`,charging_required:x.charging_needed?"Yes":"No",estimated_cost:`$${x.estimated_cost.toFixed(2)}`},charging_strategy:{recommended_departure_charge:`${x.recommended_charge_level}%`,supercharger_stops_needed:x.charging_stops_needed,strategy_details:x.strategy},cost_breakdown:{total_estimated_cost:`$${x.estimated_cost.toFixed(2)}`,cost_per_mile:`$${(x.estimated_cost/g).toFixed(3)}/mile`},preparation_tips:x.charging_needed?[`\u{1F50C} Pre-charge to ${x.recommended_charge_level}% before departure`,"\u{1F5FA}\uFE0F Plan Supercharger stops using Tesla navigation","\u{1F4F1} Check Supercharger availability along your route","\u23F0 Allow extra time for charging stops",x.charging_stops_needed>0?`\u{1F6D1} Plan for ${x.charging_stops_needed} charging stop${x.charging_stops_needed>1?"s":""}`:""].filter(Boolean):["\u2705 No additional charging needed for this trip!","\u{1F3AF} Your current charge is sufficient","\u{1F4CA} Monitor efficiency during the trip"]}}catch(x){throw new Error(`Failed to estimate future trip: ${x}`)}}),e.tool("analyze_commute_patterns","Detect regular commute routes and analyze efficiency trends, time patterns, and costs",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),days_back:Pe.z.number().optional().default(30).describe("Number of days to analyze (default: 30)")},async({vin:g,days_back:v=30})=>{try{let p=new Date,y=new Date;y.setDate(y.getDate()-v);let x=await s.getDrives(g,y.toISOString(),p.toISOString(),500);if(x.length<10)return{error:"Not enough driving data to detect commute patterns",drives_found:x.length,suggestion:"Try increasing days_back parameter or drive more regularly to establish patterns"};let b=d.analyzeCommutes(x);return{analysis_period:{days_analyzed:v,drives_analyzed:x.length,start_date:y.toISOString().split("T")[0],end_date:p.toISOString().split("T")[0]},commute_overview:{routes_detected:b.routes_detected,total_weekly_commute_miles:b.total_commute_miles,estimated_weekly_cost:`$${b.total_commute_cost.toFixed(2)}`,avg_commute_efficiency:`${b.avg_commute_efficiency} kWh/100mi`},regular_routes:b.routes.map(R=>({route_name:R.name,frequency:`${R.frequency.toFixed(1)} times/week`,typical_distance:`${R.typical_distance} miles`,avg_duration:`${Math.round(R.avg_duration_minutes)} minutes`,efficiency:`${R.avg_efficiency_kwh_per_100mi.toFixed(1)} kWh/100mi`,trend:R.recent_trend,trend_emoji:R.recent_trend==="improving"?"\u{1F4C8}":R.recent_trend==="declining"?"\u{1F4C9}":"\u27A1\uFE0F",commute_times:{morning_rush:R.time_patterns.morning_commute.count>0?`${R.time_patterns.morning_commute.count} drives, avg ${R.time_patterns.morning_commute.avg_time}`:"No morning commutes detected",evening_rush:R.time_patterns.evening_commute.count>0?`${R.time_patterns.evening_commute.count} drives, avg ${R.time_patterns.evening_commute.avg_time}`:"No evening commutes detected",weekend:R.time_patterns.weekend.count>0?`${R.time_patterns.weekend.count} drives, avg ${R.time_patterns.weekend.avg_time}`:"No weekend drives"},efficiency_range:{best:`${R.best_efficiency.toFixed(1)} kWh/100mi`,worst:`${R.worst_efficiency.toFixed(1)} kWh/100mi`,variation:`${((R.worst_efficiency-R.best_efficiency)/R.best_efficiency*100).toFixed(1)}%`}})),weekly_patterns:{total_drives:b.weekly_summary.total_drives,total_miles:`${b.weekly_summary.total_miles} miles`,estimated_cost:`$${b.weekly_summary.total_cost.toFixed(2)}`,avg_efficiency:`${b.weekly_summary.avg_efficiency} kWh/100mi`,most_efficient_day:b.weekly_summary.best_day,least_efficient_day:b.weekly_summary.worst_day},optimization_tips:b.recommendations,cost_insights:b.routes.length>0?[`\u{1F4B0} Your regular commutes cost approximately $${b.total_commute_cost.toFixed(2)}/week`,`\u26A1 At current efficiency, you use ~${(b.total_commute_miles*b.avg_commute_efficiency/100).toFixed(1)} kWh/week for commuting`,b.avg_commute_efficiency>25?"\u{1F6A8} High commute energy usage - consider eco-driving techniques":"\u2705 Good commute efficiency - you're driving efficiently!"]:["No regular commute patterns detected"]}}catch(p){throw new Error(`Failed to analyze commute patterns: ${p}`)}}),e.tool("analyze_efficiency_trends","Analyze driving efficiency trends over time with weather, speed, and time pattern insights",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),days_back:Pe.z.number().optional().default(45).describe("Number of days to analyze (default: 45, minimum: 14)")},async({vin:g,days_back:v=45})=>{try{if(v<14)return{error:"Minimum 14 days required for meaningful trend analysis",suggestion:"Try days_back >= 14 for better insights"};let p=new Date,y=new Date;y.setDate(y.getDate()-v);let x=await s.getDrives(g,y.toISOString(),p.toISOString(),200);if(x.length<5)return{error:"Insufficient driving data for trend analysis",drives_found:x.length,suggestion:"Need at least 5 drives for efficiency analysis"};let b=h.analyzeEfficiencyTrends(x);return{analysis_period:{days_analyzed:v,drives_analyzed:x.length,start_date:y.toISOString().split("T")[0],end_date:p.toISOString().split("T")[0]},current_efficiency:{average:`${b.current_period.avg_efficiency} kWh/100mi`,total_miles:`${b.current_period.total_miles} miles`,total_drives:b.current_period.total_drives,efficiency_range:{best:`${b.current_period.efficiency_range.best} kWh/100mi`,worst:`${b.current_period.efficiency_range.worst} kWh/100mi`,spread:`${(b.current_period.efficiency_range.worst-b.current_period.efficiency_range.best).toFixed(1)} kWh/100mi variation`}},trends:{weekly:{direction:b.trends.weekly.trend_direction,change:`${b.trends.weekly.trend_percentage.toFixed(1)}%`,confidence:b.trends.weekly.confidence,emoji:b.trends.weekly.trend_direction==="improving"?"\u{1F4C8}":b.trends.weekly.trend_direction==="declining"?"\u{1F4C9}":"\u27A1\uFE0F",summary:b.trends.weekly.trend_direction==="stable"?`Stable efficiency at ${b.trends.weekly.avg_efficiency} kWh/100mi`:`${b.trends.weekly.trend_direction==="improving"?"Improving":"Declining"} by ${b.trends.weekly.trend_percentage.toFixed(1)}% - current avg: ${b.trends.weekly.avg_efficiency} kWh/100mi`},monthly:{direction:b.trends.monthly.trend_direction,change:`${b.trends.monthly.trend_percentage.toFixed(1)}%`,confidence:b.trends.monthly.confidence,summary:b.trends.monthly.confidence!=="low"?`Monthly trend: ${b.trends.monthly.trend_direction} (${b.trends.monthly.trend_percentage.toFixed(1)}%)`:"Insufficient data for monthly trend"},seasonal:{direction:b.trends.seasonal.trend_direction,change:`${b.trends.seasonal.trend_percentage.toFixed(1)}%`,confidence:b.trends.seasonal.confidence,summary:b.trends.seasonal.confidence!=="low"?`Seasonal trend: ${b.trends.seasonal.trend_direction} (${b.trends.seasonal.trend_percentage.toFixed(1)}%)`:"Need more data for seasonal analysis"}},efficiency_factors:{weather_impact:{hot_weather_penalty:`+${b.factors_analysis.weather_impact.hot_weather_penalty.toFixed(1)}%`,cold_weather_penalty:`+${b.factors_analysis.weather_impact.cold_weather_penalty.toFixed(1)}%`,optimal_temp_range:b.factors_analysis.weather_impact.optimal_temp_range,insight:b.factors_analysis.weather_impact.cold_weather_penalty>15?"\u2744\uFE0F Cold weather significantly impacting efficiency":b.factors_analysis.weather_impact.hot_weather_penalty>10?"\u{1F525} Hot weather and A/C affecting efficiency":"\u{1F321}\uFE0F Weather impact is minimal"},speed_impact:{highway_efficiency:`${b.factors_analysis.speed_impact.highway_efficiency} kWh/100mi`,city_efficiency:`${b.factors_analysis.speed_impact.city_efficiency} kWh/100mi`,optimal_speed_range:b.factors_analysis.speed_impact.optimal_speed_range,preference:b.factors_analysis.speed_impact.highway_efficiency<b.factors_analysis.speed_impact.city_efficiency?"\u{1F6E3}\uFE0F Highway driving is more efficient":"\u{1F3D9}\uFE0F City driving is more efficient"},time_patterns:{best_day:b.factors_analysis.time_patterns.best_day_of_week,worst_day:b.factors_analysis.time_patterns.worst_day_of_week,best_time:b.factors_analysis.time_patterns.best_time_of_day,scheduling_tip:b.factors_analysis.time_patterns.best_day_of_week!=="Unknown"?`\u{1F4C5} Schedule trips on ${b.factors_analysis.time_patterns.best_day_of_week}s for best efficiency`:"\u{1F4C5} No clear daily efficiency patterns detected"}},actionable_insights:b.insights,optimization_recommendations:b.recommendations,efficiency_score:{current:b.current_period.avg_efficiency<25?"Excellent":b.current_period.avg_efficiency<30?"Good":b.current_period.avg_efficiency<35?"Average":"Needs Improvement",benchmark:"Model 3/Y typical: 25-30 kWh/100mi",comparison:b.current_period.avg_efficiency<25?"\u{1F3C6} You're driving very efficiently!":b.current_period.avg_efficiency<30?"\u2705 Good efficiency - room for minor improvements":b.current_period.avg_efficiency<35?"\u26A0\uFE0F Average efficiency - focus on eco-driving techniques":"\u{1F6A8} High consumption - review driving habits and vehicle maintenance"}}}catch(p){throw new Error(`Failed to analyze efficiency trends: ${p}`)}}),e.tool("get_smart_charging_reminders","Get intelligent charging reminders and optimization strategy based on current vehicle state, usage patterns, and conditions",{vin:Pe.z.string().describe("Vehicle identification number (VIN)"),daily_miles:Pe.z.number().optional().default(40).describe("Average daily driving miles (default: 40)"),next_trip_distance:Pe.z.number().optional().describe("Distance of upcoming trip in miles"),weather_temp:Pe.z.number().optional().describe("Current or forecast temperature in Fahrenheit")},async({vin:g,daily_miles:v=40,next_trip_distance:p,weather_temp:y})=>{try{let x=await s.getVehicleState(g);if(!x.battery_level)return{error:"Unable to get battery information",suggestion:"Make sure vehicle is awake and connected to Tessie"};let b=m.generateChargingStrategy(x,v,p,y);return{vehicle_info:{vin:g,timestamp:new Date().toISOString(),location:x.latitude&&x.longitude?await ei.reverseGeocode(x.latitude,x.longitude):"Location unavailable"},charging_status:{battery_level:`${b.current_status.battery_level}%`,estimated_range:`${b.current_status.range_miles} miles`,charging_state:b.current_status.charging_state,plugged_in:b.current_status.plugged_in,status_emoji:b.current_status.plugged_in?"\u{1F50C}":b.current_status.battery_level<20?"\u{1F50B}":b.current_status.battery_level>80?"\u2705":"\u26A1"},urgent_reminders:b.recommendations.filter(R=>R.priority==="urgent"||R.priority==="high").map(R=>({priority:R.priority.toUpperCase(),title:R.title,message:R.message,action_required:R.action_required,deadline:R.deadline||"None",savings:R.estimated_savings||"N/A",emoji:R.priority==="urgent"?"\u{1F6A8}":"\u26A0\uFE0F"})),optimization_suggestions:b.recommendations.filter(R=>R.priority==="medium"||R.priority==="low").map(R=>({category:R.type.replace("_"," ").toUpperCase(),title:R.title,message:R.message,potential_savings:R.estimated_savings||"N/A",time_sensitive:R.time_sensitive||!1})),charging_schedule:{optimal_timing:{start:b.charging_schedule.optimal_start_time,end:b.charging_schedule.optimal_end_time,off_peak_window:b.charging_schedule.off_peak_window,estimated_savings:`$${b.charging_schedule.estimated_cost_savings.toFixed(2)}`},current_recommendation:b.current_status.plugged_in?"Currently charging - monitor for completion":b.current_status.battery_level<50?"\u{1F50C} Plug in tonight for off-peak charging":b.current_status.battery_level>80?"\u2705 Well charged - no immediate action needed":"\u26A1 Consider charging if planning long trips"},range_analysis:{comfort_level:b.range_analysis.comfort_range?"Comfortable":"Low",emergency_status:b.range_analysis.emergency_range?"CRITICAL":"Safe",recommended_charge_target:`${b.range_analysis.recommended_charge_level}%`,next_charge_timing:b.range_analysis.next_charge_needed,range_emoji:b.range_analysis.emergency_range?"\u{1F6A8}":b.range_analysis.comfort_range?"\u2705":"\u26A0\uFE0F"},smart_insights:b.smart_insights.map(R=>({insight:R,category:R.includes("\u{1F4B8}")?"Cost Optimization":R.includes("\u{1F50B}")?"Battery Health":R.includes("\u2744\uFE0F")||R.includes("\u{1F321}\uFE0F")?"Weather Impact":R.includes("\u{1F4C5}")?"Planning":"General"})),weather_considerations:y?{current_temp:`${y}\xB0F`,impact:y<32?"\u2744\uFE0F Cold weather reduces range 20-30%":y>85?"\u{1F525} Hot weather increases A/C usage 10-15%":"\u{1F324}\uFE0F Mild weather - optimal efficiency conditions",recommendation:y<32?"Charge to 90% and precondition cabin":y>85?"Precondition cabin and consider shade parking":"Standard charging routine is fine"}:{current_temp:"Not provided",impact:"\u{1F321}\uFE0F Weather data not available",recommendation:"Provide weather_temp parameter for weather-specific advice"},cost_optimization:{peak_vs_offpeak:"Off-peak charging saves ~60-70% on electricity costs",daily_cost_estimate:v?`~$${(v*.04).toFixed(2)}/day at off-peak rates`:"Varies by usage",monthly_savings_potential:`$${(b.charging_schedule.estimated_cost_savings*15).toFixed(2)}/month with optimal timing`,tip:"\u{1F4A1} Use Tesla app to schedule charging for 11 PM - 7 AM"}}}catch(x){throw new Error(`Failed to get charging reminders: ${x}`)}}),e.tool("get_vehicles","List all vehicles in the Tessie account",{},async()=>{try{let g=await s.getVehicles();return{total_vehicles:g.length,vehicles:g.map(v=>({vin:v.vin,display_name:v.display_name}))}}catch(g){let v=Dt.classifyError(g);if(Dt.shouldDegrade(v))return{status:"degraded",error_type:v.type,message:v.userFriendly,suggestion:v.suggestion,vehicles:[],fallback_note:"Vehicle list temporarily unavailable. Try again in a few moments."};throw new Error(Dt.formatErrorForUser(v))}}),e.tool("natural_language_query",'Process natural language queries about your vehicle data (e.g., "How many miles did I drive last week?")',{query:Pe.z.string().describe("Natural language query about vehicle data"),vin:Pe.z.string().optional().describe("Vehicle identification number (VIN) - optional if only one vehicle")},async({query:g,vin:v})=>{try{let p=r.parseNaturalLanguage(g);if(p.confidence<.5)return{error:"Could not understand the query",confidence:p.confidence,suggestions:["Try queries like: 'How many miles did I drive last week?'","Or: 'What's my current battery level?'","Or: 'Analyze my latest drive'"]};let y=v;if(!y){let x=await s.getVehicles();if(x.length===0)throw new Error("No vehicles found in account");y=x[0].vin}switch(p.operation){case"get_vehicle_current_state":let x=await s.getVehicleState(y,!0);return{query_understood:g,confidence:p.confidence,result:{vehicle:x.display_name,battery_level:x.battery_level,location:{latitude:x.latitude,longitude:x.longitude},locked:x.locked,odometer:x.odometer}};case"get_weekly_mileage":case"get_driving_history":let b=await s.getDrives(y,p.parameters.start_date,p.parameters.end_date,50),R=b.reduce(($,H)=>$+H.odometer_distance,0);return{query_understood:g,confidence:p.confidence,result:{total_miles:Math.round(R*100)/100,total_drives:b.length,period:{start:p.parameters.start_date,end:p.parameters.end_date}}};case"analyze_latest_drive":let z=new Date,I=new Date;I.setDate(I.getDate()-(p.parameters.days_back||7));let j=await s.getDrives(y,I.toISOString(),z.toISOString(),100),M=o.analyzeLatestDrive(j);return{query_understood:g,confidence:p.confidence,result:M?{summary:M.summary,drive_distance:M.mergedDrive.total_distance,battery_used:M.batteryConsumption.percentage_used,fsd_miles:M.fsdAnalysis.total_autopilot_miles}:{error:"No recent drives found"}};default:return{query_understood:g,confidence:p.confidence,error:"Query understood but operation not yet implemented",parsed_operation:p.operation}}}catch(p){throw new Error(`Failed to process natural language query: ${p}`)}}),e.server}var xc=$l(require("node:process"),1);var Xs=class{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),mx(t)}clear(){this._buffer=void 0}};function mx(a){return mf.parse(JSON.parse(a))}function dm(a){return JSON.stringify(a)+`
`}var eo=class{constructor(e=xc.default.stdin,t=xc.default.stdout){this._stdin=e,this._stdout=t,this._readBuffer=new Xs,this._started=!1,this._ondata=s=>{this._readBuffer.append(s),this.processReadBuffer()},this._onerror=s=>{var r;(r=this.onerror)===null||r===void 0||r.call(this,s)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,t;;)try{let s=this._readBuffer.readMessage();if(s===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,s)}catch(s){(t=this.onerror)===null||t===void 0||t.call(this,s)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(t=>{let s=dm(e);this._stdout.write(s)?t():this._stdout.once("drain",t)})}};var gx=Object.create,bm=Object.defineProperty,vx=Object.getOwnPropertyDescriptor,wm=Object.getOwnPropertyNames,_x=Object.getPrototypeOf,yx=Object.prototype.hasOwnProperty,fm=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')}),Lr=(a,e)=>function(){return e||(0,a[wm(a)[0]])((e={exports:{}}).exports,e),e.exports},bx=(a,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of wm(e))!yx.call(a,r)&&r!==t&&bm(a,r,{get:()=>e[r],enumerable:!(s=vx(e,r))||s.enumerable});return a},Em=(a,e,t)=>(t=a!=null?gx(_x(a)):{},bx(e||!a||!a.__esModule?bm(t,"default",{value:a,enumerable:!0}):t,a)),wx=Lr({"node_modules/color-name/index.js"(a,e){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}}),xm=Lr({"node_modules/color-convert/conversions.js"(a,e){var t=wx(),s={};for(let c of Object.keys(t))s[t[c]]=c;var r={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=r;for(let c of Object.keys(r)){if(!("channels"in r[c]))throw new Error("missing channels property: "+c);if(!("labels"in r[c]))throw new Error("missing channel labels property: "+c);if(r[c].labels.length!==r[c].channels)throw new Error("channel and label counts mismatch: "+c);let{channels:u,labels:d}=r[c];delete r[c].channels,delete r[c].labels,Object.defineProperty(r[c],"channels",{value:u}),Object.defineProperty(r[c],"labels",{value:d})}r.rgb.hsl=function(c){let u=c[0]/255,d=c[1]/255,h=c[2]/255,m=Math.min(u,d,h),g=Math.max(u,d,h),v=g-m,p,y;g===m?p=0:u===g?p=(d-h)/v:d===g?p=2+(h-u)/v:h===g&&(p=4+(u-d)/v),p=Math.min(p*60,360),p<0&&(p+=360);let x=(m+g)/2;return g===m?y=0:x<=.5?y=v/(g+m):y=v/(2-g-m),[p,y*100,x*100]},r.rgb.hsv=function(c){let u,d,h,m,g,v=c[0]/255,p=c[1]/255,y=c[2]/255,x=Math.max(v,p,y),b=x-Math.min(v,p,y),R=function(z){return(x-z)/6/b+1/2};return b===0?(m=0,g=0):(g=b/x,u=R(v),d=R(p),h=R(y),v===x?m=h-d:p===x?m=1/3+u-h:y===x&&(m=2/3+d-u),m<0?m+=1:m>1&&(m-=1)),[m*360,g*100,x*100]},r.rgb.hwb=function(c){let u=c[0],d=c[1],h=c[2],m=r.rgb.hsl(c)[0],g=1/255*Math.min(u,Math.min(d,h));return h=1-1/255*Math.max(u,Math.max(d,h)),[m,g*100,h*100]},r.rgb.cmyk=function(c){let u=c[0]/255,d=c[1]/255,h=c[2]/255,m=Math.min(1-u,1-d,1-h),g=(1-u-m)/(1-m)||0,v=(1-d-m)/(1-m)||0,p=(1-h-m)/(1-m)||0;return[g*100,v*100,p*100,m*100]};function o(c,u){return(c[0]-u[0])**2+(c[1]-u[1])**2+(c[2]-u[2])**2}r.rgb.keyword=function(c){let u=s[c];if(u)return u;let d=1/0,h;for(let m of Object.keys(t)){let g=t[m],v=o(c,g);v<d&&(d=v,h=m)}return h},r.keyword.rgb=function(c){return t[c]},r.rgb.xyz=function(c){let u=c[0]/255,d=c[1]/255,h=c[2]/255;u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,d=d>.04045?((d+.055)/1.055)**2.4:d/12.92,h=h>.04045?((h+.055)/1.055)**2.4:h/12.92;let m=u*.4124+d*.3576+h*.1805,g=u*.2126+d*.7152+h*.0722,v=u*.0193+d*.1192+h*.9505;return[m*100,g*100,v*100]},r.rgb.lab=function(c){let u=r.rgb.xyz(c),d=u[0],h=u[1],m=u[2];d/=95.047,h/=100,m/=108.883,d=d>.008856?d**(1/3):7.787*d+16/116,h=h>.008856?h**(1/3):7.787*h+16/116,m=m>.008856?m**(1/3):7.787*m+16/116;let g=116*h-16,v=500*(d-h),p=200*(h-m);return[g,v,p]},r.hsl.rgb=function(c){let u=c[0]/360,d=c[1]/100,h=c[2]/100,m,g,v;if(d===0)return v=h*255,[v,v,v];h<.5?m=h*(1+d):m=h+d-h*d;let p=2*h-m,y=[0,0,0];for(let x=0;x<3;x++)g=u+1/3*-(x-1),g<0&&g++,g>1&&g--,6*g<1?v=p+(m-p)*6*g:2*g<1?v=m:3*g<2?v=p+(m-p)*(2/3-g)*6:v=p,y[x]=v*255;return y},r.hsl.hsv=function(c){let u=c[0],d=c[1]/100,h=c[2]/100,m=d,g=Math.max(h,.01);h*=2,d*=h<=1?h:2-h,m*=g<=1?g:2-g;let v=(h+d)/2,p=h===0?2*m/(g+m):2*d/(h+d);return[u,p*100,v*100]},r.hsv.rgb=function(c){let u=c[0]/60,d=c[1]/100,h=c[2]/100,m=Math.floor(u)%6,g=u-Math.floor(u),v=255*h*(1-d),p=255*h*(1-d*g),y=255*h*(1-d*(1-g));switch(h*=255,m){case 0:return[h,y,v];case 1:return[p,h,v];case 2:return[v,h,y];case 3:return[v,p,h];case 4:return[y,v,h];case 5:return[h,v,p]}},r.hsv.hsl=function(c){let u=c[0],d=c[1]/100,h=c[2]/100,m=Math.max(h,.01),g,v;v=(2-d)*h;let p=(2-d)*m;return g=d*m,g/=p<=1?p:2-p,g=g||0,v/=2,[u,g*100,v*100]},r.hwb.rgb=function(c){let u=c[0]/360,d=c[1]/100,h=c[2]/100,m=d+h,g;m>1&&(d/=m,h/=m);let v=Math.floor(6*u),p=1-h;g=6*u-v,(v&1)!==0&&(g=1-g);let y=d+g*(p-d),x,b,R;switch(v){default:case 6:case 0:x=p,b=y,R=d;break;case 1:x=y,b=p,R=d;break;case 2:x=d,b=p,R=y;break;case 3:x=d,b=y,R=p;break;case 4:x=y,b=d,R=p;break;case 5:x=p,b=d,R=y;break}return[x*255,b*255,R*255]},r.cmyk.rgb=function(c){let u=c[0]/100,d=c[1]/100,h=c[2]/100,m=c[3]/100,g=1-Math.min(1,u*(1-m)+m),v=1-Math.min(1,d*(1-m)+m),p=1-Math.min(1,h*(1-m)+m);return[g*255,v*255,p*255]},r.xyz.rgb=function(c){let u=c[0]/100,d=c[1]/100,h=c[2]/100,m,g,v;return m=u*3.2406+d*-1.5372+h*-.4986,g=u*-.9689+d*1.8758+h*.0415,v=u*.0557+d*-.204+h*1.057,m=m>.0031308?1.055*m**(1/2.4)-.055:m*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,v=v>.0031308?1.055*v**(1/2.4)-.055:v*12.92,m=Math.min(Math.max(0,m),1),g=Math.min(Math.max(0,g),1),v=Math.min(Math.max(0,v),1),[m*255,g*255,v*255]},r.xyz.lab=function(c){let u=c[0],d=c[1],h=c[2];u/=95.047,d/=100,h/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,d=d>.008856?d**(1/3):7.787*d+16/116,h=h>.008856?h**(1/3):7.787*h+16/116;let m=116*d-16,g=500*(u-d),v=200*(d-h);return[m,g,v]},r.lab.xyz=function(c){let u=c[0],d=c[1],h=c[2],m,g,v;g=(u+16)/116,m=d/500+g,v=g-h/200;let p=g**3,y=m**3,x=v**3;return g=p>.008856?p:(g-16/116)/7.787,m=y>.008856?y:(m-16/116)/7.787,v=x>.008856?x:(v-16/116)/7.787,m*=95.047,g*=100,v*=108.883,[m,g,v]},r.lab.lch=function(c){let u=c[0],d=c[1],h=c[2],m;m=Math.atan2(h,d)*360/2/Math.PI,m<0&&(m+=360);let v=Math.sqrt(d*d+h*h);return[u,v,m]},r.lch.lab=function(c){let u=c[0],d=c[1],m=c[2]/360*2*Math.PI,g=d*Math.cos(m),v=d*Math.sin(m);return[u,g,v]},r.rgb.ansi16=function(c,u=null){let[d,h,m]=c,g=u===null?r.rgb.hsv(c)[2]:u;if(g=Math.round(g/50),g===0)return 30;let v=30+(Math.round(m/255)<<2|Math.round(h/255)<<1|Math.round(d/255));return g===2&&(v+=60),v},r.hsv.ansi16=function(c){return r.rgb.ansi16(r.hsv.rgb(c),c[2])},r.rgb.ansi256=function(c){let u=c[0],d=c[1],h=c[2];return u===d&&d===h?u<8?16:u>248?231:Math.round((u-8)/247*24)+232:16+36*Math.round(u/255*5)+6*Math.round(d/255*5)+Math.round(h/255*5)},r.ansi16.rgb=function(c){let u=c%10;if(u===0||u===7)return c>50&&(u+=3.5),u=u/10.5*255,[u,u,u];let d=(~~(c>50)+1)*.5,h=(u&1)*d*255,m=(u>>1&1)*d*255,g=(u>>2&1)*d*255;return[h,m,g]},r.ansi256.rgb=function(c){if(c>=232){let g=(c-232)*10+8;return[g,g,g]}c-=16;let u,d=Math.floor(c/36)/5*255,h=Math.floor((u=c%36)/6)/5*255,m=u%6/5*255;return[d,h,m]},r.rgb.hex=function(c){let d=(((Math.round(c[0])&255)<<16)+((Math.round(c[1])&255)<<8)+(Math.round(c[2])&255)).toString(16).toUpperCase();return"000000".substring(d.length)+d},r.hex.rgb=function(c){let u=c.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!u)return[0,0,0];let d=u[0];u[0].length===3&&(d=d.split("").map(p=>p+p).join(""));let h=parseInt(d,16),m=h>>16&255,g=h>>8&255,v=h&255;return[m,g,v]},r.rgb.hcg=function(c){let u=c[0]/255,d=c[1]/255,h=c[2]/255,m=Math.max(Math.max(u,d),h),g=Math.min(Math.min(u,d),h),v=m-g,p,y;return v<1?p=g/(1-v):p=0,v<=0?y=0:m===u?y=(d-h)/v%6:m===d?y=2+(h-u)/v:y=4+(u-d)/v,y/=6,y%=1,[y*360,v*100,p*100]},r.hsl.hcg=function(c){let u=c[1]/100,d=c[2]/100,h=d<.5?2*u*d:2*u*(1-d),m=0;return h<1&&(m=(d-.5*h)/(1-h)),[c[0],h*100,m*100]},r.hsv.hcg=function(c){let u=c[1]/100,d=c[2]/100,h=u*d,m=0;return h<1&&(m=(d-h)/(1-h)),[c[0],h*100,m*100]},r.hcg.rgb=function(c){let u=c[0]/360,d=c[1]/100,h=c[2]/100;if(d===0)return[h*255,h*255,h*255];let m=[0,0,0],g=u%1*6,v=g%1,p=1-v,y=0;switch(Math.floor(g)){case 0:m[0]=1,m[1]=v,m[2]=0;break;case 1:m[0]=p,m[1]=1,m[2]=0;break;case 2:m[0]=0,m[1]=1,m[2]=v;break;case 3:m[0]=0,m[1]=p,m[2]=1;break;case 4:m[0]=v,m[1]=0,m[2]=1;break;default:m[0]=1,m[1]=0,m[2]=p}return y=(1-d)*h,[(d*m[0]+y)*255,(d*m[1]+y)*255,(d*m[2]+y)*255]},r.hcg.hsv=function(c){let u=c[1]/100,d=c[2]/100,h=u+d*(1-u),m=0;return h>0&&(m=u/h),[c[0],m*100,h*100]},r.hcg.hsl=function(c){let u=c[1]/100,h=c[2]/100*(1-u)+.5*u,m=0;return h>0&&h<.5?m=u/(2*h):h>=.5&&h<1&&(m=u/(2*(1-h))),[c[0],m*100,h*100]},r.hcg.hwb=function(c){let u=c[1]/100,d=c[2]/100,h=u+d*(1-u);return[c[0],(h-u)*100,(1-h)*100]},r.hwb.hcg=function(c){let u=c[1]/100,h=1-c[2]/100,m=h-u,g=0;return m<1&&(g=(h-m)/(1-m)),[c[0],m*100,g*100]},r.apple.rgb=function(c){return[c[0]/65535*255,c[1]/65535*255,c[2]/65535*255]},r.rgb.apple=function(c){return[c[0]/255*65535,c[1]/255*65535,c[2]/255*65535]},r.gray.rgb=function(c){return[c[0]/100*255,c[0]/100*255,c[0]/100*255]},r.gray.hsl=function(c){return[0,0,c[0]]},r.gray.hsv=r.gray.hsl,r.gray.hwb=function(c){return[0,100,c[0]]},r.gray.cmyk=function(c){return[0,0,0,c[0]]},r.gray.lab=function(c){return[c[0],0,0]},r.gray.hex=function(c){let u=Math.round(c[0]/100*255)&255,h=((u<<16)+(u<<8)+u).toString(16).toUpperCase();return"000000".substring(h.length)+h},r.rgb.gray=function(c){return[(c[0]+c[1]+c[2])/3/255*100]}}}),Ex=Lr({"node_modules/color-convert/route.js"(a,e){var t=xm();function s(){let u={},d=Object.keys(t);for(let h=d.length,m=0;m<h;m++)u[d[m]]={distance:-1,parent:null};return u}function r(u){let d=s(),h=[u];for(d[u].distance=0;h.length;){let m=h.pop(),g=Object.keys(t[m]);for(let v=g.length,p=0;p<v;p++){let y=g[p],x=d[y];x.distance===-1&&(x.distance=d[m].distance+1,x.parent=m,h.unshift(y))}}return d}function o(u,d){return function(h){return d(u(h))}}function c(u,d){let h=[d[u].parent,u],m=t[d[u].parent][u],g=d[u].parent;for(;d[g].parent;)h.unshift(d[g].parent),m=o(t[d[g].parent][g],m),g=d[g].parent;return m.conversion=h,m}e.exports=function(u){let d=r(u),h={},m=Object.keys(d);for(let g=m.length,v=0;v<g;v++){let p=m[v];d[p].parent!==null&&(h[p]=c(p,d))}return h}}}),xx=Lr({"node_modules/color-convert/index.js"(a,e){var t=xm(),s=Ex(),r={},o=Object.keys(t);function c(d){let h=function(...m){let g=m[0];return g==null?g:(g.length>1&&(m=g),d(m))};return"conversion"in d&&(h.conversion=d.conversion),h}function u(d){let h=function(...m){let g=m[0];if(g==null)return g;g.length>1&&(m=g);let v=d(m);if(typeof v=="object")for(let p=v.length,y=0;y<p;y++)v[y]=Math.round(v[y]);return v};return"conversion"in d&&(h.conversion=d.conversion),h}o.forEach(d=>{r[d]={},Object.defineProperty(r[d],"channels",{value:t[d].channels}),Object.defineProperty(r[d],"labels",{value:t[d].labels});let h=s(d);Object.keys(h).forEach(g=>{let v=h[g];r[d][g]=u(v),r[d][g].raw=c(v)})}),e.exports=r}}),Sx=Lr({"node_modules/ansi-styles/index.js"(a,e){"use strict";var t=(g,v)=>(...p)=>`\x1B[${g(...p)+v}m`,s=(g,v)=>(...p)=>{let y=g(...p);return`\x1B[${38+v};5;${y}m`},r=(g,v)=>(...p)=>{let y=g(...p);return`\x1B[${38+v};2;${y[0]};${y[1]};${y[2]}m`},o=g=>g,c=(g,v,p)=>[g,v,p],u=(g,v,p)=>{Object.defineProperty(g,v,{get:()=>{let y=p();return Object.defineProperty(g,v,{value:y,enumerable:!0,configurable:!0}),y},enumerable:!0,configurable:!0})},d,h=(g,v,p,y)=>{d===void 0&&(d=xx());let x=y?10:0,b={};for(let[R,z]of Object.entries(d)){let I=R==="ansi16"?"ansi":R;R===v?b[I]=g(p,x):typeof z=="object"&&(b[I]=g(z[v],x))}return b};function m(){let g=new Map,v={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};v.color.gray=v.color.blackBright,v.bgColor.bgGray=v.bgColor.bgBlackBright,v.color.grey=v.color.blackBright,v.bgColor.bgGrey=v.bgColor.bgBlackBright;for(let[p,y]of Object.entries(v)){for(let[x,b]of Object.entries(y))v[x]={open:`\x1B[${b[0]}m`,close:`\x1B[${b[1]}m`},y[x]=v[x],g.set(b[0],b[1]);Object.defineProperty(v,p,{value:y,enumerable:!1})}return Object.defineProperty(v,"codes",{value:g,enumerable:!1}),v.color.close="\x1B[39m",v.bgColor.close="\x1B[49m",u(v.color,"ansi",()=>h(t,"ansi16",o,!1)),u(v.color,"ansi256",()=>h(s,"ansi256",o,!1)),u(v.color,"ansi16m",()=>h(r,"rgb",c,!1)),u(v.bgColor,"ansi",()=>h(t,"ansi16",o,!0)),u(v.bgColor,"ansi256",()=>h(s,"ansi256",o,!0)),u(v.bgColor,"ansi16m",()=>h(r,"rgb",c,!0)),v}Object.defineProperty(e,"exports",{enumerable:!0,get:m})}}),Px=Lr({"node_modules/has-flag/index.js"(a,e){"use strict";e.exports=(t,s=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",o=s.indexOf(r+t),c=s.indexOf("--");return o!==-1&&(c===-1||o<c)}}}),Rx=Lr({"node_modules/supports-color/index.js"(a,e){"use strict";var t=fm("os"),s=fm("tty"),r=Px(),{env:o}=process,c;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?c=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(c=1),"FORCE_COLOR"in o&&(o.FORCE_COLOR==="true"?c=1:o.FORCE_COLOR==="false"?c=0:c=o.FORCE_COLOR.length===0?1:Math.min(parseInt(o.FORCE_COLOR,10),3));function u(m){return m===0?!1:{level:m,hasBasic:!0,has256:m>=2,has16m:m>=3}}function d(m,g){if(c===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(m&&!g&&c===void 0)return 0;let v=c||0;if(o.TERM==="dumb")return v;if(process.platform==="win32"){let p=t.release().split(".");return Number(p[0])>=10&&Number(p[2])>=10586?Number(p[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(p=>p in o)||o.CI_NAME==="codeship"?1:v;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if(o.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in o){let p=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return p>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:v}function h(m){let g=d(m,m&&m.isTTY);return u(g)}e.exports={supportsColor:h,stdout:u(d(!0,s.isatty(1))),stderr:u(d(!0,s.isatty(2)))}}}),Ax=Lr({"node_modules/chalk/source/util.js"(a,e){"use strict";var t=(r,o,c)=>{let u=r.indexOf(o);if(u===-1)return r;let d=o.length,h=0,m="";do m+=r.substr(h,u-h)+o+c,h=u+d,u=r.indexOf(o,h);while(u!==-1);return m+=r.substr(h),m},s=(r,o,c,u)=>{let d=0,h="";do{let m=r[u-1]==="\r";h+=r.substr(d,(m?u-1:u)-d)+o+(m?`\r
`:`
`)+c,d=u+1,u=r.indexOf(`
`,d)}while(u!==-1);return h+=r.substr(d),h};e.exports={stringReplaceAll:t,stringEncaseCRLFWithFirstIndex:s}}}),Tx=Lr({"node_modules/chalk/source/templates.js"(a,e){"use strict";var t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,s=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,o=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,c=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function u(g){let v=g[0]==="u",p=g[1]==="{";return v&&!p&&g.length===5||g[0]==="x"&&g.length===3?String.fromCharCode(parseInt(g.slice(1),16)):v&&p?String.fromCodePoint(parseInt(g.slice(2,-1),16)):c.get(g)||g}function d(g,v){let p=[],y=v.trim().split(/\s*,\s*/g),x;for(let b of y){let R=Number(b);if(!Number.isNaN(R))p.push(R);else if(x=b.match(r))p.push(x[2].replace(o,(z,I,j)=>I?u(I):j));else throw new Error(`Invalid Chalk template style argument: ${b} (in style '${g}')`)}return p}function h(g){s.lastIndex=0;let v=[],p;for(;(p=s.exec(g))!==null;){let y=p[1];if(p[2]){let x=d(y,p[2]);v.push([y].concat(x))}else v.push([y])}return v}function m(g,v){let p={};for(let x of v)for(let b of x.styles)p[b[0]]=x.inverse?null:b.slice(1);let y=g;for(let[x,b]of Object.entries(p))if(Array.isArray(b)){if(!(x in y))throw new Error(`Unknown Chalk style: ${x}`);y=b.length>0?y[x](...b):y[x]}return y}e.exports=(g,v)=>{let p=[],y=[],x=[];if(v.replace(t,(b,R,z,I,j,M)=>{if(R)x.push(u(R));else if(I){let $=x.join("");x=[],y.push(p.length===0?$:m(g,p)($)),p.push({inverse:z,styles:h(I)})}else if(j){if(p.length===0)throw new Error("Found extraneous } in Chalk template literal");y.push(m(g,p)(x.join(""))),x=[],p.pop()}else x.push(M)}),y.push(x.join("")),p.length>0){let b=`Chalk template literal is missing ${p.length} closing bracket${p.length===1?"":"s"} (\`}\`)`;throw new Error(b)}return y.join("")}}}),kx=Lr({"node_modules/chalk/source/index.js"(a,e){"use strict";var t=Sx(),{stdout:s,stderr:r}=Rx(),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:c}=Ax(),{isArray:u}=Array,d=["ansi","ansi","ansi256","ansi16m"],h=Object.create(null),m=($,H={})=>{if(H.level&&!(Number.isInteger(H.level)&&H.level>=0&&H.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let W=s?s.level:0;$.level=H.level===void 0?W:H.level},g=class{constructor($){return v($)}},v=$=>{let H={};return m(H,$),H.template=(...W)=>j(H.template,...W),Object.setPrototypeOf(H,p.prototype),Object.setPrototypeOf(H.template,H),H.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},H.template.Instance=g,H.template};function p($){return v($)}for(let[$,H]of Object.entries(t))h[$]={get(){let W=R(this,b(H.open,H.close,this._styler),this._isEmpty);return Object.defineProperty(this,$,{value:W}),W}};h.visible={get(){let $=R(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:$}),$}};var y=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let $ of y)h[$]={get(){let{level:H}=this;return function(...W){let B=b(t.color[d[H]][$](...W),t.color.close,this._styler);return R(this,B,this._isEmpty)}}};for(let $ of y){let H="bg"+$[0].toUpperCase()+$.slice(1);h[H]={get(){let{level:W}=this;return function(...B){let J=b(t.bgColor[d[W]][$](...B),t.bgColor.close,this._styler);return R(this,J,this._isEmpty)}}}}var x=Object.defineProperties(()=>{},{...h,level:{enumerable:!0,get(){return this._generator.level},set($){this._generator.level=$}}}),b=($,H,W)=>{let B,J;return W===void 0?(B=$,J=H):(B=W.openAll+$,J=H+W.closeAll),{open:$,close:H,openAll:B,closeAll:J,parent:W}},R=($,H,W)=>{let B=(...J)=>u(J[0])&&u(J[0].raw)?z(B,j(B,...J)):z(B,J.length===1?""+J[0]:J.join(" "));return Object.setPrototypeOf(B,x),B._generator=$,B._styler=H,B._isEmpty=W,B},z=($,H)=>{if($.level<=0||!H)return $._isEmpty?"":H;let W=$._styler;if(W===void 0)return H;let{openAll:B,closeAll:J}=W;if(H.indexOf("\x1B")!==-1)for(;W!==void 0;)H=o(H,W.close,W.open),W=W.parent;let te=H.indexOf(`
`);return te!==-1&&(H=c(H,J,B,te)),B+H+J},I,j=($,...H)=>{let[W]=H;if(!u(W)||!u(W.raw))return H.join(" ");let B=H.slice(1),J=[W.raw[0]];for(let te=1;te<W.length;te++)J.push(String(B[te-1]).replace(/[{}\\]/g,"\\$&"),String(W.raw[te]));return I===void 0&&(I=Tx()),I($,J.join(""))};Object.defineProperties(p.prototype,h);var M=p();M.supportsColor=s,M.stderr=p({level:r?r.level:0}),M.stderr.supportsColor=r,e.exports=M}}),Ox=Lr({"node_modules/lodash/lodash.js"(a,e){(function(){var t,s="4.17.21",r=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",g=1,v=2,p=4,y=1,x=2,b=1,R=2,z=4,I=8,j=16,M=32,$=64,H=128,W=256,B=512,J=30,te="...",ie=800,G=16,Q=1,se=2,Ue=3,ge=1/0,_e=9007199254740991,xe=17976931348623157e292,ce=NaN,Fe=4294967295,Et=Fe-1,At=Fe>>>1,Le=[["ary",H],["bind",b],["bindKey",R],["curry",I],["curryRight",j],["flip",B],["partial",M],["partialRight",$],["rearg",W]],Ke="[object Arguments]",lt="[object Array]",Tt="[object AsyncFunction]",Vt="[object Boolean]",Lt="[object Date]",dt="[object DOMException]",Ye="[object Error]",dr="[object Function]",_t="[object GeneratorFunction]",ye="[object Map]",Wt="[object Number]",Sr="[object Null]",kt="[object Object]",Nr="[object Promise]",yt="[object Proxy]",xt="[object RegExp]",Je="[object Set]",mt="[object String]",Nt="[object Symbol]",Ft="[object Undefined]",Fr="[object WeakMap]",Ra="[object WeakSet]",Ot="[object ArrayBuffer]",fr="[object DataView]",Kn="[object Float32Array]",Yn="[object Float64Array]",Gr="[object Int8Array]",Qn="[object Int16Array]",Aa="[object Int32Array]",Ta="[object Uint8Array]",Jn="[object Uint8ClampedArray]",Gt="[object Uint16Array]",ka="[object Uint32Array]",yo=/\b__p \+= '';/g,bo=/\b(__p \+=) '' \+/g,wo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ii=/&(?:amp|lt|gt|quot|#39);/g,si=/[&<>"']/g,pn=RegExp(ii.source),Eo=RegExp(si.source),oi=/<%-([\s\S]+?)%>/g,xo=/<%([\s\S]+?)%>/g,Xn=/<%=([\s\S]+?)%>/g,li=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,So=/^\w*$/,ci=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oa=/[\\^$.*+?()[\]{}|]/g,ui=RegExp(Oa.source),T=/^\s+/,P=/\s/,O=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,L=/\{\n\/\* \[wrapped with (.+)\] \*/,F=/,? & /,re=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,be=/[()=,{}\[\]\/\s]/,Ie=/\\(\\)?/g,ze=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ct=/\w*$/,Ce=/^[-+]0x[0-9a-f]+$/i,nt=/^0b[01]+$/i,ft=/^\[object .+?Constructor\]$/,Xe=/^0o[0-7]+$/i,Ne=/^(?:0|[1-9]\d*)$/,at=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,je=/($^)/,Kr=/['\n\r\u2028\u2029\\]/g,St="\\ud800-\\udfff",Kt="\\u0300-\\u036f",Ve="\\ufe20-\\ufe2f",jt="\\u20d0-\\u20ff",qt=Kt+Ve+jt,nr="\\u2700-\\u27bf",jr="a-z\\xdf-\\xf6\\xf8-\\xff",Pr="\\xac\\xb1\\xd7\\xf7",In="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ea="\\u2000-\\u206f",ta=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yr="A-Z\\xc0-\\xd6\\xd8-\\xde",Qr="\\ufe0e\\ufe0f",hr=Pr+In+ea+ta,qr="['\u2019]",Ca="["+St+"]",zr="["+hr+"]",ra="["+qt+"]",di="\\d+",fi="["+nr+"]",mn="["+jr+"]",gn="[^"+St+hr+di+nr+jr+Yr+"]",na="\\ud83c[\\udffb-\\udfff]",$n="(?:"+ra+"|"+na+")",hi="[^"+St+"]",aa="(?:\\ud83c[\\udde6-\\uddff]){2}",Da="[\\ud800-\\udbff][\\udc00-\\udfff]",It="["+Yr+"]",Jr="\\u200d",ia="(?:"+mn+"|"+gn+")",sa="(?:"+It+"|"+gn+")",Xr="(?:"+qr+"(?:d|ll|m|re|s|t|ve))?",Po="(?:"+qr+"(?:D|LL|M|RE|S|T|VE))?",en=$n+"?",vn="["+Qr+"]?",pi="(?:"+Jr+"(?:"+[hi,aa,Da].join("|")+")"+vn+en+")*",Ro="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ao="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mi=vn+en+pi,Bc="(?:"+[fi,aa,Da].join("|")+")"+mi,Vc="(?:"+[hi+ra+"?",ra,aa,Da,Ca].join("|")+")",Wc=RegExp(qr,"g"),Gc=RegExp(ra,"g"),gi=RegExp(na+"(?="+na+")|"+Vc+mi,"g"),Kc=RegExp([It+"?"+mn+"+"+Xr+"(?="+[zr,It,"$"].join("|")+")",sa+"+"+Po+"(?="+[zr,It+ia,"$"].join("|")+")",It+"?"+ia+"+"+Xr,It+"+"+Po,Ao,Ro,di,Bc].join("|"),"g"),Yc=RegExp("["+Jr+St+qt+Qr+"]"),zm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Um=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hm=-1,it={};it[Kn]=it[Yn]=it[Gr]=it[Qn]=it[Aa]=it[Ta]=it[Jn]=it[Gt]=it[ka]=!0,it[Ke]=it[lt]=it[Ot]=it[Vt]=it[fr]=it[Lt]=it[Ye]=it[dr]=it[ye]=it[Wt]=it[kt]=it[xt]=it[Je]=it[mt]=it[Fr]=!1;var et={};et[Ke]=et[lt]=et[Ot]=et[fr]=et[Vt]=et[Lt]=et[Kn]=et[Yn]=et[Gr]=et[Qn]=et[Aa]=et[ye]=et[Wt]=et[kt]=et[xt]=et[Je]=et[mt]=et[Nt]=et[Ta]=et[Jn]=et[Gt]=et[ka]=!0,et[Ye]=et[dr]=et[Fr]=!1;var Zm={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Bm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gm=parseFloat,Km=parseInt,Qc=typeof global=="object"&&global&&global.Object===Object&&global,Ym=typeof self=="object"&&self&&self.Object===Object&&self,Pt=Qc||Ym||Function("return this")(),To=typeof a=="object"&&a&&!a.nodeType&&a,Mn=To&&typeof e=="object"&&e&&!e.nodeType&&e,Jc=Mn&&Mn.exports===To,ko=Jc&&Qc.process,pr=(function(){try{var C=Mn&&Mn.require&&Mn.require("util").types;return C||ko&&ko.binding&&ko.binding("util")}catch{}})(),Xc=pr&&pr.isArrayBuffer,eu=pr&&pr.isDate,tu=pr&&pr.isMap,ru=pr&&pr.isRegExp,nu=pr&&pr.isSet,au=pr&&pr.isTypedArray;function ar(C,q,N){switch(N.length){case 0:return C.call(q);case 1:return C.call(q,N[0]);case 2:return C.call(q,N[0],N[1]);case 3:return C.call(q,N[0],N[1],N[2])}return C.apply(q,N)}function Qm(C,q,N,ae){for(var ve=-1,He=C==null?0:C.length;++ve<He;){var bt=C[ve];q(ae,bt,N(bt),C)}return ae}function mr(C,q){for(var N=-1,ae=C==null?0:C.length;++N<ae&&q(C[N],N,C)!==!1;);return C}function Jm(C,q){for(var N=C==null?0:C.length;N--&&q(C[N],N,C)!==!1;);return C}function iu(C,q){for(var N=-1,ae=C==null?0:C.length;++N<ae;)if(!q(C[N],N,C))return!1;return!0}function _n(C,q){for(var N=-1,ae=C==null?0:C.length,ve=0,He=[];++N<ae;){var bt=C[N];q(bt,N,C)&&(He[ve++]=bt)}return He}function vi(C,q){var N=C==null?0:C.length;return!!N&&oa(C,q,0)>-1}function Oo(C,q,N){for(var ae=-1,ve=C==null?0:C.length;++ae<ve;)if(N(q,C[ae]))return!0;return!1}function st(C,q){for(var N=-1,ae=C==null?0:C.length,ve=Array(ae);++N<ae;)ve[N]=q(C[N],N,C);return ve}function yn(C,q){for(var N=-1,ae=q.length,ve=C.length;++N<ae;)C[ve+N]=q[N];return C}function Co(C,q,N,ae){var ve=-1,He=C==null?0:C.length;for(ae&&He&&(N=C[++ve]);++ve<He;)N=q(N,C[ve],ve,C);return N}function Xm(C,q,N,ae){var ve=C==null?0:C.length;for(ae&&ve&&(N=C[--ve]);ve--;)N=q(N,C[ve],ve,C);return N}function Do(C,q){for(var N=-1,ae=C==null?0:C.length;++N<ae;)if(q(C[N],N,C))return!0;return!1}var eg=Io("length");function tg(C){return C.split("")}function rg(C){return C.match(re)||[]}function su(C,q,N){var ae;return N(C,function(ve,He,bt){if(q(ve,He,bt))return ae=He,!1}),ae}function _i(C,q,N,ae){for(var ve=C.length,He=N+(ae?1:-1);ae?He--:++He<ve;)if(q(C[He],He,C))return He;return-1}function oa(C,q,N){return q===q?pg(C,q,N):_i(C,ou,N)}function ng(C,q,N,ae){for(var ve=N-1,He=C.length;++ve<He;)if(ae(C[ve],q))return ve;return-1}function ou(C){return C!==C}function lu(C,q){var N=C==null?0:C.length;return N?Mo(C,q)/N:ce}function Io(C){return function(q){return q==null?t:q[C]}}function $o(C){return function(q){return C==null?t:C[q]}}function cu(C,q,N,ae,ve){return ve(C,function(He,bt,Qe){N=ae?(ae=!1,He):q(N,He,bt,Qe)}),N}function ag(C,q){var N=C.length;for(C.sort(q);N--;)C[N]=C[N].value;return C}function Mo(C,q){for(var N,ae=-1,ve=C.length;++ae<ve;){var He=q(C[ae]);He!==t&&(N=N===t?He:N+He)}return N}function Lo(C,q){for(var N=-1,ae=Array(C);++N<C;)ae[N]=q(N);return ae}function ig(C,q){return st(q,function(N){return[N,C[N]]})}function uu(C){return C&&C.slice(0,pu(C)+1).replace(T,"")}function ir(C){return function(q){return C(q)}}function No(C,q){return st(q,function(N){return C[N]})}function Ia(C,q){return C.has(q)}function du(C,q){for(var N=-1,ae=C.length;++N<ae&&oa(q,C[N],0)>-1;);return N}function fu(C,q){for(var N=C.length;N--&&oa(q,C[N],0)>-1;);return N}function sg(C,q){for(var N=C.length,ae=0;N--;)C[N]===q&&++ae;return ae}var og=$o(Zm),lg=$o(Bm);function cg(C){return"\\"+Wm[C]}function ug(C,q){return C==null?t:C[q]}function la(C){return Yc.test(C)}function dg(C){return zm.test(C)}function fg(C){for(var q,N=[];!(q=C.next()).done;)N.push(q.value);return N}function Fo(C){var q=-1,N=Array(C.size);return C.forEach(function(ae,ve){N[++q]=[ve,ae]}),N}function hu(C,q){return function(N){return C(q(N))}}function bn(C,q){for(var N=-1,ae=C.length,ve=0,He=[];++N<ae;){var bt=C[N];(bt===q||bt===m)&&(C[N]=m,He[ve++]=N)}return He}function yi(C){var q=-1,N=Array(C.size);return C.forEach(function(ae){N[++q]=ae}),N}function hg(C){var q=-1,N=Array(C.size);return C.forEach(function(ae){N[++q]=[ae,ae]}),N}function pg(C,q,N){for(var ae=N-1,ve=C.length;++ae<ve;)if(C[ae]===q)return ae;return-1}function mg(C,q,N){for(var ae=N+1;ae--;)if(C[ae]===q)return ae;return ae}function ca(C){return la(C)?vg(C):eg(C)}function Rr(C){return la(C)?_g(C):tg(C)}function pu(C){for(var q=C.length;q--&&P.test(C.charAt(q)););return q}var gg=$o(Vm);function vg(C){for(var q=gi.lastIndex=0;gi.test(C);)++q;return q}function _g(C){return C.match(gi)||[]}function yg(C){return C.match(Kc)||[]}var bg=(function C(q){q=q==null?Pt:wn.defaults(Pt.Object(),q,wn.pick(Pt,Um));var N=q.Array,ae=q.Date,ve=q.Error,He=q.Function,bt=q.Math,Qe=q.Object,jo=q.RegExp,wg=q.String,gr=q.TypeError,bi=N.prototype,Eg=He.prototype,ua=Qe.prototype,wi=q["__core-js_shared__"],Ei=Eg.toString,We=ua.hasOwnProperty,xg=0,mu=(function(){var n=/[^.]+$/.exec(wi&&wi.keys&&wi.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})(),xi=ua.toString,Sg=Ei.call(Qe),Pg=Pt._,Rg=jo("^"+Ei.call(We).replace(Oa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Si=Jc?q.Buffer:t,En=q.Symbol,Pi=q.Uint8Array,gu=Si?Si.allocUnsafe:t,Ri=hu(Qe.getPrototypeOf,Qe),vu=Qe.create,_u=ua.propertyIsEnumerable,Ai=bi.splice,yu=En?En.isConcatSpreadable:t,$a=En?En.iterator:t,Ln=En?En.toStringTag:t,Ti=(function(){try{var n=zn(Qe,"defineProperty");return n({},"",{}),n}catch{}})(),Ag=q.clearTimeout!==Pt.clearTimeout&&q.clearTimeout,Tg=ae&&ae.now!==Pt.Date.now&&ae.now,kg=q.setTimeout!==Pt.setTimeout&&q.setTimeout,ki=bt.ceil,Oi=bt.floor,qo=Qe.getOwnPropertySymbols,Og=Si?Si.isBuffer:t,bu=q.isFinite,Cg=bi.join,Dg=hu(Qe.keys,Qe),wt=bt.max,$t=bt.min,Ig=ae.now,$g=q.parseInt,wu=bt.random,Mg=bi.reverse,zo=zn(q,"DataView"),Ma=zn(q,"Map"),Uo=zn(q,"Promise"),da=zn(q,"Set"),La=zn(q,"WeakMap"),Na=zn(Qe,"create"),Ci=La&&new La,fa={},Lg=Un(zo),Ng=Un(Ma),Fg=Un(Uo),jg=Un(da),qg=Un(La),Di=En?En.prototype:t,Fa=Di?Di.valueOf:t,Eu=Di?Di.toString:t;function E(n){if(ht(n)&&!we(n)&&!(n instanceof De)){if(n instanceof vr)return n;if(We.call(n,"__wrapped__"))return xd(n)}return new vr(n)}var ha=(function(){function n(){}return function(i){if(!ut(i))return{};if(vu)return vu(i);n.prototype=i;var l=new n;return n.prototype=t,l}})();function Ii(){}function vr(n,i){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}E.templateSettings={escape:oi,evaluate:xo,interpolate:Xn,variable:"",imports:{_:E}},E.prototype=Ii.prototype,E.prototype.constructor=E,vr.prototype=ha(Ii.prototype),vr.prototype.constructor=vr;function De(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function zg(){var n=new De(this.__wrapped__);return n.__actions__=Yt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Yt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Yt(this.__views__),n}function Ug(){if(this.__filtered__){var n=new De(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Hg(){var n=this.__wrapped__.value(),i=this.__dir__,l=we(n),f=i<0,_=l?n.length:0,S=t_(0,_,this.__views__),A=S.start,k=S.end,D=k-A,U=f?k:A-1,Z=this.__iteratees__,V=Z.length,X=0,oe=$t(D,this.__takeCount__);if(!l||!f&&_==D&&oe==D)return Vu(n,this.__actions__);var de=[];e:for(;D--&&X<oe;){U+=i;for(var Re=-1,fe=n[U];++Re<V;){var Te=Z[Re],$e=Te.iteratee,lr=Te.type,Ht=$e(fe);if(lr==se)fe=Ht;else if(!Ht){if(lr==Q)continue e;break e}}de[X++]=fe}return de}De.prototype=ha(Ii.prototype),De.prototype.constructor=De;function Nn(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var f=n[i];this.set(f[0],f[1])}}function Zg(){this.__data__=Na?Na(null):{},this.size=0}function Bg(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i}function Vg(n){var i=this.__data__;if(Na){var l=i[n];return l===d?t:l}return We.call(i,n)?i[n]:t}function Wg(n){var i=this.__data__;return Na?i[n]!==t:We.call(i,n)}function Gg(n,i){var l=this.__data__;return this.size+=this.has(n)?0:1,l[n]=Na&&i===t?d:i,this}Nn.prototype.clear=Zg,Nn.prototype.delete=Bg,Nn.prototype.get=Vg,Nn.prototype.has=Wg,Nn.prototype.set=Gg;function tn(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var f=n[i];this.set(f[0],f[1])}}function Kg(){this.__data__=[],this.size=0}function Yg(n){var i=this.__data__,l=$i(i,n);if(l<0)return!1;var f=i.length-1;return l==f?i.pop():Ai.call(i,l,1),--this.size,!0}function Qg(n){var i=this.__data__,l=$i(i,n);return l<0?t:i[l][1]}function Jg(n){return $i(this.__data__,n)>-1}function Xg(n,i){var l=this.__data__,f=$i(l,n);return f<0?(++this.size,l.push([n,i])):l[f][1]=i,this}tn.prototype.clear=Kg,tn.prototype.delete=Yg,tn.prototype.get=Qg,tn.prototype.has=Jg,tn.prototype.set=Xg;function rn(n){var i=-1,l=n==null?0:n.length;for(this.clear();++i<l;){var f=n[i];this.set(f[0],f[1])}}function ev(){this.size=0,this.__data__={hash:new Nn,map:new(Ma||tn),string:new Nn}}function tv(n){var i=Vi(this,n).delete(n);return this.size-=i?1:0,i}function rv(n){return Vi(this,n).get(n)}function nv(n){return Vi(this,n).has(n)}function av(n,i){var l=Vi(this,n),f=l.size;return l.set(n,i),this.size+=l.size==f?0:1,this}rn.prototype.clear=ev,rn.prototype.delete=tv,rn.prototype.get=rv,rn.prototype.has=nv,rn.prototype.set=av;function Fn(n){var i=-1,l=n==null?0:n.length;for(this.__data__=new rn;++i<l;)this.add(n[i])}function iv(n){return this.__data__.set(n,d),this}function sv(n){return this.__data__.has(n)}Fn.prototype.add=Fn.prototype.push=iv,Fn.prototype.has=sv;function Ar(n){var i=this.__data__=new tn(n);this.size=i.size}function ov(){this.__data__=new tn,this.size=0}function lv(n){var i=this.__data__,l=i.delete(n);return this.size=i.size,l}function cv(n){return this.__data__.get(n)}function uv(n){return this.__data__.has(n)}function dv(n,i){var l=this.__data__;if(l instanceof tn){var f=l.__data__;if(!Ma||f.length<r-1)return f.push([n,i]),this.size=++l.size,this;l=this.__data__=new rn(f)}return l.set(n,i),this.size=l.size,this}Ar.prototype.clear=ov,Ar.prototype.delete=lv,Ar.prototype.get=cv,Ar.prototype.has=uv,Ar.prototype.set=dv;function xu(n,i){var l=we(n),f=!l&&Hn(n),_=!l&&!f&&An(n),S=!l&&!f&&!_&&va(n),A=l||f||_||S,k=A?Lo(n.length,wg):[],D=k.length;for(var U in n)(i||We.call(n,U))&&!(A&&(U=="length"||_&&(U=="offset"||U=="parent")||S&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||on(U,D)))&&k.push(U);return k}function Su(n){var i=n.length;return i?n[Xo(0,i-1)]:t}function fv(n,i){return Wi(Yt(n),jn(i,0,n.length))}function hv(n){return Wi(Yt(n))}function Ho(n,i,l){(l!==t&&!Tr(n[i],l)||l===t&&!(i in n))&&nn(n,i,l)}function ja(n,i,l){var f=n[i];(!(We.call(n,i)&&Tr(f,l))||l===t&&!(i in n))&&nn(n,i,l)}function $i(n,i){for(var l=n.length;l--;)if(Tr(n[l][0],i))return l;return-1}function pv(n,i,l,f){return xn(n,function(_,S,A){i(f,_,l(_),A)}),f}function Pu(n,i){return n&&Hr(i,Rt(i),n)}function mv(n,i){return n&&Hr(i,Jt(i),n)}function nn(n,i,l){i=="__proto__"&&Ti?Ti(n,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):n[i]=l}function Zo(n,i){for(var l=-1,f=i.length,_=N(f),S=n==null;++l<f;)_[l]=S?t:Sl(n,i[l]);return _}function jn(n,i,l){return n===n&&(l!==t&&(n=n<=l?n:l),i!==t&&(n=n>=i?n:i)),n}function _r(n,i,l,f,_,S){var A,k=i&g,D=i&v,U=i&p;if(l&&(A=_?l(n,f,_,S):l(n)),A!==t)return A;if(!ut(n))return n;var Z=we(n);if(Z){if(A=n_(n),!k)return Yt(n,A)}else{var V=Mt(n),X=V==dr||V==_t;if(An(n))return Ku(n,k);if(V==kt||V==Ke||X&&!_){if(A=D||X?{}:pd(n),!k)return D?Vv(n,mv(A,n)):Bv(n,Pu(A,n))}else{if(!et[V])return _?n:{};A=a_(n,V,k)}}S||(S=new Ar);var oe=S.get(n);if(oe)return oe;S.set(n,A),Hd(n)?n.forEach(function(fe){A.add(_r(fe,i,l,fe,n,S))}):zd(n)&&n.forEach(function(fe,Te){A.set(Te,_r(fe,i,l,Te,n,S))});var de=U?D?ul:cl:D?Jt:Rt,Re=Z?t:de(n);return mr(Re||n,function(fe,Te){Re&&(Te=fe,fe=n[Te]),ja(A,Te,_r(fe,i,l,Te,n,S))}),A}function gv(n){var i=Rt(n);return function(l){return Ru(l,n,i)}}function Ru(n,i,l){var f=l.length;if(n==null)return!f;for(n=Qe(n);f--;){var _=l[f],S=i[_],A=n[_];if(A===t&&!(_ in n)||!S(A))return!1}return!0}function Au(n,i,l){if(typeof n!="function")throw new gr(c);return Va(function(){n.apply(t,l)},i)}function qa(n,i,l,f){var _=-1,S=vi,A=!0,k=n.length,D=[],U=i.length;if(!k)return D;l&&(i=st(i,ir(l))),f?(S=Oo,A=!1):i.length>=r&&(S=Ia,A=!1,i=new Fn(i));e:for(;++_<k;){var Z=n[_],V=l==null?Z:l(Z);if(Z=f||Z!==0?Z:0,A&&V===V){for(var X=U;X--;)if(i[X]===V)continue e;D.push(Z)}else S(i,V,f)||D.push(Z)}return D}var xn=ed(Ur),Tu=ed(Vo,!0);function vv(n,i){var l=!0;return xn(n,function(f,_,S){return l=!!i(f,_,S),l}),l}function Mi(n,i,l){for(var f=-1,_=n.length;++f<_;){var S=n[f],A=i(S);if(A!=null&&(k===t?A===A&&!or(A):l(A,k)))var k=A,D=S}return D}function _v(n,i,l,f){var _=n.length;for(l=Se(l),l<0&&(l=-l>_?0:_+l),f=f===t||f>_?_:Se(f),f<0&&(f+=_),f=l>f?0:Bd(f);l<f;)n[l++]=i;return n}function ku(n,i){var l=[];return xn(n,function(f,_,S){i(f,_,S)&&l.push(f)}),l}function Ct(n,i,l,f,_){var S=-1,A=n.length;for(l||(l=s_),_||(_=[]);++S<A;){var k=n[S];i>0&&l(k)?i>1?Ct(k,i-1,l,f,_):yn(_,k):f||(_[_.length]=k)}return _}var Bo=td(),Ou=td(!0);function Ur(n,i){return n&&Bo(n,i,Rt)}function Vo(n,i){return n&&Ou(n,i,Rt)}function Li(n,i){return _n(i,function(l){return ln(n[l])})}function qn(n,i){i=Pn(i,n);for(var l=0,f=i.length;n!=null&&l<f;)n=n[Zr(i[l++])];return l&&l==f?n:t}function Cu(n,i,l){var f=i(n);return we(n)?f:yn(f,l(n))}function zt(n){return n==null?n===t?Ft:Sr:Ln&&Ln in Qe(n)?e_(n):h_(n)}function Wo(n,i){return n>i}function yv(n,i){return n!=null&&We.call(n,i)}function bv(n,i){return n!=null&&i in Qe(n)}function wv(n,i,l){return n>=$t(i,l)&&n<wt(i,l)}function Go(n,i,l){for(var f=l?Oo:vi,_=n[0].length,S=n.length,A=S,k=N(S),D=1/0,U=[];A--;){var Z=n[A];A&&i&&(Z=st(Z,ir(i))),D=$t(Z.length,D),k[A]=!l&&(i||_>=120&&Z.length>=120)?new Fn(A&&Z):t}Z=n[0];var V=-1,X=k[0];e:for(;++V<_&&U.length<D;){var oe=Z[V],de=i?i(oe):oe;if(oe=l||oe!==0?oe:0,!(X?Ia(X,de):f(U,de,l))){for(A=S;--A;){var Re=k[A];if(!(Re?Ia(Re,de):f(n[A],de,l)))continue e}X&&X.push(de),U.push(oe)}}return U}function Ev(n,i,l,f){return Ur(n,function(_,S,A){i(f,l(_),S,A)}),f}function za(n,i,l){i=Pn(i,n),n=_d(n,i);var f=n==null?n:n[Zr(br(i))];return f==null?t:ar(f,n,l)}function Du(n){return ht(n)&&zt(n)==Ke}function xv(n){return ht(n)&&zt(n)==Ot}function Sv(n){return ht(n)&&zt(n)==Lt}function Ua(n,i,l,f,_){return n===i?!0:n==null||i==null||!ht(n)&&!ht(i)?n!==n&&i!==i:Pv(n,i,l,f,Ua,_)}function Pv(n,i,l,f,_,S){var A=we(n),k=we(i),D=A?lt:Mt(n),U=k?lt:Mt(i);D=D==Ke?kt:D,U=U==Ke?kt:U;var Z=D==kt,V=U==kt,X=D==U;if(X&&An(n)){if(!An(i))return!1;A=!0,Z=!1}if(X&&!Z)return S||(S=new Ar),A||va(n)?dd(n,i,l,f,_,S):Jv(n,i,D,l,f,_,S);if(!(l&y)){var oe=Z&&We.call(n,"__wrapped__"),de=V&&We.call(i,"__wrapped__");if(oe||de){var Re=oe?n.value():n,fe=de?i.value():i;return S||(S=new Ar),_(Re,fe,l,f,S)}}return X?(S||(S=new Ar),Xv(n,i,l,f,_,S)):!1}function Rv(n){return ht(n)&&Mt(n)==ye}function Ko(n,i,l,f){var _=l.length,S=_,A=!f;if(n==null)return!S;for(n=Qe(n);_--;){var k=l[_];if(A&&k[2]?k[1]!==n[k[0]]:!(k[0]in n))return!1}for(;++_<S;){k=l[_];var D=k[0],U=n[D],Z=k[1];if(A&&k[2]){if(U===t&&!(D in n))return!1}else{var V=new Ar;if(f)var X=f(U,Z,D,n,i,V);if(!(X===t?Ua(Z,U,y|x,f,V):X))return!1}}return!0}function Iu(n){if(!ut(n)||l_(n))return!1;var i=ln(n)?Rg:ft;return i.test(Un(n))}function Av(n){return ht(n)&&zt(n)==xt}function Tv(n){return ht(n)&&Mt(n)==Je}function kv(n){return ht(n)&&Xi(n.length)&&!!it[zt(n)]}function $u(n){return typeof n=="function"?n:n==null?Xt:typeof n=="object"?we(n)?Nu(n[0],n[1]):Lu(n):rf(n)}function Yo(n){if(!Ba(n))return Dg(n);var i=[];for(var l in Qe(n))We.call(n,l)&&l!="constructor"&&i.push(l);return i}function Ov(n){if(!ut(n))return f_(n);var i=Ba(n),l=[];for(var f in n)f=="constructor"&&(i||!We.call(n,f))||l.push(f);return l}function Qo(n,i){return n<i}function Mu(n,i){var l=-1,f=Qt(n)?N(n.length):[];return xn(n,function(_,S,A){f[++l]=i(_,S,A)}),f}function Lu(n){var i=fl(n);return i.length==1&&i[0][2]?gd(i[0][0],i[0][1]):function(l){return l===n||Ko(l,n,i)}}function Nu(n,i){return pl(n)&&md(i)?gd(Zr(n),i):function(l){var f=Sl(l,n);return f===t&&f===i?Pl(l,n):Ua(i,f,y|x)}}function Ni(n,i,l,f,_){n!==i&&Bo(i,function(S,A){if(_||(_=new Ar),ut(S))Cv(n,i,A,l,Ni,f,_);else{var k=f?f(gl(n,A),S,A+"",n,i,_):t;k===t&&(k=S),Ho(n,A,k)}},Jt)}function Cv(n,i,l,f,_,S,A){var k=gl(n,l),D=gl(i,l),U=A.get(D);if(U){Ho(n,l,U);return}var Z=S?S(k,D,l+"",n,i,A):t,V=Z===t;if(V){var X=we(D),oe=!X&&An(D),de=!X&&!oe&&va(D);Z=D,X||oe||de?we(k)?Z=k:gt(k)?Z=Yt(k):oe?(V=!1,Z=Ku(D,!0)):de?(V=!1,Z=Yu(D,!0)):Z=[]:Wa(D)||Hn(D)?(Z=k,Hn(k)?Z=Vd(k):(!ut(k)||ln(k))&&(Z=pd(D))):V=!1}V&&(A.set(D,Z),_(Z,D,f,S,A),A.delete(D)),Ho(n,l,Z)}function Fu(n,i){var l=n.length;if(l)return i+=i<0?l:0,on(i,l)?n[i]:t}function ju(n,i,l){i.length?i=st(i,function(S){return we(S)?function(A){return qn(A,S.length===1?S[0]:S)}:S}):i=[Xt];var f=-1;i=st(i,ir(ue()));var _=Mu(n,function(S,A,k){var D=st(i,function(U){return U(S)});return{criteria:D,index:++f,value:S}});return ag(_,function(S,A){return Zv(S,A,l)})}function Dv(n,i){return qu(n,i,function(l,f){return Pl(n,f)})}function qu(n,i,l){for(var f=-1,_=i.length,S={};++f<_;){var A=i[f],k=qn(n,A);l(k,A)&&Ha(S,Pn(A,n),k)}return S}function Iv(n){return function(i){return qn(i,n)}}function Jo(n,i,l,f){var _=f?ng:oa,S=-1,A=i.length,k=n;for(n===i&&(i=Yt(i)),l&&(k=st(n,ir(l)));++S<A;)for(var D=0,U=i[S],Z=l?l(U):U;(D=_(k,Z,D,f))>-1;)k!==n&&Ai.call(k,D,1),Ai.call(n,D,1);return n}function zu(n,i){for(var l=n?i.length:0,f=l-1;l--;){var _=i[l];if(l==f||_!==S){var S=_;on(_)?Ai.call(n,_,1):rl(n,_)}}return n}function Xo(n,i){return n+Oi(wu()*(i-n+1))}function $v(n,i,l,f){for(var _=-1,S=wt(ki((i-n)/(l||1)),0),A=N(S);S--;)A[f?S:++_]=n,n+=l;return A}function el(n,i){var l="";if(!n||i<1||i>_e)return l;do i%2&&(l+=n),i=Oi(i/2),i&&(n+=n);while(i);return l}function Ae(n,i){return vl(vd(n,i,Xt),n+"")}function Mv(n){return Su(_a(n))}function Lv(n,i){var l=_a(n);return Wi(l,jn(i,0,l.length))}function Ha(n,i,l,f){if(!ut(n))return n;i=Pn(i,n);for(var _=-1,S=i.length,A=S-1,k=n;k!=null&&++_<S;){var D=Zr(i[_]),U=l;if(D==="__proto__"||D==="constructor"||D==="prototype")return n;if(_!=A){var Z=k[D];U=f?f(Z,D,k):t,U===t&&(U=ut(Z)?Z:on(i[_+1])?[]:{})}ja(k,D,U),k=k[D]}return n}var Uu=Ci?function(n,i){return Ci.set(n,i),n}:Xt,Nv=Ti?function(n,i){return Ti(n,"toString",{configurable:!0,enumerable:!1,value:Al(i),writable:!0})}:Xt;function Fv(n){return Wi(_a(n))}function yr(n,i,l){var f=-1,_=n.length;i<0&&(i=-i>_?0:_+i),l=l>_?_:l,l<0&&(l+=_),_=i>l?0:l-i>>>0,i>>>=0;for(var S=N(_);++f<_;)S[f]=n[f+i];return S}function jv(n,i){var l;return xn(n,function(f,_,S){return l=i(f,_,S),!l}),!!l}function Fi(n,i,l){var f=0,_=n==null?f:n.length;if(typeof i=="number"&&i===i&&_<=At){for(;f<_;){var S=f+_>>>1,A=n[S];A!==null&&!or(A)&&(l?A<=i:A<i)?f=S+1:_=S}return _}return tl(n,i,Xt,l)}function tl(n,i,l,f){var _=0,S=n==null?0:n.length;if(S===0)return 0;i=l(i);for(var A=i!==i,k=i===null,D=or(i),U=i===t;_<S;){var Z=Oi((_+S)/2),V=l(n[Z]),X=V!==t,oe=V===null,de=V===V,Re=or(V);if(A)var fe=f||de;else U?fe=de&&(f||X):k?fe=de&&X&&(f||!oe):D?fe=de&&X&&!oe&&(f||!Re):oe||Re?fe=!1:fe=f?V<=i:V<i;fe?_=Z+1:S=Z}return $t(S,Et)}function Hu(n,i){for(var l=-1,f=n.length,_=0,S=[];++l<f;){var A=n[l],k=i?i(A):A;if(!l||!Tr(k,D)){var D=k;S[_++]=A===0?0:A}}return S}function Zu(n){return typeof n=="number"?n:or(n)?ce:+n}function sr(n){if(typeof n=="string")return n;if(we(n))return st(n,sr)+"";if(or(n))return Eu?Eu.call(n):"";var i=n+"";return i=="0"&&1/n==-ge?"-0":i}function Sn(n,i,l){var f=-1,_=vi,S=n.length,A=!0,k=[],D=k;if(l)A=!1,_=Oo;else if(S>=r){var U=i?null:Yv(n);if(U)return yi(U);A=!1,_=Ia,D=new Fn}else D=i?[]:k;e:for(;++f<S;){var Z=n[f],V=i?i(Z):Z;if(Z=l||Z!==0?Z:0,A&&V===V){for(var X=D.length;X--;)if(D[X]===V)continue e;i&&D.push(V),k.push(Z)}else _(D,V,l)||(D!==k&&D.push(V),k.push(Z))}return k}function rl(n,i){return i=Pn(i,n),n=_d(n,i),n==null||delete n[Zr(br(i))]}function Bu(n,i,l,f){return Ha(n,i,l(qn(n,i)),f)}function ji(n,i,l,f){for(var _=n.length,S=f?_:-1;(f?S--:++S<_)&&i(n[S],S,n););return l?yr(n,f?0:S,f?S+1:_):yr(n,f?S+1:0,f?_:S)}function Vu(n,i){var l=n;return l instanceof De&&(l=l.value()),Co(i,function(f,_){return _.func.apply(_.thisArg,yn([f],_.args))},l)}function nl(n,i,l){var f=n.length;if(f<2)return f?Sn(n[0]):[];for(var _=-1,S=N(f);++_<f;)for(var A=n[_],k=-1;++k<f;)k!=_&&(S[_]=qa(S[_]||A,n[k],i,l));return Sn(Ct(S,1),i,l)}function Wu(n,i,l){for(var f=-1,_=n.length,S=i.length,A={};++f<_;){var k=f<S?i[f]:t;l(A,n[f],k)}return A}function al(n){return gt(n)?n:[]}function il(n){return typeof n=="function"?n:Xt}function Pn(n,i){return we(n)?n:pl(n,i)?[n]:Ed(Be(n))}var qv=Ae;function Rn(n,i,l){var f=n.length;return l=l===t?f:l,!i&&l>=f?n:yr(n,i,l)}var Gu=Ag||function(n){return Pt.clearTimeout(n)};function Ku(n,i){if(i)return n.slice();var l=n.length,f=gu?gu(l):new n.constructor(l);return n.copy(f),f}function sl(n){var i=new n.constructor(n.byteLength);return new Pi(i).set(new Pi(n)),i}function zv(n,i){var l=i?sl(n.buffer):n.buffer;return new n.constructor(l,n.byteOffset,n.byteLength)}function Uv(n){var i=new n.constructor(n.source,ct.exec(n));return i.lastIndex=n.lastIndex,i}function Hv(n){return Fa?Qe(Fa.call(n)):{}}function Yu(n,i){var l=i?sl(n.buffer):n.buffer;return new n.constructor(l,n.byteOffset,n.length)}function Qu(n,i){if(n!==i){var l=n!==t,f=n===null,_=n===n,S=or(n),A=i!==t,k=i===null,D=i===i,U=or(i);if(!k&&!U&&!S&&n>i||S&&A&&D&&!k&&!U||f&&A&&D||!l&&D||!_)return 1;if(!f&&!S&&!U&&n<i||U&&l&&_&&!f&&!S||k&&l&&_||!A&&_||!D)return-1}return 0}function Zv(n,i,l){for(var f=-1,_=n.criteria,S=i.criteria,A=_.length,k=l.length;++f<A;){var D=Qu(_[f],S[f]);if(D){if(f>=k)return D;var U=l[f];return D*(U=="desc"?-1:1)}}return n.index-i.index}function Ju(n,i,l,f){for(var _=-1,S=n.length,A=l.length,k=-1,D=i.length,U=wt(S-A,0),Z=N(D+U),V=!f;++k<D;)Z[k]=i[k];for(;++_<A;)(V||_<S)&&(Z[l[_]]=n[_]);for(;U--;)Z[k++]=n[_++];return Z}function Xu(n,i,l,f){for(var _=-1,S=n.length,A=-1,k=l.length,D=-1,U=i.length,Z=wt(S-k,0),V=N(Z+U),X=!f;++_<Z;)V[_]=n[_];for(var oe=_;++D<U;)V[oe+D]=i[D];for(;++A<k;)(X||_<S)&&(V[oe+l[A]]=n[_++]);return V}function Yt(n,i){var l=-1,f=n.length;for(i||(i=N(f));++l<f;)i[l]=n[l];return i}function Hr(n,i,l,f){var _=!l;l||(l={});for(var S=-1,A=i.length;++S<A;){var k=i[S],D=f?f(l[k],n[k],k,l,n):t;D===t&&(D=n[k]),_?nn(l,k,D):ja(l,k,D)}return l}function Bv(n,i){return Hr(n,hl(n),i)}function Vv(n,i){return Hr(n,fd(n),i)}function qi(n,i){return function(l,f){var _=we(l)?Qm:pv,S=i?i():{};return _(l,n,ue(f,2),S)}}function pa(n){return Ae(function(i,l){var f=-1,_=l.length,S=_>1?l[_-1]:t,A=_>2?l[2]:t;for(S=n.length>3&&typeof S=="function"?(_--,S):t,A&&Ut(l[0],l[1],A)&&(S=_<3?t:S,_=1),i=Qe(i);++f<_;){var k=l[f];k&&n(i,k,f,S)}return i})}function ed(n,i){return function(l,f){if(l==null)return l;if(!Qt(l))return n(l,f);for(var _=l.length,S=i?_:-1,A=Qe(l);(i?S--:++S<_)&&f(A[S],S,A)!==!1;);return l}}function td(n){return function(i,l,f){for(var _=-1,S=Qe(i),A=f(i),k=A.length;k--;){var D=A[n?k:++_];if(l(S[D],D,S)===!1)break}return i}}function Wv(n,i,l){var f=i&b,_=Za(n);function S(){var A=this&&this!==Pt&&this instanceof S?_:n;return A.apply(f?l:this,arguments)}return S}function rd(n){return function(i){i=Be(i);var l=la(i)?Rr(i):t,f=l?l[0]:i.charAt(0),_=l?Rn(l,1).join(""):i.slice(1);return f[n]()+_}}function ma(n){return function(i){return Co(ef(Xd(i).replace(Wc,"")),n,"")}}function Za(n){return function(){var i=arguments;switch(i.length){case 0:return new n;case 1:return new n(i[0]);case 2:return new n(i[0],i[1]);case 3:return new n(i[0],i[1],i[2]);case 4:return new n(i[0],i[1],i[2],i[3]);case 5:return new n(i[0],i[1],i[2],i[3],i[4]);case 6:return new n(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new n(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var l=ha(n.prototype),f=n.apply(l,i);return ut(f)?f:l}}function Gv(n,i,l){var f=Za(n);function _(){for(var S=arguments.length,A=N(S),k=S,D=ga(_);k--;)A[k]=arguments[k];var U=S<3&&A[0]!==D&&A[S-1]!==D?[]:bn(A,D);if(S-=U.length,S<l)return od(n,i,zi,_.placeholder,t,A,U,t,t,l-S);var Z=this&&this!==Pt&&this instanceof _?f:n;return ar(Z,this,A)}return _}function nd(n){return function(i,l,f){var _=Qe(i);if(!Qt(i)){var S=ue(l,3);i=Rt(i),l=function(k){return S(_[k],k,_)}}var A=n(i,l,f);return A>-1?_[S?i[A]:A]:t}}function ad(n){return sn(function(i){var l=i.length,f=l,_=vr.prototype.thru;for(n&&i.reverse();f--;){var S=i[f];if(typeof S!="function")throw new gr(c);if(_&&!A&&Bi(S)=="wrapper")var A=new vr([],!0)}for(f=A?f:l;++f<l;){S=i[f];var k=Bi(S),D=k=="wrapper"?dl(S):t;D&&ml(D[0])&&D[1]==(H|I|M|W)&&!D[4].length&&D[9]==1?A=A[Bi(D[0])].apply(A,D[3]):A=S.length==1&&ml(S)?A[k]():A.thru(S)}return function(){var U=arguments,Z=U[0];if(A&&U.length==1&&we(Z))return A.plant(Z).value();for(var V=0,X=l?i[V].apply(this,U):Z;++V<l;)X=i[V].call(this,X);return X}})}function zi(n,i,l,f,_,S,A,k,D,U){var Z=i&H,V=i&b,X=i&R,oe=i&(I|j),de=i&B,Re=X?t:Za(n);function fe(){for(var Te=arguments.length,$e=N(Te),lr=Te;lr--;)$e[lr]=arguments[lr];if(oe)var Ht=ga(fe),cr=sg($e,Ht);if(f&&($e=Ju($e,f,_,oe)),S&&($e=Xu($e,S,A,oe)),Te-=cr,oe&&Te<U){var vt=bn($e,Ht);return od(n,i,zi,fe.placeholder,l,$e,vt,k,D,U-Te)}var kr=V?l:this,un=X?kr[n]:n;return Te=$e.length,k?$e=p_($e,k):de&&Te>1&&$e.reverse(),Z&&D<Te&&($e.length=D),this&&this!==Pt&&this instanceof fe&&(un=Re||Za(un)),un.apply(kr,$e)}return fe}function id(n,i){return function(l,f){return Ev(l,n,i(f),{})}}function Ui(n,i){return function(l,f){var _;if(l===t&&f===t)return i;if(l!==t&&(_=l),f!==t){if(_===t)return f;typeof l=="string"||typeof f=="string"?(l=sr(l),f=sr(f)):(l=Zu(l),f=Zu(f)),_=n(l,f)}return _}}function ol(n){return sn(function(i){return i=st(i,ir(ue())),Ae(function(l){var f=this;return n(i,function(_){return ar(_,f,l)})})})}function Hi(n,i){i=i===t?" ":sr(i);var l=i.length;if(l<2)return l?el(i,n):i;var f=el(i,ki(n/ca(i)));return la(i)?Rn(Rr(f),0,n).join(""):f.slice(0,n)}function Kv(n,i,l,f){var _=i&b,S=Za(n);function A(){for(var k=-1,D=arguments.length,U=-1,Z=f.length,V=N(Z+D),X=this&&this!==Pt&&this instanceof A?S:n;++U<Z;)V[U]=f[U];for(;D--;)V[U++]=arguments[++k];return ar(X,_?l:this,V)}return A}function sd(n){return function(i,l,f){return f&&typeof f!="number"&&Ut(i,l,f)&&(l=f=t),i=cn(i),l===t?(l=i,i=0):l=cn(l),f=f===t?i<l?1:-1:cn(f),$v(i,l,f,n)}}function Zi(n){return function(i,l){return typeof i=="string"&&typeof l=="string"||(i=wr(i),l=wr(l)),n(i,l)}}function od(n,i,l,f,_,S,A,k,D,U){var Z=i&I,V=Z?A:t,X=Z?t:A,oe=Z?S:t,de=Z?t:S;i|=Z?M:$,i&=~(Z?$:M),i&z||(i&=~(b|R));var Re=[n,i,_,oe,V,de,X,k,D,U],fe=l.apply(t,Re);return ml(n)&&yd(fe,Re),fe.placeholder=f,bd(fe,n,i)}function ll(n){var i=bt[n];return function(l,f){if(l=wr(l),f=f==null?0:$t(Se(f),292),f&&bu(l)){var _=(Be(l)+"e").split("e"),S=i(_[0]+"e"+(+_[1]+f));return _=(Be(S)+"e").split("e"),+(_[0]+"e"+(+_[1]-f))}return i(l)}}var Yv=da&&1/yi(new da([,-0]))[1]==ge?function(n){return new da(n)}:Ol;function ld(n){return function(i){var l=Mt(i);return l==ye?Fo(i):l==Je?hg(i):ig(i,n(i))}}function an(n,i,l,f,_,S,A,k){var D=i&R;if(!D&&typeof n!="function")throw new gr(c);var U=f?f.length:0;if(U||(i&=~(M|$),f=_=t),A=A===t?A:wt(Se(A),0),k=k===t?k:Se(k),U-=_?_.length:0,i&$){var Z=f,V=_;f=_=t}var X=D?t:dl(n),oe=[n,i,l,f,_,Z,V,S,A,k];if(X&&d_(oe,X),n=oe[0],i=oe[1],l=oe[2],f=oe[3],_=oe[4],k=oe[9]=oe[9]===t?D?0:n.length:wt(oe[9]-U,0),!k&&i&(I|j)&&(i&=~(I|j)),!i||i==b)var de=Wv(n,i,l);else i==I||i==j?de=Gv(n,i,k):(i==M||i==(b|M))&&!_.length?de=Kv(n,i,l,f):de=zi.apply(t,oe);var Re=X?Uu:yd;return bd(Re(de,oe),n,i)}function cd(n,i,l,f){return n===t||Tr(n,ua[l])&&!We.call(f,l)?i:n}function ud(n,i,l,f,_,S){return ut(n)&&ut(i)&&(S.set(i,n),Ni(n,i,t,ud,S),S.delete(i)),n}function Qv(n){return Wa(n)?t:n}function dd(n,i,l,f,_,S){var A=l&y,k=n.length,D=i.length;if(k!=D&&!(A&&D>k))return!1;var U=S.get(n),Z=S.get(i);if(U&&Z)return U==i&&Z==n;var V=-1,X=!0,oe=l&x?new Fn:t;for(S.set(n,i),S.set(i,n);++V<k;){var de=n[V],Re=i[V];if(f)var fe=A?f(Re,de,V,i,n,S):f(de,Re,V,n,i,S);if(fe!==t){if(fe)continue;X=!1;break}if(oe){if(!Do(i,function(Te,$e){if(!Ia(oe,$e)&&(de===Te||_(de,Te,l,f,S)))return oe.push($e)})){X=!1;break}}else if(!(de===Re||_(de,Re,l,f,S))){X=!1;break}}return S.delete(n),S.delete(i),X}function Jv(n,i,l,f,_,S,A){switch(l){case fr:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Ot:return!(n.byteLength!=i.byteLength||!S(new Pi(n),new Pi(i)));case Vt:case Lt:case Wt:return Tr(+n,+i);case Ye:return n.name==i.name&&n.message==i.message;case xt:case mt:return n==i+"";case ye:var k=Fo;case Je:var D=f&y;if(k||(k=yi),n.size!=i.size&&!D)return!1;var U=A.get(n);if(U)return U==i;f|=x,A.set(n,i);var Z=dd(k(n),k(i),f,_,S,A);return A.delete(n),Z;case Nt:if(Fa)return Fa.call(n)==Fa.call(i)}return!1}function Xv(n,i,l,f,_,S){var A=l&y,k=cl(n),D=k.length,U=cl(i),Z=U.length;if(D!=Z&&!A)return!1;for(var V=D;V--;){var X=k[V];if(!(A?X in i:We.call(i,X)))return!1}var oe=S.get(n),de=S.get(i);if(oe&&de)return oe==i&&de==n;var Re=!0;S.set(n,i),S.set(i,n);for(var fe=A;++V<D;){X=k[V];var Te=n[X],$e=i[X];if(f)var lr=A?f($e,Te,X,i,n,S):f(Te,$e,X,n,i,S);if(!(lr===t?Te===$e||_(Te,$e,l,f,S):lr)){Re=!1;break}fe||(fe=X=="constructor")}if(Re&&!fe){var Ht=n.constructor,cr=i.constructor;Ht!=cr&&"constructor"in n&&"constructor"in i&&!(typeof Ht=="function"&&Ht instanceof Ht&&typeof cr=="function"&&cr instanceof cr)&&(Re=!1)}return S.delete(n),S.delete(i),Re}function sn(n){return vl(vd(n,t,Rd),n+"")}function cl(n){return Cu(n,Rt,hl)}function ul(n){return Cu(n,Jt,fd)}var dl=Ci?function(n){return Ci.get(n)}:Ol;function Bi(n){for(var i=n.name+"",l=fa[i],f=We.call(fa,i)?l.length:0;f--;){var _=l[f],S=_.func;if(S==null||S==n)return _.name}return i}function ga(n){var i=We.call(E,"placeholder")?E:n;return i.placeholder}function ue(){var n=E.iteratee||Tl;return n=n===Tl?$u:n,arguments.length?n(arguments[0],arguments[1]):n}function Vi(n,i){var l=n.__data__;return o_(i)?l[typeof i=="string"?"string":"hash"]:l.map}function fl(n){for(var i=Rt(n),l=i.length;l--;){var f=i[l],_=n[f];i[l]=[f,_,md(_)]}return i}function zn(n,i){var l=ug(n,i);return Iu(l)?l:t}function e_(n){var i=We.call(n,Ln),l=n[Ln];try{n[Ln]=t;var f=!0}catch{}var _=xi.call(n);return f&&(i?n[Ln]=l:delete n[Ln]),_}var hl=qo?function(n){return n==null?[]:(n=Qe(n),_n(qo(n),function(i){return _u.call(n,i)}))}:Cl,fd=qo?function(n){for(var i=[];n;)yn(i,hl(n)),n=Ri(n);return i}:Cl,Mt=zt;(zo&&Mt(new zo(new ArrayBuffer(1)))!=fr||Ma&&Mt(new Ma)!=ye||Uo&&Mt(Uo.resolve())!=Nr||da&&Mt(new da)!=Je||La&&Mt(new La)!=Fr)&&(Mt=function(n){var i=zt(n),l=i==kt?n.constructor:t,f=l?Un(l):"";if(f)switch(f){case Lg:return fr;case Ng:return ye;case Fg:return Nr;case jg:return Je;case qg:return Fr}return i});function t_(n,i,l){for(var f=-1,_=l.length;++f<_;){var S=l[f],A=S.size;switch(S.type){case"drop":n+=A;break;case"dropRight":i-=A;break;case"take":i=$t(i,n+A);break;case"takeRight":n=wt(n,i-A);break}}return{start:n,end:i}}function r_(n){var i=n.match(L);return i?i[1].split(F):[]}function hd(n,i,l){i=Pn(i,n);for(var f=-1,_=i.length,S=!1;++f<_;){var A=Zr(i[f]);if(!(S=n!=null&&l(n,A)))break;n=n[A]}return S||++f!=_?S:(_=n==null?0:n.length,!!_&&Xi(_)&&on(A,_)&&(we(n)||Hn(n)))}function n_(n){var i=n.length,l=new n.constructor(i);return i&&typeof n[0]=="string"&&We.call(n,"index")&&(l.index=n.index,l.input=n.input),l}function pd(n){return typeof n.constructor=="function"&&!Ba(n)?ha(Ri(n)):{}}function a_(n,i,l){var f=n.constructor;switch(i){case Ot:return sl(n);case Vt:case Lt:return new f(+n);case fr:return zv(n,l);case Kn:case Yn:case Gr:case Qn:case Aa:case Ta:case Jn:case Gt:case ka:return Yu(n,l);case ye:return new f;case Wt:case mt:return new f(n);case xt:return Uv(n);case Je:return new f;case Nt:return Hv(n)}}function i_(n,i){var l=i.length;if(!l)return n;var f=l-1;return i[f]=(l>1?"& ":"")+i[f],i=i.join(l>2?", ":" "),n.replace(O,`{
/* [wrapped with `+i+`] */
`)}function s_(n){return we(n)||Hn(n)||!!(yu&&n&&n[yu])}function on(n,i){var l=typeof n;return i=i??_e,!!i&&(l=="number"||l!="symbol"&&Ne.test(n))&&n>-1&&n%1==0&&n<i}function Ut(n,i,l){if(!ut(l))return!1;var f=typeof i;return(f=="number"?Qt(l)&&on(i,l.length):f=="string"&&i in l)?Tr(l[i],n):!1}function pl(n,i){if(we(n))return!1;var l=typeof n;return l=="number"||l=="symbol"||l=="boolean"||n==null||or(n)?!0:So.test(n)||!li.test(n)||i!=null&&n in Qe(i)}function o_(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function ml(n){var i=Bi(n),l=E[i];if(typeof l!="function"||!(i in De.prototype))return!1;if(n===l)return!0;var f=dl(l);return!!f&&n===f[0]}function l_(n){return!!mu&&mu in n}var c_=wi?ln:Dl;function Ba(n){var i=n&&n.constructor,l=typeof i=="function"&&i.prototype||ua;return n===l}function md(n){return n===n&&!ut(n)}function gd(n,i){return function(l){return l==null?!1:l[n]===i&&(i!==t||n in Qe(l))}}function u_(n){var i=Qi(n,function(f){return l.size===h&&l.clear(),f}),l=i.cache;return i}function d_(n,i){var l=n[1],f=i[1],_=l|f,S=_<(b|R|H),A=f==H&&l==I||f==H&&l==W&&n[7].length<=i[8]||f==(H|W)&&i[7].length<=i[8]&&l==I;if(!(S||A))return n;f&b&&(n[2]=i[2],_|=l&b?0:z);var k=i[3];if(k){var D=n[3];n[3]=D?Ju(D,k,i[4]):k,n[4]=D?bn(n[3],m):i[4]}return k=i[5],k&&(D=n[5],n[5]=D?Xu(D,k,i[6]):k,n[6]=D?bn(n[5],m):i[6]),k=i[7],k&&(n[7]=k),f&H&&(n[8]=n[8]==null?i[8]:$t(n[8],i[8])),n[9]==null&&(n[9]=i[9]),n[0]=i[0],n[1]=_,n}function f_(n){var i=[];if(n!=null)for(var l in Qe(n))i.push(l);return i}function h_(n){return xi.call(n)}function vd(n,i,l){return i=wt(i===t?n.length-1:i,0),function(){for(var f=arguments,_=-1,S=wt(f.length-i,0),A=N(S);++_<S;)A[_]=f[i+_];_=-1;for(var k=N(i+1);++_<i;)k[_]=f[_];return k[i]=l(A),ar(n,this,k)}}function _d(n,i){return i.length<2?n:qn(n,yr(i,0,-1))}function p_(n,i){for(var l=n.length,f=$t(i.length,l),_=Yt(n);f--;){var S=i[f];n[f]=on(S,l)?_[S]:t}return n}function gl(n,i){if(!(i==="constructor"&&typeof n[i]=="function")&&i!="__proto__")return n[i]}var yd=wd(Uu),Va=kg||function(n,i){return Pt.setTimeout(n,i)},vl=wd(Nv);function bd(n,i,l){var f=i+"";return vl(n,i_(f,m_(r_(f),l)))}function wd(n){var i=0,l=0;return function(){var f=Ig(),_=G-(f-l);if(l=f,_>0){if(++i>=ie)return arguments[0]}else i=0;return n.apply(t,arguments)}}function Wi(n,i){var l=-1,f=n.length,_=f-1;for(i=i===t?f:i;++l<i;){var S=Xo(l,_),A=n[S];n[S]=n[l],n[l]=A}return n.length=i,n}var Ed=u_(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(ci,function(l,f,_,S){i.push(_?S.replace(Ie,"$1"):f||l)}),i});function Zr(n){if(typeof n=="string"||or(n))return n;var i=n+"";return i=="0"&&1/n==-ge?"-0":i}function Un(n){if(n!=null){try{return Ei.call(n)}catch{}try{return n+""}catch{}}return""}function m_(n,i){return mr(Le,function(l){var f="_."+l[0];i&l[1]&&!vi(n,f)&&n.push(f)}),n.sort()}function xd(n){if(n instanceof De)return n.clone();var i=new vr(n.__wrapped__,n.__chain__);return i.__actions__=Yt(n.__actions__),i.__index__=n.__index__,i.__values__=n.__values__,i}function g_(n,i,l){(l?Ut(n,i,l):i===t)?i=1:i=wt(Se(i),0);var f=n==null?0:n.length;if(!f||i<1)return[];for(var _=0,S=0,A=N(ki(f/i));_<f;)A[S++]=yr(n,_,_+=i);return A}function v_(n){for(var i=-1,l=n==null?0:n.length,f=0,_=[];++i<l;){var S=n[i];S&&(_[f++]=S)}return _}function __(){var n=arguments.length;if(!n)return[];for(var i=N(n-1),l=arguments[0],f=n;f--;)i[f-1]=arguments[f];return yn(we(l)?Yt(l):[l],Ct(i,1))}var y_=Ae(function(n,i){return gt(n)?qa(n,Ct(i,1,gt,!0)):[]}),b_=Ae(function(n,i){var l=br(i);return gt(l)&&(l=t),gt(n)?qa(n,Ct(i,1,gt,!0),ue(l,2)):[]}),w_=Ae(function(n,i){var l=br(i);return gt(l)&&(l=t),gt(n)?qa(n,Ct(i,1,gt,!0),t,l):[]});function E_(n,i,l){var f=n==null?0:n.length;return f?(i=l||i===t?1:Se(i),yr(n,i<0?0:i,f)):[]}function x_(n,i,l){var f=n==null?0:n.length;return f?(i=l||i===t?1:Se(i),i=f-i,yr(n,0,i<0?0:i)):[]}function S_(n,i){return n&&n.length?ji(n,ue(i,3),!0,!0):[]}function P_(n,i){return n&&n.length?ji(n,ue(i,3),!0):[]}function R_(n,i,l,f){var _=n==null?0:n.length;return _?(l&&typeof l!="number"&&Ut(n,i,l)&&(l=0,f=_),_v(n,i,l,f)):[]}function Sd(n,i,l){var f=n==null?0:n.length;if(!f)return-1;var _=l==null?0:Se(l);return _<0&&(_=wt(f+_,0)),_i(n,ue(i,3),_)}function Pd(n,i,l){var f=n==null?0:n.length;if(!f)return-1;var _=f-1;return l!==t&&(_=Se(l),_=l<0?wt(f+_,0):$t(_,f-1)),_i(n,ue(i,3),_,!0)}function Rd(n){var i=n==null?0:n.length;return i?Ct(n,1):[]}function A_(n){var i=n==null?0:n.length;return i?Ct(n,ge):[]}function T_(n,i){var l=n==null?0:n.length;return l?(i=i===t?1:Se(i),Ct(n,i)):[]}function k_(n){for(var i=-1,l=n==null?0:n.length,f={};++i<l;){var _=n[i];f[_[0]]=_[1]}return f}function Ad(n){return n&&n.length?n[0]:t}function O_(n,i,l){var f=n==null?0:n.length;if(!f)return-1;var _=l==null?0:Se(l);return _<0&&(_=wt(f+_,0)),oa(n,i,_)}function C_(n){var i=n==null?0:n.length;return i?yr(n,0,-1):[]}var D_=Ae(function(n){var i=st(n,al);return i.length&&i[0]===n[0]?Go(i):[]}),I_=Ae(function(n){var i=br(n),l=st(n,al);return i===br(l)?i=t:l.pop(),l.length&&l[0]===n[0]?Go(l,ue(i,2)):[]}),$_=Ae(function(n){var i=br(n),l=st(n,al);return i=typeof i=="function"?i:t,i&&l.pop(),l.length&&l[0]===n[0]?Go(l,t,i):[]});function M_(n,i){return n==null?"":Cg.call(n,i)}function br(n){var i=n==null?0:n.length;return i?n[i-1]:t}function L_(n,i,l){var f=n==null?0:n.length;if(!f)return-1;var _=f;return l!==t&&(_=Se(l),_=_<0?wt(f+_,0):$t(_,f-1)),i===i?mg(n,i,_):_i(n,ou,_,!0)}function N_(n,i){return n&&n.length?Fu(n,Se(i)):t}var F_=Ae(Td);function Td(n,i){return n&&n.length&&i&&i.length?Jo(n,i):n}function j_(n,i,l){return n&&n.length&&i&&i.length?Jo(n,i,ue(l,2)):n}function q_(n,i,l){return n&&n.length&&i&&i.length?Jo(n,i,t,l):n}var z_=sn(function(n,i){var l=n==null?0:n.length,f=Zo(n,i);return zu(n,st(i,function(_){return on(_,l)?+_:_}).sort(Qu)),f});function U_(n,i){var l=[];if(!(n&&n.length))return l;var f=-1,_=[],S=n.length;for(i=ue(i,3);++f<S;){var A=n[f];i(A,f,n)&&(l.push(A),_.push(f))}return zu(n,_),l}function _l(n){return n==null?n:Mg.call(n)}function H_(n,i,l){var f=n==null?0:n.length;return f?(l&&typeof l!="number"&&Ut(n,i,l)?(i=0,l=f):(i=i==null?0:Se(i),l=l===t?f:Se(l)),yr(n,i,l)):[]}function Z_(n,i){return Fi(n,i)}function B_(n,i,l){return tl(n,i,ue(l,2))}function V_(n,i){var l=n==null?0:n.length;if(l){var f=Fi(n,i);if(f<l&&Tr(n[f],i))return f}return-1}function W_(n,i){return Fi(n,i,!0)}function G_(n,i,l){return tl(n,i,ue(l,2),!0)}function K_(n,i){var l=n==null?0:n.length;if(l){var f=Fi(n,i,!0)-1;if(Tr(n[f],i))return f}return-1}function Y_(n){return n&&n.length?Hu(n):[]}function Q_(n,i){return n&&n.length?Hu(n,ue(i,2)):[]}function J_(n){var i=n==null?0:n.length;return i?yr(n,1,i):[]}function X_(n,i,l){return n&&n.length?(i=l||i===t?1:Se(i),yr(n,0,i<0?0:i)):[]}function e0(n,i,l){var f=n==null?0:n.length;return f?(i=l||i===t?1:Se(i),i=f-i,yr(n,i<0?0:i,f)):[]}function t0(n,i){return n&&n.length?ji(n,ue(i,3),!1,!0):[]}function r0(n,i){return n&&n.length?ji(n,ue(i,3)):[]}var n0=Ae(function(n){return Sn(Ct(n,1,gt,!0))}),a0=Ae(function(n){var i=br(n);return gt(i)&&(i=t),Sn(Ct(n,1,gt,!0),ue(i,2))}),i0=Ae(function(n){var i=br(n);return i=typeof i=="function"?i:t,Sn(Ct(n,1,gt,!0),t,i)});function s0(n){return n&&n.length?Sn(n):[]}function o0(n,i){return n&&n.length?Sn(n,ue(i,2)):[]}function l0(n,i){return i=typeof i=="function"?i:t,n&&n.length?Sn(n,t,i):[]}function yl(n){if(!(n&&n.length))return[];var i=0;return n=_n(n,function(l){if(gt(l))return i=wt(l.length,i),!0}),Lo(i,function(l){return st(n,Io(l))})}function kd(n,i){if(!(n&&n.length))return[];var l=yl(n);return i==null?l:st(l,function(f){return ar(i,t,f)})}var c0=Ae(function(n,i){return gt(n)?qa(n,i):[]}),u0=Ae(function(n){return nl(_n(n,gt))}),d0=Ae(function(n){var i=br(n);return gt(i)&&(i=t),nl(_n(n,gt),ue(i,2))}),f0=Ae(function(n){var i=br(n);return i=typeof i=="function"?i:t,nl(_n(n,gt),t,i)}),h0=Ae(yl);function p0(n,i){return Wu(n||[],i||[],ja)}function m0(n,i){return Wu(n||[],i||[],Ha)}var g0=Ae(function(n){var i=n.length,l=i>1?n[i-1]:t;return l=typeof l=="function"?(n.pop(),l):t,kd(n,l)});function Od(n){var i=E(n);return i.__chain__=!0,i}function v0(n,i){return i(n),n}function Gi(n,i){return i(n)}var _0=sn(function(n){var i=n.length,l=i?n[0]:0,f=this.__wrapped__,_=function(S){return Zo(S,n)};return i>1||this.__actions__.length||!(f instanceof De)||!on(l)?this.thru(_):(f=f.slice(l,+l+(i?1:0)),f.__actions__.push({func:Gi,args:[_],thisArg:t}),new vr(f,this.__chain__).thru(function(S){return i&&!S.length&&S.push(t),S}))});function y0(){return Od(this)}function b0(){return new vr(this.value(),this.__chain__)}function w0(){this.__values__===t&&(this.__values__=Zd(this.value()));var n=this.__index__>=this.__values__.length,i=n?t:this.__values__[this.__index__++];return{done:n,value:i}}function E0(){return this}function x0(n){for(var i,l=this;l instanceof Ii;){var f=xd(l);f.__index__=0,f.__values__=t,i?_.__wrapped__=f:i=f;var _=f;l=l.__wrapped__}return _.__wrapped__=n,i}function S0(){var n=this.__wrapped__;if(n instanceof De){var i=n;return this.__actions__.length&&(i=new De(this)),i=i.reverse(),i.__actions__.push({func:Gi,args:[_l],thisArg:t}),new vr(i,this.__chain__)}return this.thru(_l)}function P0(){return Vu(this.__wrapped__,this.__actions__)}var R0=qi(function(n,i,l){We.call(n,l)?++n[l]:nn(n,l,1)});function A0(n,i,l){var f=we(n)?iu:vv;return l&&Ut(n,i,l)&&(i=t),f(n,ue(i,3))}function T0(n,i){var l=we(n)?_n:ku;return l(n,ue(i,3))}var k0=nd(Sd),O0=nd(Pd);function C0(n,i){return Ct(Ki(n,i),1)}function D0(n,i){return Ct(Ki(n,i),ge)}function I0(n,i,l){return l=l===t?1:Se(l),Ct(Ki(n,i),l)}function Cd(n,i){var l=we(n)?mr:xn;return l(n,ue(i,3))}function Dd(n,i){var l=we(n)?Jm:Tu;return l(n,ue(i,3))}var $0=qi(function(n,i,l){We.call(n,l)?n[l].push(i):nn(n,l,[i])});function M0(n,i,l,f){n=Qt(n)?n:_a(n),l=l&&!f?Se(l):0;var _=n.length;return l<0&&(l=wt(_+l,0)),es(n)?l<=_&&n.indexOf(i,l)>-1:!!_&&oa(n,i,l)>-1}var L0=Ae(function(n,i,l){var f=-1,_=typeof i=="function",S=Qt(n)?N(n.length):[];return xn(n,function(A){S[++f]=_?ar(i,A,l):za(A,i,l)}),S}),N0=qi(function(n,i,l){nn(n,l,i)});function Ki(n,i){var l=we(n)?st:Mu;return l(n,ue(i,3))}function F0(n,i,l,f){return n==null?[]:(we(i)||(i=i==null?[]:[i]),l=f?t:l,we(l)||(l=l==null?[]:[l]),ju(n,i,l))}var j0=qi(function(n,i,l){n[l?0:1].push(i)},function(){return[[],[]]});function q0(n,i,l){var f=we(n)?Co:cu,_=arguments.length<3;return f(n,ue(i,4),l,_,xn)}function z0(n,i,l){var f=we(n)?Xm:cu,_=arguments.length<3;return f(n,ue(i,4),l,_,Tu)}function U0(n,i){var l=we(n)?_n:ku;return l(n,Ji(ue(i,3)))}function H0(n){var i=we(n)?Su:Mv;return i(n)}function Z0(n,i,l){(l?Ut(n,i,l):i===t)?i=1:i=Se(i);var f=we(n)?fv:Lv;return f(n,i)}function B0(n){var i=we(n)?hv:Fv;return i(n)}function V0(n){if(n==null)return 0;if(Qt(n))return es(n)?ca(n):n.length;var i=Mt(n);return i==ye||i==Je?n.size:Yo(n).length}function W0(n,i,l){var f=we(n)?Do:jv;return l&&Ut(n,i,l)&&(i=t),f(n,ue(i,3))}var G0=Ae(function(n,i){if(n==null)return[];var l=i.length;return l>1&&Ut(n,i[0],i[1])?i=[]:l>2&&Ut(i[0],i[1],i[2])&&(i=[i[0]]),ju(n,Ct(i,1),[])}),Yi=Tg||function(){return Pt.Date.now()};function K0(n,i){if(typeof i!="function")throw new gr(c);return n=Se(n),function(){if(--n<1)return i.apply(this,arguments)}}function Id(n,i,l){return i=l?t:i,i=n&&i==null?n.length:i,an(n,H,t,t,t,t,i)}function $d(n,i){var l;if(typeof i!="function")throw new gr(c);return n=Se(n),function(){return--n>0&&(l=i.apply(this,arguments)),n<=1&&(i=t),l}}var bl=Ae(function(n,i,l){var f=b;if(l.length){var _=bn(l,ga(bl));f|=M}return an(n,f,i,l,_)}),Md=Ae(function(n,i,l){var f=b|R;if(l.length){var _=bn(l,ga(Md));f|=M}return an(i,f,n,l,_)});function Ld(n,i,l){i=l?t:i;var f=an(n,I,t,t,t,t,t,i);return f.placeholder=Ld.placeholder,f}function Nd(n,i,l){i=l?t:i;var f=an(n,j,t,t,t,t,t,i);return f.placeholder=Nd.placeholder,f}function Fd(n,i,l){var f,_,S,A,k,D,U=0,Z=!1,V=!1,X=!0;if(typeof n!="function")throw new gr(c);i=wr(i)||0,ut(l)&&(Z=!!l.leading,V="maxWait"in l,S=V?wt(wr(l.maxWait)||0,i):S,X="trailing"in l?!!l.trailing:X);function oe(vt){var kr=f,un=_;return f=_=t,U=vt,A=n.apply(un,kr),A}function de(vt){return U=vt,k=Va(Te,i),Z?oe(vt):A}function Re(vt){var kr=vt-D,un=vt-U,nf=i-kr;return V?$t(nf,S-un):nf}function fe(vt){var kr=vt-D,un=vt-U;return D===t||kr>=i||kr<0||V&&un>=S}function Te(){var vt=Yi();if(fe(vt))return $e(vt);k=Va(Te,Re(vt))}function $e(vt){return k=t,X&&f?oe(vt):(f=_=t,A)}function lr(){k!==t&&Gu(k),U=0,f=D=_=k=t}function Ht(){return k===t?A:$e(Yi())}function cr(){var vt=Yi(),kr=fe(vt);if(f=arguments,_=this,D=vt,kr){if(k===t)return de(D);if(V)return Gu(k),k=Va(Te,i),oe(D)}return k===t&&(k=Va(Te,i)),A}return cr.cancel=lr,cr.flush=Ht,cr}var Y0=Ae(function(n,i){return Au(n,1,i)}),Q0=Ae(function(n,i,l){return Au(n,wr(i)||0,l)});function J0(n){return an(n,B)}function Qi(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new gr(c);var l=function(){var f=arguments,_=i?i.apply(this,f):f[0],S=l.cache;if(S.has(_))return S.get(_);var A=n.apply(this,f);return l.cache=S.set(_,A)||S,A};return l.cache=new(Qi.Cache||rn),l}Qi.Cache=rn;function Ji(n){if(typeof n!="function")throw new gr(c);return function(){var i=arguments;switch(i.length){case 0:return!n.call(this);case 1:return!n.call(this,i[0]);case 2:return!n.call(this,i[0],i[1]);case 3:return!n.call(this,i[0],i[1],i[2])}return!n.apply(this,i)}}function X0(n){return $d(2,n)}var ey=qv(function(n,i){i=i.length==1&&we(i[0])?st(i[0],ir(ue())):st(Ct(i,1),ir(ue()));var l=i.length;return Ae(function(f){for(var _=-1,S=$t(f.length,l);++_<S;)f[_]=i[_].call(this,f[_]);return ar(n,this,f)})}),wl=Ae(function(n,i){var l=bn(i,ga(wl));return an(n,M,t,i,l)}),jd=Ae(function(n,i){var l=bn(i,ga(jd));return an(n,$,t,i,l)}),ty=sn(function(n,i){return an(n,W,t,t,t,i)});function ry(n,i){if(typeof n!="function")throw new gr(c);return i=i===t?i:Se(i),Ae(n,i)}function ny(n,i){if(typeof n!="function")throw new gr(c);return i=i==null?0:wt(Se(i),0),Ae(function(l){var f=l[i],_=Rn(l,0,i);return f&&yn(_,f),ar(n,this,_)})}function ay(n,i,l){var f=!0,_=!0;if(typeof n!="function")throw new gr(c);return ut(l)&&(f="leading"in l?!!l.leading:f,_="trailing"in l?!!l.trailing:_),Fd(n,i,{leading:f,maxWait:i,trailing:_})}function iy(n){return Id(n,1)}function sy(n,i){return wl(il(i),n)}function oy(){if(!arguments.length)return[];var n=arguments[0];return we(n)?n:[n]}function ly(n){return _r(n,p)}function cy(n,i){return i=typeof i=="function"?i:t,_r(n,p,i)}function uy(n){return _r(n,g|p)}function dy(n,i){return i=typeof i=="function"?i:t,_r(n,g|p,i)}function fy(n,i){return i==null||Ru(n,i,Rt(i))}function Tr(n,i){return n===i||n!==n&&i!==i}var hy=Zi(Wo),py=Zi(function(n,i){return n>=i}),Hn=Du((function(){return arguments})())?Du:function(n){return ht(n)&&We.call(n,"callee")&&!_u.call(n,"callee")},we=N.isArray,my=Xc?ir(Xc):xv;function Qt(n){return n!=null&&Xi(n.length)&&!ln(n)}function gt(n){return ht(n)&&Qt(n)}function gy(n){return n===!0||n===!1||ht(n)&&zt(n)==Vt}var An=Og||Dl,vy=eu?ir(eu):Sv;function _y(n){return ht(n)&&n.nodeType===1&&!Wa(n)}function yy(n){if(n==null)return!0;if(Qt(n)&&(we(n)||typeof n=="string"||typeof n.splice=="function"||An(n)||va(n)||Hn(n)))return!n.length;var i=Mt(n);if(i==ye||i==Je)return!n.size;if(Ba(n))return!Yo(n).length;for(var l in n)if(We.call(n,l))return!1;return!0}function by(n,i){return Ua(n,i)}function wy(n,i,l){l=typeof l=="function"?l:t;var f=l?l(n,i):t;return f===t?Ua(n,i,t,l):!!f}function El(n){if(!ht(n))return!1;var i=zt(n);return i==Ye||i==dt||typeof n.message=="string"&&typeof n.name=="string"&&!Wa(n)}function Ey(n){return typeof n=="number"&&bu(n)}function ln(n){if(!ut(n))return!1;var i=zt(n);return i==dr||i==_t||i==Tt||i==yt}function qd(n){return typeof n=="number"&&n==Se(n)}function Xi(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=_e}function ut(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}function ht(n){return n!=null&&typeof n=="object"}var zd=tu?ir(tu):Rv;function xy(n,i){return n===i||Ko(n,i,fl(i))}function Sy(n,i,l){return l=typeof l=="function"?l:t,Ko(n,i,fl(i),l)}function Py(n){return Ud(n)&&n!=+n}function Ry(n){if(c_(n))throw new ve(o);return Iu(n)}function Ay(n){return n===null}function Ty(n){return n==null}function Ud(n){return typeof n=="number"||ht(n)&&zt(n)==Wt}function Wa(n){if(!ht(n)||zt(n)!=kt)return!1;var i=Ri(n);if(i===null)return!0;var l=We.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&Ei.call(l)==Sg}var xl=ru?ir(ru):Av;function ky(n){return qd(n)&&n>=-_e&&n<=_e}var Hd=nu?ir(nu):Tv;function es(n){return typeof n=="string"||!we(n)&&ht(n)&&zt(n)==mt}function or(n){return typeof n=="symbol"||ht(n)&&zt(n)==Nt}var va=au?ir(au):kv;function Oy(n){return n===t}function Cy(n){return ht(n)&&Mt(n)==Fr}function Dy(n){return ht(n)&&zt(n)==Ra}var Iy=Zi(Qo),$y=Zi(function(n,i){return n<=i});function Zd(n){if(!n)return[];if(Qt(n))return es(n)?Rr(n):Yt(n);if($a&&n[$a])return fg(n[$a]());var i=Mt(n),l=i==ye?Fo:i==Je?yi:_a;return l(n)}function cn(n){if(!n)return n===0?n:0;if(n=wr(n),n===ge||n===-ge){var i=n<0?-1:1;return i*xe}return n===n?n:0}function Se(n){var i=cn(n),l=i%1;return i===i?l?i-l:i:0}function Bd(n){return n?jn(Se(n),0,Fe):0}function wr(n){if(typeof n=="number")return n;if(or(n))return ce;if(ut(n)){var i=typeof n.valueOf=="function"?n.valueOf():n;n=ut(i)?i+"":i}if(typeof n!="string")return n===0?n:+n;n=uu(n);var l=nt.test(n);return l||Xe.test(n)?Km(n.slice(2),l?2:8):Ce.test(n)?ce:+n}function Vd(n){return Hr(n,Jt(n))}function My(n){return n?jn(Se(n),-_e,_e):n===0?n:0}function Be(n){return n==null?"":sr(n)}var Ly=pa(function(n,i){if(Ba(i)||Qt(i)){Hr(i,Rt(i),n);return}for(var l in i)We.call(i,l)&&ja(n,l,i[l])}),Wd=pa(function(n,i){Hr(i,Jt(i),n)}),ts=pa(function(n,i,l,f){Hr(i,Jt(i),n,f)}),Ny=pa(function(n,i,l,f){Hr(i,Rt(i),n,f)}),Fy=sn(Zo);function jy(n,i){var l=ha(n);return i==null?l:Pu(l,i)}var qy=Ae(function(n,i){n=Qe(n);var l=-1,f=i.length,_=f>2?i[2]:t;for(_&&Ut(i[0],i[1],_)&&(f=1);++l<f;)for(var S=i[l],A=Jt(S),k=-1,D=A.length;++k<D;){var U=A[k],Z=n[U];(Z===t||Tr(Z,ua[U])&&!We.call(n,U))&&(n[U]=S[U])}return n}),zy=Ae(function(n){return n.push(t,ud),ar(Gd,t,n)});function Uy(n,i){return su(n,ue(i,3),Ur)}function Hy(n,i){return su(n,ue(i,3),Vo)}function Zy(n,i){return n==null?n:Bo(n,ue(i,3),Jt)}function By(n,i){return n==null?n:Ou(n,ue(i,3),Jt)}function Vy(n,i){return n&&Ur(n,ue(i,3))}function Wy(n,i){return n&&Vo(n,ue(i,3))}function Gy(n){return n==null?[]:Li(n,Rt(n))}function Ky(n){return n==null?[]:Li(n,Jt(n))}function Sl(n,i,l){var f=n==null?t:qn(n,i);return f===t?l:f}function Yy(n,i){return n!=null&&hd(n,i,yv)}function Pl(n,i){return n!=null&&hd(n,i,bv)}var Qy=id(function(n,i,l){i!=null&&typeof i.toString!="function"&&(i=xi.call(i)),n[i]=l},Al(Xt)),Jy=id(function(n,i,l){i!=null&&typeof i.toString!="function"&&(i=xi.call(i)),We.call(n,i)?n[i].push(l):n[i]=[l]},ue),Xy=Ae(za);function Rt(n){return Qt(n)?xu(n):Yo(n)}function Jt(n){return Qt(n)?xu(n,!0):Ov(n)}function e1(n,i){var l={};return i=ue(i,3),Ur(n,function(f,_,S){nn(l,i(f,_,S),f)}),l}function t1(n,i){var l={};return i=ue(i,3),Ur(n,function(f,_,S){nn(l,_,i(f,_,S))}),l}var r1=pa(function(n,i,l){Ni(n,i,l)}),Gd=pa(function(n,i,l,f){Ni(n,i,l,f)}),n1=sn(function(n,i){var l={};if(n==null)return l;var f=!1;i=st(i,function(S){return S=Pn(S,n),f||(f=S.length>1),S}),Hr(n,ul(n),l),f&&(l=_r(l,g|v|p,Qv));for(var _=i.length;_--;)rl(l,i[_]);return l});function a1(n,i){return Kd(n,Ji(ue(i)))}var i1=sn(function(n,i){return n==null?{}:Dv(n,i)});function Kd(n,i){if(n==null)return{};var l=st(ul(n),function(f){return[f]});return i=ue(i),qu(n,l,function(f,_){return i(f,_[0])})}function s1(n,i,l){i=Pn(i,n);var f=-1,_=i.length;for(_||(_=1,n=t);++f<_;){var S=n==null?t:n[Zr(i[f])];S===t&&(f=_,S=l),n=ln(S)?S.call(n):S}return n}function o1(n,i,l){return n==null?n:Ha(n,i,l)}function l1(n,i,l,f){return f=typeof f=="function"?f:t,n==null?n:Ha(n,i,l,f)}var Yd=ld(Rt),Qd=ld(Jt);function c1(n,i,l){var f=we(n),_=f||An(n)||va(n);if(i=ue(i,4),l==null){var S=n&&n.constructor;_?l=f?new S:[]:ut(n)?l=ln(S)?ha(Ri(n)):{}:l={}}return(_?mr:Ur)(n,function(A,k,D){return i(l,A,k,D)}),l}function u1(n,i){return n==null?!0:rl(n,i)}function d1(n,i,l){return n==null?n:Bu(n,i,il(l))}function f1(n,i,l,f){return f=typeof f=="function"?f:t,n==null?n:Bu(n,i,il(l),f)}function _a(n){return n==null?[]:No(n,Rt(n))}function h1(n){return n==null?[]:No(n,Jt(n))}function p1(n,i,l){return l===t&&(l=i,i=t),l!==t&&(l=wr(l),l=l===l?l:0),i!==t&&(i=wr(i),i=i===i?i:0),jn(wr(n),i,l)}function m1(n,i,l){return i=cn(i),l===t?(l=i,i=0):l=cn(l),n=wr(n),wv(n,i,l)}function g1(n,i,l){if(l&&typeof l!="boolean"&&Ut(n,i,l)&&(i=l=t),l===t&&(typeof i=="boolean"?(l=i,i=t):typeof n=="boolean"&&(l=n,n=t)),n===t&&i===t?(n=0,i=1):(n=cn(n),i===t?(i=n,n=0):i=cn(i)),n>i){var f=n;n=i,i=f}if(l||n%1||i%1){var _=wu();return $t(n+_*(i-n+Gm("1e-"+((_+"").length-1))),i)}return Xo(n,i)}var v1=ma(function(n,i,l){return i=i.toLowerCase(),n+(l?Jd(i):i)});function Jd(n){return Rl(Be(n).toLowerCase())}function Xd(n){return n=Be(n),n&&n.replace(at,og).replace(Gc,"")}function _1(n,i,l){n=Be(n),i=sr(i);var f=n.length;l=l===t?f:jn(Se(l),0,f);var _=l;return l-=i.length,l>=0&&n.slice(l,_)==i}function y1(n){return n=Be(n),n&&Eo.test(n)?n.replace(si,lg):n}function b1(n){return n=Be(n),n&&ui.test(n)?n.replace(Oa,"\\$&"):n}var w1=ma(function(n,i,l){return n+(l?"-":"")+i.toLowerCase()}),E1=ma(function(n,i,l){return n+(l?" ":"")+i.toLowerCase()}),x1=rd("toLowerCase");function S1(n,i,l){n=Be(n),i=Se(i);var f=i?ca(n):0;if(!i||f>=i)return n;var _=(i-f)/2;return Hi(Oi(_),l)+n+Hi(ki(_),l)}function P1(n,i,l){n=Be(n),i=Se(i);var f=i?ca(n):0;return i&&f<i?n+Hi(i-f,l):n}function R1(n,i,l){n=Be(n),i=Se(i);var f=i?ca(n):0;return i&&f<i?Hi(i-f,l)+n:n}function A1(n,i,l){return l||i==null?i=0:i&&(i=+i),$g(Be(n).replace(T,""),i||0)}function T1(n,i,l){return(l?Ut(n,i,l):i===t)?i=1:i=Se(i),el(Be(n),i)}function k1(){var n=arguments,i=Be(n[0]);return n.length<3?i:i.replace(n[1],n[2])}var O1=ma(function(n,i,l){return n+(l?"_":"")+i.toLowerCase()});function C1(n,i,l){return l&&typeof l!="number"&&Ut(n,i,l)&&(i=l=t),l=l===t?Fe:l>>>0,l?(n=Be(n),n&&(typeof i=="string"||i!=null&&!xl(i))&&(i=sr(i),!i&&la(n))?Rn(Rr(n),0,l):n.split(i,l)):[]}var D1=ma(function(n,i,l){return n+(l?" ":"")+Rl(i)});function I1(n,i,l){return n=Be(n),l=l==null?0:jn(Se(l),0,n.length),i=sr(i),n.slice(l,l+i.length)==i}function $1(n,i,l){var f=E.templateSettings;l&&Ut(n,i,l)&&(i=t),n=Be(n),i=ts({},i,f,cd);var _=ts({},i.imports,f.imports,cd),S=Rt(_),A=No(_,S),k,D,U=0,Z=i.interpolate||je,V="__p += '",X=jo((i.escape||je).source+"|"+Z.source+"|"+(Z===Xn?ze:je).source+"|"+(i.evaluate||je).source+"|$","g"),oe="//# sourceURL="+(We.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hm+"]")+`
`;n.replace(X,function(fe,Te,$e,lr,Ht,cr){return $e||($e=lr),V+=n.slice(U,cr).replace(Kr,cg),Te&&(k=!0,V+=`' +
__e(`+Te+`) +
'`),Ht&&(D=!0,V+=`';
`+Ht+`;
__p += '`),$e&&(V+=`' +
((__t = (`+$e+`)) == null ? '' : __t) +
'`),U=cr+fe.length,fe}),V+=`';
`;var de=We.call(i,"variable")&&i.variable;if(!de)V=`with (obj) {
`+V+`
}
`;else if(be.test(de))throw new ve(u);V=(D?V.replace(yo,""):V).replace(bo,"$1").replace(wo,"$1;"),V="function("+(de||"obj")+`) {
`+(de?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+V+`return __p
}`;var Re=tf(function(){return He(S,oe+"return "+V).apply(t,A)});if(Re.source=V,El(Re))throw Re;return Re}function M1(n){return Be(n).toLowerCase()}function L1(n){return Be(n).toUpperCase()}function N1(n,i,l){if(n=Be(n),n&&(l||i===t))return uu(n);if(!n||!(i=sr(i)))return n;var f=Rr(n),_=Rr(i),S=du(f,_),A=fu(f,_)+1;return Rn(f,S,A).join("")}function F1(n,i,l){if(n=Be(n),n&&(l||i===t))return n.slice(0,pu(n)+1);if(!n||!(i=sr(i)))return n;var f=Rr(n),_=fu(f,Rr(i))+1;return Rn(f,0,_).join("")}function j1(n,i,l){if(n=Be(n),n&&(l||i===t))return n.replace(T,"");if(!n||!(i=sr(i)))return n;var f=Rr(n),_=du(f,Rr(i));return Rn(f,_).join("")}function q1(n,i){var l=J,f=te;if(ut(i)){var _="separator"in i?i.separator:_;l="length"in i?Se(i.length):l,f="omission"in i?sr(i.omission):f}n=Be(n);var S=n.length;if(la(n)){var A=Rr(n);S=A.length}if(l>=S)return n;var k=l-ca(f);if(k<1)return f;var D=A?Rn(A,0,k).join(""):n.slice(0,k);if(_===t)return D+f;if(A&&(k+=D.length-k),xl(_)){if(n.slice(k).search(_)){var U,Z=D;for(_.global||(_=jo(_.source,Be(ct.exec(_))+"g")),_.lastIndex=0;U=_.exec(Z);)var V=U.index;D=D.slice(0,V===t?k:V)}}else if(n.indexOf(sr(_),k)!=k){var X=D.lastIndexOf(_);X>-1&&(D=D.slice(0,X))}return D+f}function z1(n){return n=Be(n),n&&pn.test(n)?n.replace(ii,gg):n}var U1=ma(function(n,i,l){return n+(l?" ":"")+i.toUpperCase()}),Rl=rd("toUpperCase");function ef(n,i,l){return n=Be(n),i=l?t:i,i===t?dg(n)?yg(n):rg(n):n.match(i)||[]}var tf=Ae(function(n,i){try{return ar(n,t,i)}catch(l){return El(l)?l:new ve(l)}}),H1=sn(function(n,i){return mr(i,function(l){l=Zr(l),nn(n,l,bl(n[l],n))}),n});function Z1(n){var i=n==null?0:n.length,l=ue();return n=i?st(n,function(f){if(typeof f[1]!="function")throw new gr(c);return[l(f[0]),f[1]]}):[],Ae(function(f){for(var _=-1;++_<i;){var S=n[_];if(ar(S[0],this,f))return ar(S[1],this,f)}})}function B1(n){return gv(_r(n,g))}function Al(n){return function(){return n}}function V1(n,i){return n==null||n!==n?i:n}var W1=ad(),G1=ad(!0);function Xt(n){return n}function Tl(n){return $u(typeof n=="function"?n:_r(n,g))}function K1(n){return Lu(_r(n,g))}function Y1(n,i){return Nu(n,_r(i,g))}var Q1=Ae(function(n,i){return function(l){return za(l,n,i)}}),J1=Ae(function(n,i){return function(l){return za(n,l,i)}});function kl(n,i,l){var f=Rt(i),_=Li(i,f);l==null&&!(ut(i)&&(_.length||!f.length))&&(l=i,i=n,n=this,_=Li(i,Rt(i)));var S=!(ut(l)&&"chain"in l)||!!l.chain,A=ln(n);return mr(_,function(k){var D=i[k];n[k]=D,A&&(n.prototype[k]=function(){var U=this.__chain__;if(S||U){var Z=n(this.__wrapped__),V=Z.__actions__=Yt(this.__actions__);return V.push({func:D,args:arguments,thisArg:n}),Z.__chain__=U,Z}return D.apply(n,yn([this.value()],arguments))})}),n}function X1(){return Pt._===this&&(Pt._=Pg),this}function Ol(){}function eb(n){return n=Se(n),Ae(function(i){return Fu(i,n)})}var tb=ol(st),rb=ol(iu),nb=ol(Do);function rf(n){return pl(n)?Io(Zr(n)):Iv(n)}function ab(n){return function(i){return n==null?t:qn(n,i)}}var ib=sd(),sb=sd(!0);function Cl(){return[]}function Dl(){return!1}function ob(){return{}}function lb(){return""}function cb(){return!0}function ub(n,i){if(n=Se(n),n<1||n>_e)return[];var l=Fe,f=$t(n,Fe);i=ue(i),n-=Fe;for(var _=Lo(f,i);++l<n;)i(l);return _}function db(n){return we(n)?st(n,Zr):or(n)?[n]:Yt(Ed(Be(n)))}function fb(n){var i=++xg;return Be(n)+i}var hb=Ui(function(n,i){return n+i},0),pb=ll("ceil"),mb=Ui(function(n,i){return n/i},1),gb=ll("floor");function vb(n){return n&&n.length?Mi(n,Xt,Wo):t}function _b(n,i){return n&&n.length?Mi(n,ue(i,2),Wo):t}function yb(n){return lu(n,Xt)}function bb(n,i){return lu(n,ue(i,2))}function wb(n){return n&&n.length?Mi(n,Xt,Qo):t}function Eb(n,i){return n&&n.length?Mi(n,ue(i,2),Qo):t}var xb=Ui(function(n,i){return n*i},1),Sb=ll("round"),Pb=Ui(function(n,i){return n-i},0);function Rb(n){return n&&n.length?Mo(n,Xt):0}function Ab(n,i){return n&&n.length?Mo(n,ue(i,2)):0}return E.after=K0,E.ary=Id,E.assign=Ly,E.assignIn=Wd,E.assignInWith=ts,E.assignWith=Ny,E.at=Fy,E.before=$d,E.bind=bl,E.bindAll=H1,E.bindKey=Md,E.castArray=oy,E.chain=Od,E.chunk=g_,E.compact=v_,E.concat=__,E.cond=Z1,E.conforms=B1,E.constant=Al,E.countBy=R0,E.create=jy,E.curry=Ld,E.curryRight=Nd,E.debounce=Fd,E.defaults=qy,E.defaultsDeep=zy,E.defer=Y0,E.delay=Q0,E.difference=y_,E.differenceBy=b_,E.differenceWith=w_,E.drop=E_,E.dropRight=x_,E.dropRightWhile=S_,E.dropWhile=P_,E.fill=R_,E.filter=T0,E.flatMap=C0,E.flatMapDeep=D0,E.flatMapDepth=I0,E.flatten=Rd,E.flattenDeep=A_,E.flattenDepth=T_,E.flip=J0,E.flow=W1,E.flowRight=G1,E.fromPairs=k_,E.functions=Gy,E.functionsIn=Ky,E.groupBy=$0,E.initial=C_,E.intersection=D_,E.intersectionBy=I_,E.intersectionWith=$_,E.invert=Qy,E.invertBy=Jy,E.invokeMap=L0,E.iteratee=Tl,E.keyBy=N0,E.keys=Rt,E.keysIn=Jt,E.map=Ki,E.mapKeys=e1,E.mapValues=t1,E.matches=K1,E.matchesProperty=Y1,E.memoize=Qi,E.merge=r1,E.mergeWith=Gd,E.method=Q1,E.methodOf=J1,E.mixin=kl,E.negate=Ji,E.nthArg=eb,E.omit=n1,E.omitBy=a1,E.once=X0,E.orderBy=F0,E.over=tb,E.overArgs=ey,E.overEvery=rb,E.overSome=nb,E.partial=wl,E.partialRight=jd,E.partition=j0,E.pick=i1,E.pickBy=Kd,E.property=rf,E.propertyOf=ab,E.pull=F_,E.pullAll=Td,E.pullAllBy=j_,E.pullAllWith=q_,E.pullAt=z_,E.range=ib,E.rangeRight=sb,E.rearg=ty,E.reject=U0,E.remove=U_,E.rest=ry,E.reverse=_l,E.sampleSize=Z0,E.set=o1,E.setWith=l1,E.shuffle=B0,E.slice=H_,E.sortBy=G0,E.sortedUniq=Y_,E.sortedUniqBy=Q_,E.split=C1,E.spread=ny,E.tail=J_,E.take=X_,E.takeRight=e0,E.takeRightWhile=t0,E.takeWhile=r0,E.tap=v0,E.throttle=ay,E.thru=Gi,E.toArray=Zd,E.toPairs=Yd,E.toPairsIn=Qd,E.toPath=db,E.toPlainObject=Vd,E.transform=c1,E.unary=iy,E.union=n0,E.unionBy=a0,E.unionWith=i0,E.uniq=s0,E.uniqBy=o0,E.uniqWith=l0,E.unset=u1,E.unzip=yl,E.unzipWith=kd,E.update=d1,E.updateWith=f1,E.values=_a,E.valuesIn=h1,E.without=c0,E.words=ef,E.wrap=sy,E.xor=u0,E.xorBy=d0,E.xorWith=f0,E.zip=h0,E.zipObject=p0,E.zipObjectDeep=m0,E.zipWith=g0,E.entries=Yd,E.entriesIn=Qd,E.extend=Wd,E.extendWith=ts,kl(E,E),E.add=hb,E.attempt=tf,E.camelCase=v1,E.capitalize=Jd,E.ceil=pb,E.clamp=p1,E.clone=ly,E.cloneDeep=uy,E.cloneDeepWith=dy,E.cloneWith=cy,E.conformsTo=fy,E.deburr=Xd,E.defaultTo=V1,E.divide=mb,E.endsWith=_1,E.eq=Tr,E.escape=y1,E.escapeRegExp=b1,E.every=A0,E.find=k0,E.findIndex=Sd,E.findKey=Uy,E.findLast=O0,E.findLastIndex=Pd,E.findLastKey=Hy,E.floor=gb,E.forEach=Cd,E.forEachRight=Dd,E.forIn=Zy,E.forInRight=By,E.forOwn=Vy,E.forOwnRight=Wy,E.get=Sl,E.gt=hy,E.gte=py,E.has=Yy,E.hasIn=Pl,E.head=Ad,E.identity=Xt,E.includes=M0,E.indexOf=O_,E.inRange=m1,E.invoke=Xy,E.isArguments=Hn,E.isArray=we,E.isArrayBuffer=my,E.isArrayLike=Qt,E.isArrayLikeObject=gt,E.isBoolean=gy,E.isBuffer=An,E.isDate=vy,E.isElement=_y,E.isEmpty=yy,E.isEqual=by,E.isEqualWith=wy,E.isError=El,E.isFinite=Ey,E.isFunction=ln,E.isInteger=qd,E.isLength=Xi,E.isMap=zd,E.isMatch=xy,E.isMatchWith=Sy,E.isNaN=Py,E.isNative=Ry,E.isNil=Ty,E.isNull=Ay,E.isNumber=Ud,E.isObject=ut,E.isObjectLike=ht,E.isPlainObject=Wa,E.isRegExp=xl,E.isSafeInteger=ky,E.isSet=Hd,E.isString=es,E.isSymbol=or,E.isTypedArray=va,E.isUndefined=Oy,E.isWeakMap=Cy,E.isWeakSet=Dy,E.join=M_,E.kebabCase=w1,E.last=br,E.lastIndexOf=L_,E.lowerCase=E1,E.lowerFirst=x1,E.lt=Iy,E.lte=$y,E.max=vb,E.maxBy=_b,E.mean=yb,E.meanBy=bb,E.min=wb,E.minBy=Eb,E.stubArray=Cl,E.stubFalse=Dl,E.stubObject=ob,E.stubString=lb,E.stubTrue=cb,E.multiply=xb,E.nth=N_,E.noConflict=X1,E.noop=Ol,E.now=Yi,E.pad=S1,E.padEnd=P1,E.padStart=R1,E.parseInt=A1,E.random=g1,E.reduce=q0,E.reduceRight=z0,E.repeat=T1,E.replace=k1,E.result=s1,E.round=Sb,E.runInContext=C,E.sample=H0,E.size=V0,E.snakeCase=O1,E.some=W0,E.sortedIndex=Z_,E.sortedIndexBy=B_,E.sortedIndexOf=V_,E.sortedLastIndex=W_,E.sortedLastIndexBy=G_,E.sortedLastIndexOf=K_,E.startCase=D1,E.startsWith=I1,E.subtract=Pb,E.sum=Rb,E.sumBy=Ab,E.template=$1,E.times=ub,E.toFinite=cn,E.toInteger=Se,E.toLength=Bd,E.toLower=M1,E.toNumber=wr,E.toSafeInteger=My,E.toString=Be,E.toUpper=L1,E.trim=N1,E.trimEnd=F1,E.trimStart=j1,E.truncate=q1,E.unescape=z1,E.uniqueId=fb,E.upperCase=U1,E.upperFirst=Rl,E.each=Cd,E.eachRight=Dd,E.first=Ad,kl(E,(function(){var n={};return Ur(E,function(i,l){We.call(E.prototype,l)||(n[l]=i)}),n})(),{chain:!1}),E.VERSION=s,mr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){E[n].placeholder=E}),mr(["drop","take"],function(n,i){De.prototype[n]=function(l){l=l===t?1:wt(Se(l),0);var f=this.__filtered__&&!i?new De(this):this.clone();return f.__filtered__?f.__takeCount__=$t(l,f.__takeCount__):f.__views__.push({size:$t(l,Fe),type:n+(f.__dir__<0?"Right":"")}),f},De.prototype[n+"Right"]=function(l){return this.reverse()[n](l).reverse()}}),mr(["filter","map","takeWhile"],function(n,i){var l=i+1,f=l==Q||l==Ue;De.prototype[n]=function(_){var S=this.clone();return S.__iteratees__.push({iteratee:ue(_,3),type:l}),S.__filtered__=S.__filtered__||f,S}}),mr(["head","last"],function(n,i){var l="take"+(i?"Right":"");De.prototype[n]=function(){return this[l](1).value()[0]}}),mr(["initial","tail"],function(n,i){var l="drop"+(i?"":"Right");De.prototype[n]=function(){return this.__filtered__?new De(this):this[l](1)}}),De.prototype.compact=function(){return this.filter(Xt)},De.prototype.find=function(n){return this.filter(n).head()},De.prototype.findLast=function(n){return this.reverse().find(n)},De.prototype.invokeMap=Ae(function(n,i){return typeof n=="function"?new De(this):this.map(function(l){return za(l,n,i)})}),De.prototype.reject=function(n){return this.filter(Ji(ue(n)))},De.prototype.slice=function(n,i){n=Se(n);var l=this;return l.__filtered__&&(n>0||i<0)?new De(l):(n<0?l=l.takeRight(-n):n&&(l=l.drop(n)),i!==t&&(i=Se(i),l=i<0?l.dropRight(-i):l.take(i-n)),l)},De.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},De.prototype.toArray=function(){return this.take(Fe)},Ur(De.prototype,function(n,i){var l=/^(?:filter|find|map|reject)|While$/.test(i),f=/^(?:head|last)$/.test(i),_=E[f?"take"+(i=="last"?"Right":""):i],S=f||/^find/.test(i);_&&(E.prototype[i]=function(){var A=this.__wrapped__,k=f?[1]:arguments,D=A instanceof De,U=k[0],Z=D||we(A),V=function(Te){var $e=_.apply(E,yn([Te],k));return f&&X?$e[0]:$e};Z&&l&&typeof U=="function"&&U.length!=1&&(D=Z=!1);var X=this.__chain__,oe=!!this.__actions__.length,de=S&&!X,Re=D&&!oe;if(!S&&Z){A=Re?A:new De(this);var fe=n.apply(A,k);return fe.__actions__.push({func:Gi,args:[V],thisArg:t}),new vr(fe,X)}return de&&Re?n.apply(this,k):(fe=this.thru(V),de?f?fe.value()[0]:fe.value():fe)})}),mr(["pop","push","shift","sort","splice","unshift"],function(n){var i=bi[n],l=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",f=/^(?:pop|shift)$/.test(n);E.prototype[n]=function(){var _=arguments;if(f&&!this.__chain__){var S=this.value();return i.apply(we(S)?S:[],_)}return this[l](function(A){return i.apply(we(A)?A:[],_)})}}),Ur(De.prototype,function(n,i){var l=E[i];if(l){var f=l.name+"";We.call(fa,f)||(fa[f]=[]),fa[f].push({name:i,func:l})}}),fa[zi(t,R).name]=[{name:"wrapper",func:t}],De.prototype.clone=zg,De.prototype.reverse=Ug,De.prototype.value=Hg,E.prototype.at=_0,E.prototype.chain=y0,E.prototype.commit=b0,E.prototype.next=w0,E.prototype.plant=x0,E.prototype.reverse=S0,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=P0,E.prototype.first=E.prototype.head,$a&&(E.prototype[$a]=E0),E}),wn=bg();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Pt._=wn,define(function(){return wn})):Mn?((Mn.exports=wn)._=wn,To._=wn):Pt._=wn}).call(a)}}),Vn=Em(kx(),1),Cx=Em(Ox(),1),Dx=Symbol("Let zodToJsonSchema decide on which parser to use"),hm={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},Ix=a=>typeof a=="string"?{...hm,name:a}:{...hm,...a},$x=a=>{let e=Ix(a),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,r])=>[r._def,{def:r._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}};function Sm(a,e,t,s){s?.errorMessages&&t&&(a.errorMessage={...a.errorMessage,[e]:t})}function Ge(a,e,t,s,r){a[e]=t,Sm(a,e,s,r)}var Pm=(a,e)=>{let t=0;for(;t<a.length&&t<e.length&&a[t]===e[t];t++);return[(a.length-t).toString(),...e.slice(t)].join("/")},qe;(function(a){a.assertEqual=r=>{};function e(r){}a.assertIs=e;function t(r){throw new Error}a.assertNever=t,a.arrayToEnum=r=>{let o={};for(let c of r)o[c]=c;return o},a.getValidEnumValues=r=>{let o=a.objectKeys(r).filter(u=>typeof r[r[u]]!="number"),c={};for(let u of o)c[u]=r[u];return a.objectValues(c)},a.objectValues=r=>a.objectKeys(r).map(function(o){return r[o]}),a.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{let o=[];for(let c in r)Object.prototype.hasOwnProperty.call(r,c)&&o.push(c);return o},a.find=(r,o)=>{for(let c of r)if(o(c))return c},a.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function s(r,o=" | "){return r.map(c=>typeof c=="string"?`'${c}'`:c).join(o)}a.joinValues=s,a.jsonStringifyReplacer=(r,o)=>typeof o=="bigint"?o.toString():o})(qe||(qe={}));var pm;(function(a){a.mergeShapes=(e,t)=>({...e,...t})})(pm||(pm={}));var ne=qe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cn=a=>{switch(typeof a){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return Number.isNaN(a)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(a)?ne.array:a===null?ne.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?ne.promise:typeof Map<"u"&&a instanceof Map?ne.map:typeof Set<"u"&&a instanceof Set?ne.set:typeof Date<"u"&&a instanceof Date?ne.date:ne.object;default:return ne.unknown}},K=qe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Vr=class Rm extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(o){return o.message},s={_errors:[]},r=o=>{for(let c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(r);else if(c.code==="invalid_return_type")r(c.returnTypeError);else if(c.code==="invalid_arguments")r(c.argumentsError);else if(c.path.length===0)s._errors.push(t(c));else{let u=s,d=0;for(;d<c.path.length;){let h=c.path[d];d===c.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(t(c))):u[h]=u[h]||{_errors:[]},u=u[h],d++}}};return r(this),s}static assert(e){if(!(e instanceof Rm))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,qe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},s=[];for(let r of this.issues)if(r.path.length>0){let o=r.path[0];t[o]=t[o]||[],t[o].push(e(r))}else s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}};Vr.create=a=>new Vr(a);var Mx=(a,e)=>{let t;switch(a.code){case K.invalid_type:a.received===ne.undefined?t="Required":t=`Expected ${a.expected}, received ${a.received}`;break;case K.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(a.expected,qe.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:t=`Unrecognized key(s) in object: ${qe.joinValues(a.keys,", ")}`;break;case K.invalid_union:t="Invalid input";break;case K.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${qe.joinValues(a.options)}`;break;case K.invalid_enum_value:t=`Invalid enum value. Expected ${qe.joinValues(a.options)}, received '${a.received}'`;break;case K.invalid_arguments:t="Invalid function arguments";break;case K.invalid_return_type:t="Invalid function return type";break;case K.invalid_date:t="Invalid date";break;case K.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(t=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?t=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?t=`Invalid input: must end with "${a.validation.endsWith}"`:qe.assertNever(a.validation):a.validation!=="regex"?t=`Invalid ${a.validation}`:t="Invalid";break;case K.too_small:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?t=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:t="Invalid input";break;case K.too_big:a.type==="array"?t=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?t=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?t=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?t=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?t=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:t="Invalid input";break;case K.custom:t="Invalid input";break;case K.invalid_intersection_types:t="Intersection results could not be merged";break;case K.not_multiple_of:t=`Number must be a multiple of ${a.multipleOf}`;break;case K.not_finite:t="Number must be finite";break;default:t=e.defaultError,qe.assertNever(a)}return{message:t}},ni=Mx,Lx=ni;function Ac(){return Lx}var Tc=a=>{let{data:e,path:t,errorMaps:s,issueData:r}=a,o=[...t,...r.path||[]],c={...r,path:o};if(r.message!==void 0)return{...r,path:o,message:r.message};let u="",d=s.filter(h=>!!h).slice().reverse();for(let h of d)u=h(c,{data:e,defaultError:u}).message;return{...r,path:o,message:u}};function ee(a,e){let t=Ac(),s=Tc({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,t,t===ni?void 0:ni].filter(r=>!!r)});a.common.issues.push(s)}var ur=class Am{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let r of t){if(r.status==="aborted")return pe;r.status==="dirty"&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let r of t){let o=await r.key,c=await r.value;s.push({key:o,value:c})}return Am.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let r of t){let{key:o,value:c}=r;if(o.status==="aborted"||c.status==="aborted")return pe;o.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof c.value<"u"||r.alwaysSet)&&(s[o.value]=c.value)}return{status:e.value,value:s}}},pe=Object.freeze({status:"aborted"}),ti=a=>({status:"dirty",value:a}),tr=a=>({status:"valid",value:a}),mm=a=>a.status==="aborted",gm=a=>a.status==="dirty",Sa=a=>a.status==="valid",ao=a=>typeof Promise<"u"&&a instanceof Promise,le;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(le||(le={}));var Wr=class{constructor(a,e,t,s){this._cachedPath=[],this.parent=a,this.data=e,this._path=t,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},vm=(a,e)=>{if(Sa(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Vr(a.common.issues);return this._error=t,this._error}}};function Ee(a){if(!a)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:r}=a;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(c,u)=>{let{message:d}=a;return c.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??s??u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:d??t??u.defaultError}},description:r}}var Oe=class{get description(){return this._def.description}_getType(a){return Cn(a.data)}_getOrReturnCtx(a,e){return e||{common:a.parent.common,data:a.data,parsedType:Cn(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new ur,ctx:{common:a.parent.common,data:a.data,parsedType:Cn(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let e=this._parse(a);if(ao(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(a){let e=this._parse(a);return Promise.resolve(e)}parse(a,e){let t=this.safeParse(a,e);if(t.success)return t.data;throw t.error}safeParse(a,e){let t={common:{issues:[],async:e?.async??!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)},s=this._parseSync({data:a,path:t.path,parent:t});return vm(t,s)}"~validate"(a){let e={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)};if(!this["~standard"].async)try{let t=this._parseSync({data:a,path:[],parent:e});return Sa(t)?{value:t.value}:{issues:e.common.issues}}catch(t){t?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),e.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:e}).then(t=>Sa(t)?{value:t.value}:{issues:e.common.issues})}async parseAsync(a,e){let t=await this.safeParseAsync(a,e);if(t.success)return t.data;throw t.error}async safeParseAsync(a,e){let t={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:Cn(a)},s=this._parse({data:a,path:t.path,parent:t}),r=await(ao(s)?s:Promise.resolve(s));return vm(t,r)}refine(a,e){let t=s=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(s):e;return this._refinement((s,r)=>{let o=a(s),c=()=>r.addIssue({code:K.custom,...t(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(a,e){return this._refinement((t,s)=>a(t)?!0:(s.addIssue(typeof e=="function"?e(t,s):e),!1))}_refinement(a){return new hn({schema:this,typeName:Y.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return fn.create(this,this._def)}nullable(){return Gn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pa.create(this)}promise(){return ai.create(this,this._def)}or(a){return lo.create([this,a],this._def)}and(a){return co.create(this,a,this._def)}transform(a){return new hn({...Ee(this._def),schema:this,typeName:Y.ZodEffects,effect:{type:"transform",transform:a}})}default(a){let e=typeof a=="function"?a:()=>a;return new po({...Ee(this._def),innerType:this,defaultValue:e,typeName:Y.ZodDefault})}brand(){return new $m({typeName:Y.ZodBranded,type:this,...Ee(this._def)})}catch(a){let e=typeof a=="function"?a:()=>a;return new mo({...Ee(this._def),innerType:this,catchValue:e,typeName:Y.ZodCatch})}describe(a){let e=this.constructor;return new e({...this._def,description:a})}pipe(a){return Mm.create(this,a)}readonly(){return go.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Nx=/^c[^\s-]{8,}$/i,Fx=/^[0-9a-z]+$/,jx=/^[0-9A-HJKMNP-TV-Z]{26}$/i,qx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,zx=/^[a-z0-9_-]{21}$/i,Ux=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Hx=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zx=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Bx="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Sc,Vx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Wx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Gx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Kx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Yx=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Qx=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Tm="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Jx=new RegExp(`^${Tm}$`);function km(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let t=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Xx(a){return new RegExp(`^${km(a)}$`)}function eS(a){let e=`${Tm}T${km(a)}`,t=[];return t.push(a.local?"Z?":"Z"),a.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function tS(a,e){return!!((e==="v4"||!e)&&Vx.test(a)||(e==="v6"||!e)&&Gx.test(a))}function rS(a,e){if(!Ux.test(a))return!1;try{let[t]=a.split(".");if(!t)return!1;let s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(s));return!(typeof r!="object"||r===null||"typ"in r&&r?.typ!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function nS(a,e){return!!((e==="v4"||!e)&&Wx.test(a)||(e==="v6"||!e)&&Kx.test(a))}var io=class ri extends Oe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){let o=this._getOrReturnCtx(e);return ee(o,{code:K.invalid_type,expected:ne.string,received:o.parsedType}),pe}let s=new ur,r;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){let c=e.data.length>o.value,u=e.data.length<o.value;(c||u)&&(r=this._getOrReturnCtx(e,r),c?ee(r,{code:K.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):u&&ee(r,{code:K.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")Zx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"email",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")Sc||(Sc=new RegExp(Bx,"u")),Sc.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"emoji",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")qx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"uuid",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="nanoid")zx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"nanoid",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")Nx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cuid",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")Fx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cuid2",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")jx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"ulid",code:K.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),ee(r,{validation:"url",code:K.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"regex",code:K.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?eS(o).test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="date"?Jx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"date",message:o.message}),s.dirty()):o.kind==="time"?Xx(o).test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{code:K.invalid_string,validation:"time",message:o.message}),s.dirty()):o.kind==="duration"?Hx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"duration",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="ip"?tS(e.data,o.version)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"ip",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="jwt"?rS(e.data,o.alg)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"jwt",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="cidr"?nS(e.data,o.version)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"cidr",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="base64"?Yx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"base64",code:K.invalid_string,message:o.message}),s.dirty()):o.kind==="base64url"?Qx.test(e.data)||(r=this._getOrReturnCtx(e,r),ee(r,{validation:"base64url",code:K.invalid_string,message:o.message}),s.dirty()):qe.assertNever(o);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(r=>e.test(r),{validation:t,code:K.invalid_string,...le.errToObj(s)})}_addCheck(e){return new ri({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...le.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...le.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...le.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...le.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...le.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...le.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...le.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...le.errToObj(t)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new ri({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ri({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ri({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};io.create=a=>new io({checks:[],typeName:Y.ZodString,coerce:a?.coerce??!1,...Ee(a)});function aS(a,e){let t=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,r=t>s?t:s,o=Number.parseInt(a.toFixed(r).replace(".","")),c=Number.parseInt(e.toFixed(r).replace(".",""));return o%c/10**r}var kc=class Oc extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){let o=this._getOrReturnCtx(e);return ee(o,{code:K.invalid_type,expected:ne.number,received:o.parsedType}),pe}let s,r=new ur;for(let o of this._def.checks)o.kind==="int"?qe.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.invalid_type,expected:"integer",received:"float",message:o.message}),r.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),r.dirty()):o.kind==="multipleOf"?aS(e.data,o.value)!==0&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_finite,message:o.message}),r.dirty()):qe.assertNever(o);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,s,r){return new Oc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:le.toString(r)}]})}_addCheck(e){return new Oc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}};kc.create=a=>new kc({checks:[],typeName:Y.ZodNumber,coerce:a?.coerce||!1,...Ee(a)});var Cc=class Dc extends Oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ne.bigint)return this._getInvalidInput(e);let s,r=new ur;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),r.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),ee(s,{code:K.not_multiple_of,multipleOf:o.value,message:o.message}),r.dirty()):qe.assertNever(o);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return ee(t,{code:K.invalid_type,expected:ne.bigint,received:t.parsedType}),pe}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,s,r){return new Dc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:le.toString(r)}]})}_addCheck(e){return new Dc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Cc.create=a=>new Cc({checks:[],typeName:Y.ZodBigInt,coerce:a?.coerce??!1,...Ee(a)});var Ic=class extends Oe{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==ne.boolean){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.boolean,received:t.parsedType}),pe}return tr(a.data)}};Ic.create=a=>new Ic({typeName:Y.ZodBoolean,coerce:a?.coerce||!1,...Ee(a)});var $c=class Om extends Oe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){let o=this._getOrReturnCtx(e);return ee(o,{code:K.invalid_type,expected:ne.date,received:o.parsedType}),pe}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:K.invalid_date}),pe}let s=new ur,r;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(r=this._getOrReturnCtx(e,r),ee(r,{code:K.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):qe.assertNever(o);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Om({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};$c.create=a=>new $c({checks:[],coerce:a?.coerce||!1,typeName:Y.ZodDate,...Ee(a)});var Mc=class extends Oe{_parse(a){if(this._getType(a)!==ne.symbol){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.symbol,received:t.parsedType}),pe}return tr(a.data)}};Mc.create=a=>new Mc({typeName:Y.ZodSymbol,...Ee(a)});var so=class extends Oe{_parse(a){if(this._getType(a)!==ne.undefined){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.undefined,received:t.parsedType}),pe}return tr(a.data)}};so.create=a=>new so({typeName:Y.ZodUndefined,...Ee(a)});var oo=class extends Oe{_parse(a){if(this._getType(a)!==ne.null){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.null,received:t.parsedType}),pe}return tr(a.data)}};oo.create=a=>new oo({typeName:Y.ZodNull,...Ee(a)});var Lc=class extends Oe{constructor(){super(...arguments),this._any=!0}_parse(a){return tr(a.data)}};Lc.create=a=>new Lc({typeName:Y.ZodAny,...Ee(a)});var xa=class extends Oe{constructor(){super(...arguments),this._unknown=!0}_parse(a){return tr(a.data)}};xa.create=a=>new xa({typeName:Y.ZodUnknown,...Ee(a)});var Dn=class extends Oe{_parse(a){let e=this._getOrReturnCtx(a);return ee(e,{code:K.invalid_type,expected:ne.never,received:e.parsedType}),pe}};Dn.create=a=>new Dn({typeName:Y.ZodNever,...Ee(a)});var Nc=class extends Oe{_parse(a){if(this._getType(a)!==ne.undefined){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.void,received:t.parsedType}),pe}return tr(a.data)}};Nc.create=a=>new Nc({typeName:Y.ZodVoid,...Ee(a)});var Pa=class ro extends Oe{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==ne.array)return ee(t,{code:K.invalid_type,expected:ne.array,received:t.parsedType}),pe;if(r.exactLength!==null){let c=t.data.length>r.exactLength.value,u=t.data.length<r.exactLength.value;(c||u)&&(ee(t,{code:c?K.too_big:K.too_small,minimum:u?r.exactLength.value:void 0,maximum:c?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(ee(t,{code:K.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(ee(t,{code:K.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((c,u)=>r.type._parseAsync(new Wr(t,c,t.path,u)))).then(c=>ur.mergeArray(s,c));let o=[...t.data].map((c,u)=>r.type._parseSync(new Wr(t,c,t.path,u)));return ur.mergeArray(s,o)}get element(){return this._def.type}min(e,t){return new ro({...this._def,minLength:{value:e,message:le.toString(t)}})}max(e,t){return new ro({...this._def,maxLength:{value:e,message:le.toString(t)}})}length(e,t){return new ro({...this._def,exactLength:{value:e,message:le.toString(t)}})}nonempty(e){return this.min(1,e)}};Pa.create=(a,e)=>new Pa({type:a,minLength:null,maxLength:null,exactLength:null,typeName:Y.ZodArray,...Ee(e)});function Ea(a){if(a instanceof Mr){let e={};for(let t in a.shape){let s=a.shape[t];e[t]=fn.create(Ea(s))}return new Mr({...a._def,shape:()=>e})}else return a instanceof Pa?new Pa({...a._def,type:Ea(a.element)}):a instanceof fn?fn.create(Ea(a.unwrap())):a instanceof Gn?Gn.create(Ea(a.unwrap())):a instanceof Wn?Wn.create(a.items.map(e=>Ea(e))):a}var Mr=class $r extends Oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=qe.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ne.object){let h=this._getOrReturnCtx(e);return ee(h,{code:K.invalid_type,expected:ne.object,received:h.parsedType}),pe}let{status:s,ctx:r}=this._processInputParams(e),{shape:o,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof Dn&&this._def.unknownKeys==="strip"))for(let h in r.data)c.includes(h)||u.push(h);let d=[];for(let h of c){let m=o[h],g=r.data[h];d.push({key:{status:"valid",value:h},value:m._parse(new Wr(r,g,r.path,h)),alwaysSet:h in r.data})}if(this._def.catchall instanceof Dn){let h=this._def.unknownKeys;if(h==="passthrough")for(let m of u)d.push({key:{status:"valid",value:m},value:{status:"valid",value:r.data[m]}});else if(h==="strict")u.length>0&&(ee(r,{code:K.unrecognized_keys,keys:u}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let m of u){let g=r.data[m];d.push({key:{status:"valid",value:m},value:h._parse(new Wr(r,g,r.path,m)),alwaysSet:m in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let h=[];for(let m of d){let g=await m.key,v=await m.value;h.push({key:g,value:v,alwaysSet:m.alwaysSet})}return h}).then(h=>ur.mergeObjectSync(s,h)):ur.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new $r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{let r=this._def.errorMap?.(t,s).message??s.defaultError;return t.code==="unrecognized_keys"?{message:le.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new $r({...this._def,unknownKeys:"strip"})}passthrough(){return new $r({...this._def,unknownKeys:"passthrough"})}extend(e){return new $r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new $r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Y.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new $r({...this._def,catchall:e})}pick(e){let t={};for(let s of qe.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new $r({...this._def,shape:()=>t})}omit(e){let t={};for(let s of qe.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new $r({...this._def,shape:()=>t})}deepPartial(){return Ea(this)}partial(e){let t={};for(let s of qe.objectKeys(this.shape)){let r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new $r({...this._def,shape:()=>t})}required(e){let t={};for(let s of qe.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof fn;)o=o._def.innerType;t[s]=o}return new $r({...this._def,shape:()=>t})}keyof(){return Im(qe.objectKeys(this.shape))}};Mr.create=(a,e)=>new Mr({shape:()=>a,unknownKeys:"strip",catchall:Dn.create(),typeName:Y.ZodObject,...Ee(e)});Mr.strictCreate=(a,e)=>new Mr({shape:()=>a,unknownKeys:"strict",catchall:Dn.create(),typeName:Y.ZodObject,...Ee(e)});Mr.lazycreate=(a,e)=>new Mr({shape:a,unknownKeys:"strip",catchall:Dn.create(),typeName:Y.ZodObject,...Ee(e)});var lo=class extends Oe{_parse(a){let{ctx:e}=this._processInputParams(a),t=this._def.options;function s(r){for(let c of r)if(c.result.status==="valid")return c.result;for(let c of r)if(c.result.status==="dirty")return e.common.issues.push(...c.ctx.common.issues),c.result;let o=r.map(c=>new Vr(c.ctx.common.issues));return ee(e,{code:K.invalid_union,unionErrors:o}),pe}if(e.common.async)return Promise.all(t.map(async r=>{let o={...e,common:{...e.common,issues:[]},parent:null};return{result:await r._parseAsync({data:e.data,path:e.path,parent:o}),ctx:o}})).then(s);{let r,o=[];for(let u of t){let d={...e,common:{...e.common,issues:[]},parent:null},h=u._parseSync({data:e.data,path:e.path,parent:d});if(h.status==="valid")return h;h.status==="dirty"&&!r&&(r={result:h,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(r)return e.common.issues.push(...r.ctx.common.issues),r.result;let c=o.map(u=>new Vr(u));return ee(e,{code:K.invalid_union,unionErrors:c}),pe}}get options(){return this._def.options}};lo.create=(a,e)=>new lo({options:a,typeName:Y.ZodUnion,...Ee(e)});var dn=a=>a instanceof uo?dn(a.schema):a instanceof hn?dn(a.innerType()):a instanceof fo?[a.value]:a instanceof _o?a.options:a instanceof ho?qe.objectValues(a.enum):a instanceof po?dn(a._def.innerType):a instanceof so?[void 0]:a instanceof oo?[null]:a instanceof fn?[void 0,...dn(a.unwrap())]:a instanceof Gn?[null,...dn(a.unwrap())]:a instanceof $m||a instanceof go?dn(a.unwrap()):a instanceof mo?dn(a._def.innerType):[],iS=class Cm extends Oe{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.object)return ee(t,{code:K.invalid_type,expected:ne.object,received:t.parsedType}),pe;let s=this.discriminator,r=t.data[s],o=this.optionsMap.get(r);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(ee(t,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let r=new Map;for(let o of t){let c=dn(o.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of c){if(r.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);r.set(u,o)}}return new Cm({typeName:Y.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Ee(s)})}};function Fc(a,e){let t=Cn(a),s=Cn(e);if(a===e)return{valid:!0,data:a};if(t===ne.object&&s===ne.object){let r=qe.objectKeys(e),o=qe.objectKeys(a).filter(u=>r.indexOf(u)!==-1),c={...a,...e};for(let u of o){let d=Fc(a[u],e[u]);if(!d.valid)return{valid:!1};c[u]=d.data}return{valid:!0,data:c}}else if(t===ne.array&&s===ne.array){if(a.length!==e.length)return{valid:!1};let r=[];for(let o=0;o<a.length;o++){let c=a[o],u=e[o],d=Fc(c,u);if(!d.valid)return{valid:!1};r.push(d.data)}return{valid:!0,data:r}}else return t===ne.date&&s===ne.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}var co=class extends Oe{_parse(a){let{status:e,ctx:t}=this._processInputParams(a),s=(r,o)=>{if(mm(r)||mm(o))return pe;let c=Fc(r.value,o.value);return c.valid?((gm(r)||gm(o))&&e.dirty(),{status:e.value,value:c.data}):(ee(t,{code:K.invalid_intersection_types}),pe)};return t.common.async?Promise.all([this._def.left._parseAsync({data:t.data,path:t.path,parent:t}),this._def.right._parseAsync({data:t.data,path:t.path,parent:t})]).then(([r,o])=>s(r,o)):s(this._def.left._parseSync({data:t.data,path:t.path,parent:t}),this._def.right._parseSync({data:t.data,path:t.path,parent:t}))}};co.create=(a,e,t)=>new co({left:a,right:e,typeName:Y.ZodIntersection,...Ee(t)});var Wn=class Dm extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.array)return ee(s,{code:K.invalid_type,expected:ne.array,received:s.parsedType}),pe;if(s.data.length<this._def.items.length)return ee(s,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pe;!this._def.rest&&s.data.length>this._def.items.length&&(ee(s,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let o=[...s.data].map((c,u)=>{let d=this._def.items[u]||this._def.rest;return d?d._parse(new Wr(s,c,s.path,u)):null}).filter(c=>!!c);return s.common.async?Promise.all(o).then(c=>ur.mergeArray(t,c)):ur.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new Dm({...this._def,rest:e})}};Wn.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wn({items:a,typeName:Y.ZodTuple,rest:null,...Ee(e)})};var sS=class jc extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.object)return ee(s,{code:K.invalid_type,expected:ne.object,received:s.parsedType}),pe;let r=[],o=this._def.keyType,c=this._def.valueType;for(let u in s.data)r.push({key:o._parse(new Wr(s,u,s.path,u)),value:c._parse(new Wr(s,s.data[u],s.path,u)),alwaysSet:u in s.data});return s.common.async?ur.mergeObjectAsync(t,r):ur.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof Oe?new jc({keyType:e,valueType:t,typeName:Y.ZodRecord,...Ee(s)}):new jc({keyType:io.create(),valueType:e,typeName:Y.ZodRecord,...Ee(t)})}},qc=class extends Oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:e,ctx:t}=this._processInputParams(a);if(t.parsedType!==ne.map)return ee(t,{code:K.invalid_type,expected:ne.map,received:t.parsedType}),pe;let s=this._def.keyType,r=this._def.valueType,o=[...t.data.entries()].map(([c,u],d)=>({key:s._parse(new Wr(t,c,t.path,[d,"key"])),value:r._parse(new Wr(t,u,t.path,[d,"value"]))}));if(t.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let u of o){let d=await u.key,h=await u.value;if(d.status==="aborted"||h.status==="aborted")return pe;(d.status==="dirty"||h.status==="dirty")&&e.dirty(),c.set(d.value,h.value)}return{status:e.value,value:c}})}else{let c=new Map;for(let u of o){let d=u.key,h=u.value;if(d.status==="aborted"||h.status==="aborted")return pe;(d.status==="dirty"||h.status==="dirty")&&e.dirty(),c.set(d.value,h.value)}return{status:e.value,value:c}}}};qc.create=(a,e,t)=>new qc({valueType:e,keyType:a,typeName:Y.ZodMap,...Ee(t)});var zc=class Uc extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==ne.set)return ee(s,{code:K.invalid_type,expected:ne.set,received:s.parsedType}),pe;let r=this._def;r.minSize!==null&&s.data.size<r.minSize.value&&(ee(s,{code:K.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&s.data.size>r.maxSize.value&&(ee(s,{code:K.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let o=this._def.valueType;function c(d){let h=new Set;for(let m of d){if(m.status==="aborted")return pe;m.status==="dirty"&&t.dirty(),h.add(m.value)}return{status:t.value,value:h}}let u=[...s.data.values()].map((d,h)=>o._parse(new Wr(s,d,s.path,h)));return s.common.async?Promise.all(u).then(d=>c(d)):c(u)}min(e,t){return new Uc({...this._def,minSize:{value:e,message:le.toString(t)}})}max(e,t){return new Uc({...this._def,maxSize:{value:e,message:le.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};zc.create=(a,e)=>new zc({valueType:a,minSize:null,maxSize:null,typeName:Y.ZodSet,...Ee(e)});var oS=class no extends Oe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.function)return ee(t,{code:K.invalid_type,expected:ne.function,received:t.parsedType}),pe;function s(u,d){return Tc({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ac(),ni].filter(h=>!!h),issueData:{code:K.invalid_arguments,argumentsError:d}})}function r(u,d){return Tc({data:u,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ac(),ni].filter(h=>!!h),issueData:{code:K.invalid_return_type,returnTypeError:d}})}let o={errorMap:t.common.contextualErrorMap},c=t.data;if(this._def.returns instanceof ai){let u=this;return tr(async function(...d){let h=new Vr([]),m=await u._def.args.parseAsync(d,o).catch(p=>{throw h.addIssue(s(d,p)),h}),g=await Reflect.apply(c,this,m);return await u._def.returns._def.type.parseAsync(g,o).catch(p=>{throw h.addIssue(r(g,p)),h})})}else{let u=this;return tr(function(...d){let h=u._def.args.safeParse(d,o);if(!h.success)throw new Vr([s(d,h.error)]);let m=Reflect.apply(c,this,h.data),g=u._def.returns.safeParse(m,o);if(!g.success)throw new Vr([r(m,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new no({...this._def,args:Wn.create(e).rest(xa.create())})}returns(e){return new no({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new no({args:e||Wn.create([]).rest(xa.create()),returns:t||xa.create(),typeName:Y.ZodFunction,...Ee(s)})}},uo=class extends Oe{get schema(){return this._def.getter()}_parse(a){let{ctx:e}=this._processInputParams(a);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}};uo.create=(a,e)=>new uo({getter:a,typeName:Y.ZodLazy,...Ee(e)});var fo=class extends Oe{_parse(a){if(a.data!==this._def.value){let e=this._getOrReturnCtx(a);return ee(e,{received:e.data,code:K.invalid_literal,expected:this._def.value}),pe}return{status:"valid",value:a.data}}get value(){return this._def.value}};fo.create=(a,e)=>new fo({value:a,typeName:Y.ZodLiteral,...Ee(e)});function Im(a,e){return new _o({values:a,typeName:Y.ZodEnum,...Ee(e)})}var _o=class Hc extends Oe{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),s=this._def.values;return ee(t,{expected:qe.joinValues(s),received:t.parsedType,code:K.invalid_type}),pe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return ee(t,{received:t.data,code:K.invalid_enum_value,options:s}),pe}return tr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Hc.create(e,{...this._def,...t})}exclude(e,t=this._def){return Hc.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}};_o.create=Im;var ho=class extends Oe{_parse(a){let e=qe.getValidEnumValues(this._def.values),t=this._getOrReturnCtx(a);if(t.parsedType!==ne.string&&t.parsedType!==ne.number){let s=qe.objectValues(e);return ee(t,{expected:qe.joinValues(s),received:t.parsedType,code:K.invalid_type}),pe}if(this._cache||(this._cache=new Set(qe.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let s=qe.objectValues(e);return ee(t,{received:t.data,code:K.invalid_enum_value,options:s}),pe}return tr(a.data)}get enum(){return this._def.values}};ho.create=(a,e)=>new ho({values:a,typeName:Y.ZodNativeEnum,...Ee(e)});var ai=class extends Oe{unwrap(){return this._def.type}_parse(a){let{ctx:e}=this._processInputParams(a);if(e.parsedType!==ne.promise&&e.common.async===!1)return ee(e,{code:K.invalid_type,expected:ne.promise,received:e.parsedType}),pe;let t=e.parsedType===ne.promise?e.data:Promise.resolve(e.data);return tr(t.then(s=>this._def.type.parseAsync(s,{path:e.path,errorMap:e.common.contextualErrorMap})))}};ai.create=(a,e)=>new ai({type:a,typeName:Y.ZodPromise,...Ee(e)});var hn=class extends Oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:e,ctx:t}=this._processInputParams(a),s=this._def.effect||null,r={addIssue:o=>{ee(t,o),o.fatal?e.abort():e.dirty()},get path(){return t.path}};if(r.addIssue=r.addIssue.bind(r),s.type==="preprocess"){let o=s.transform(t.data,r);if(t.common.async)return Promise.resolve(o).then(async c=>{if(e.value==="aborted")return pe;let u=await this._def.schema._parseAsync({data:c,path:t.path,parent:t});return u.status==="aborted"?pe:u.status==="dirty"||e.value==="dirty"?ti(u.value):u});{if(e.value==="aborted")return pe;let c=this._def.schema._parseSync({data:o,path:t.path,parent:t});return c.status==="aborted"?pe:c.status==="dirty"||e.value==="dirty"?ti(c.value):c}}if(s.type==="refinement"){let o=c=>{let u=s.refinement(c,r);if(t.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(t.common.async===!1){let c=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});return c.status==="aborted"?pe:(c.status==="dirty"&&e.dirty(),o(c.value),{status:e.value,value:c.value})}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(c=>c.status==="aborted"?pe:(c.status==="dirty"&&e.dirty(),o(c.value).then(()=>({status:e.value,value:c.value}))))}if(s.type==="transform")if(t.common.async===!1){let o=this._def.schema._parseSync({data:t.data,path:t.path,parent:t});if(!Sa(o))return pe;let c=s.transform(o.value,r);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:c}}else return this._def.schema._parseAsync({data:t.data,path:t.path,parent:t}).then(o=>Sa(o)?Promise.resolve(s.transform(o.value,r)).then(c=>({status:e.value,value:c})):pe);qe.assertNever(s)}};hn.create=(a,e,t)=>new hn({schema:a,typeName:Y.ZodEffects,effect:e,...Ee(t)});hn.createWithPreprocess=(a,e,t)=>new hn({schema:e,effect:{type:"preprocess",transform:a},typeName:Y.ZodEffects,...Ee(t)});var fn=class extends Oe{_parse(a){return this._getType(a)===ne.undefined?tr(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}};fn.create=(a,e)=>new fn({innerType:a,typeName:Y.ZodOptional,...Ee(e)});var Gn=class extends Oe{_parse(a){return this._getType(a)===ne.null?tr(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}};Gn.create=(a,e)=>new Gn({innerType:a,typeName:Y.ZodNullable,...Ee(e)});var po=class extends Oe{_parse(a){let{ctx:e}=this._processInputParams(a),t=e.data;return e.parsedType===ne.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}};po.create=(a,e)=>new po({innerType:a,typeName:Y.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ee(e)});var mo=class extends Oe{_parse(a){let{ctx:e}=this._processInputParams(a),t={...e,common:{...e.common,issues:[]}},s=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return ao(s)?s.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Vr(t.common.issues)},input:t.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Vr(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}};mo.create=(a,e)=>new mo({innerType:a,typeName:Y.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ee(e)});var Zc=class extends Oe{_parse(a){if(this._getType(a)!==ne.nan){let t=this._getOrReturnCtx(a);return ee(t,{code:K.invalid_type,expected:ne.nan,received:t.parsedType}),pe}return{status:"valid",value:a.data}}};Zc.create=a=>new Zc({typeName:Y.ZodNaN,...Ee(a)});var ST=Symbol("zod_brand"),$m=class extends Oe{_parse(a){let{ctx:e}=this._processInputParams(a),t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}},Mm=class Lm extends Oe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?pe:o.status==="dirty"?(t.dirty(),ti(o.value)):this._def.out._parseAsync({data:o.value,path:s.path,parent:s})})();{let r=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?pe:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:s.path,parent:s})}}static create(e,t){return new Lm({in:e,out:t,typeName:Y.ZodPipeline})}},go=class extends Oe{_parse(a){let e=this._def.innerType._parse(a),t=s=>(Sa(s)&&(s.value=Object.freeze(s.value)),s);return ao(e)?e.then(s=>t(s)):t(e)}unwrap(){return this._def.innerType}};go.create=(a,e)=>new go({innerType:a,typeName:Y.ZodReadonly,...Ee(e)});var PT={object:Mr.lazycreate},Y;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(Y||(Y={}));var RT=io.create,AT=kc.create,TT=Zc.create,kT=Cc.create,OT=Ic.create,CT=$c.create,DT=Mc.create,IT=so.create,$T=oo.create,MT=Lc.create,LT=xa.create,NT=Dn.create,FT=Nc.create,jT=Pa.create,qT=Mr.create,zT=Mr.strictCreate,UT=lo.create,HT=iS.create,ZT=co.create,BT=Wn.create,VT=sS.create,WT=qc.create,GT=zc.create,KT=oS.create,YT=uo.create,QT=fo.create,JT=_o.create,XT=ho.create,ek=ai.create,tk=hn.create,rk=fn.create,nk=Gn.create,ak=hn.createWithPreprocess,ik=Mm.create;function rr(a){if(a.target!=="openAi")return{};let e=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:a.$refStrategy==="relative"?Pm(e,a.currentPath):e.join("/")}}function lS(a,e){let t={type:"array"};return a.type?._def&&a.type?._def?.typeName!==Y.ZodAny&&(t.items=Ze(a.type._def,{...e,currentPath:[...e.currentPath,"items"]})),a.minLength&&Ge(t,"minItems",a.minLength.value,a.minLength.message,e),a.maxLength&&Ge(t,"maxItems",a.maxLength.value,a.maxLength.message,e),a.exactLength&&(Ge(t,"minItems",a.exactLength.value,a.exactLength.message,e),Ge(t,"maxItems",a.exactLength.value,a.exactLength.message,e)),t}function cS(a,e){let t={type:"integer",format:"int64"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?Ge(t,"minimum",s.value,s.message,e):Ge(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Ge(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Ge(t,"maximum",s.value,s.message,e):Ge(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Ge(t,"maximum",s.value,s.message,e));break;case"multipleOf":Ge(t,"multipleOf",s.value,s.message,e);break}return t}function uS(){return{type:"boolean"}}function Nm(a,e){return Ze(a.type._def,e)}var dS=(a,e)=>Ze(a.innerType._def,e);function Fm(a,e,t){let s=t??e.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((r,o)=>Fm(a,e,r))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return fS(a,e)}}var fS=(a,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let s of a.checks)switch(s.kind){case"min":Ge(t,"minimum",s.value,s.message,e);break;case"max":Ge(t,"maximum",s.value,s.message,e);break}return t};function hS(a,e){return{...Ze(a.innerType._def,e),default:a.defaultValue()}}function pS(a,e){return e.effectStrategy==="input"?Ze(a.schema._def,e):rr(e)}function mS(a){return{type:"string",enum:Array.from(a.values)}}var gS=a=>"type"in a&&a.type==="string"?!1:"allOf"in a;function vS(a,e){let t=[Ze(a.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ze(a.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return t.forEach(o=>{if(gS(o))r.push(...o.allOf),o.unevaluatedProperties===void 0&&(s=void 0);else{let c=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:u,...d}=o;c=d}else s=void 0;r.push(c)}}),r.length?{allOf:r,...s}:void 0}function _S(a,e){let t=typeof a.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(a.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[a.value]}:{type:t==="bigint"?"integer":t,const:a.value}}var Pc=void 0,Dr={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Pc===void 0&&(Pc=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Pc),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function jm(a,e){let t={type:"string"};if(a.checks)for(let s of a.checks)switch(s.kind){case"min":Ge(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":Ge(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Ir(t,"email",s.message,e);break;case"format:idn-email":Ir(t,"idn-email",s.message,e);break;case"pattern:zod":Bt(t,Dr.email,s.message,e);break}break;case"url":Ir(t,"uri",s.message,e);break;case"uuid":Ir(t,"uuid",s.message,e);break;case"regex":Bt(t,s.regex,s.message,e);break;case"cuid":Bt(t,Dr.cuid,s.message,e);break;case"cuid2":Bt(t,Dr.cuid2,s.message,e);break;case"startsWith":Bt(t,RegExp(`^${Rc(s.value,e)}`),s.message,e);break;case"endsWith":Bt(t,RegExp(`${Rc(s.value,e)}$`),s.message,e);break;case"datetime":Ir(t,"date-time",s.message,e);break;case"date":Ir(t,"date",s.message,e);break;case"time":Ir(t,"time",s.message,e);break;case"duration":Ir(t,"duration",s.message,e);break;case"length":Ge(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),Ge(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{Bt(t,RegExp(Rc(s.value,e)),s.message,e);break}case"ip":{s.version!=="v6"&&Ir(t,"ipv4",s.message,e),s.version!=="v4"&&Ir(t,"ipv6",s.message,e);break}case"base64url":Bt(t,Dr.base64url,s.message,e);break;case"jwt":Bt(t,Dr.jwt,s.message,e);break;case"cidr":{s.version!=="v6"&&Bt(t,Dr.ipv4Cidr,s.message,e),s.version!=="v4"&&Bt(t,Dr.ipv6Cidr,s.message,e);break}case"emoji":Bt(t,Dr.emoji(),s.message,e);break;case"ulid":{Bt(t,Dr.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Ir(t,"binary",s.message,e);break}case"contentEncoding:base64":{Ge(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{Bt(t,Dr.base64,s.message,e);break}}break}case"nanoid":Bt(t,Dr.nanoid,s.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}function Rc(a,e){return e.patternStrategy==="escape"?bS(a):a}var yS=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function bS(a){let e="";for(let t=0;t<a.length;t++)yS.has(a[t])||(e+="\\"),e+=a[t];return e}function Ir(a,e,t,s){a.format||a.anyOf?.some(r=>r.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&s.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:e,...t&&s.errorMessages&&{errorMessage:{format:t}}})):Ge(a,"format",e,t,s)}function Bt(a,e,t,s){a.pattern||a.allOf?.some(r=>r.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&s.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:_m(e,s),...t&&s.errorMessages&&{errorMessage:{pattern:t}}})):Ge(a,"pattern",_m(e,s),t,s)}function _m(a,e){if(!e.applyRegexFlags||!a.flags)return a.source;let t={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},s=t.i?a.source.toLowerCase():a.source,r="",o=!1,c=!1,u=!1;for(let d=0;d<s.length;d++){if(o){r+=s[d],o=!1;continue}if(t.i){if(c){if(s[d].match(/[a-z]/)){u?(r+=s[d],r+=`${s[d-2]}-${s[d]}`.toUpperCase(),u=!1):s[d+1]==="-"&&s[d+2]?.match(/[a-z]/)?(r+=s[d],u=!0):r+=`${s[d]}${s[d].toUpperCase()}`;continue}}else if(s[d].match(/[a-z]/)){r+=`[${s[d]}${s[d].toUpperCase()}]`;continue}}if(t.m){if(s[d]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(s[d]==="$"){r+=`($|(?=[\r
]))`;continue}}if(t.s&&s[d]==="."){r+=c?`${s[d]}\r
`:`[${s[d]}\r
]`;continue}r+=s[d],s[d]==="\\"?o=!0:c&&s[d]==="]"?c=!1:!c&&s[d]==="["&&(c=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return r}function qm(a,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&a.keyType?._def.typeName===Y.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((s,r)=>({...s,[r]:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"properties",r]})??rr(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let t={type:"object",additionalProperties:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(a.keyType?._def.typeName===Y.ZodString&&a.keyType._def.checks?.length){let{type:s,...r}=jm(a.keyType._def,e);return{...t,propertyNames:r}}else{if(a.keyType?._def.typeName===Y.ZodEnum)return{...t,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===Y.ZodBranded&&a.keyType._def.type._def.typeName===Y.ZodString&&a.keyType._def.type._def.checks?.length){let{type:s,...r}=Nm(a.keyType._def,e);return{...t,propertyNames:r}}}return t}function wS(a,e){if(e.mapStrategy==="record")return qm(a,e);let t=Ze(a.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||rr(e),s=Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||rr(e);return{type:"array",maxItems:125,items:{type:"array",items:[t,s],minItems:2,maxItems:2}}}function ES(a){let e=a.values,s=Object.keys(a.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),r=Array.from(new Set(s.map(o=>typeof o)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:s}}function xS(a){return a.target==="openAi"?void 0:{not:rr({...a,currentPath:[...a.currentPath,"not"]})}}function SS(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var vo={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function PS(a,e){if(e.target==="openApi3")return ym(a,e);let t=a.options instanceof Map?Array.from(a.options.values()):a.options;if(t.every(s=>s._def.typeName in vo&&(!s._def.checks||!s._def.checks.length))){let s=t.reduce((r,o)=>{let c=vo[o._def.typeName];return c&&!r.includes(c)?[...r,c]:r},[]);return{type:s.length>1?s:s[0]}}else if(t.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){let s=t.reduce((r,o)=>{let c=typeof o._def.value;switch(c){case"string":case"number":case"boolean":return[...r,c];case"bigint":return[...r,"integer"];case"object":if(o._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(s.length===t.length){let r=s.filter((o,c,u)=>u.indexOf(o)===c);return{type:r.length>1?r:r[0],enum:t.reduce((o,c)=>o.includes(c._def.value)?o:[...o,c._def.value],[])}}}else if(t.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((s,r)=>[...s,...r._def.values.filter(o=>!s.includes(o))],[])};return ym(a,e)}var ym=(a,e)=>{let t=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((s,r)=>Ze(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return t.length?{anyOf:t}:void 0};function RS(a,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return e.target==="openApi3"?{type:vo[a.innerType._def.typeName],nullable:!0}:{type:[vo[a.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let s=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}let t=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function AS(a,e){let t={type:"number"};if(!a.checks)return t;for(let s of a.checks)switch(s.kind){case"int":t.type="integer",Sm(t,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?Ge(t,"minimum",s.value,s.message,e):Ge(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),Ge(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?Ge(t,"maximum",s.value,s.message,e):Ge(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),Ge(t,"maximum",s.value,s.message,e));break;case"multipleOf":Ge(t,"multipleOf",s.value,s.message,e);break}return t}function TS(a,e){let t=e.target==="openAi",s={type:"object",properties:{}},r=[],o=a.shape();for(let u in o){let d=o[u];if(d===void 0||d._def===void 0)continue;let h=OS(d);h&&t&&(d._def.typeName==="ZodOptional"&&(d=d._def.innerType),d.isNullable()||(d=d.nullable()),h=!1);let m=Ze(d._def,{...e,currentPath:[...e.currentPath,"properties",u],propertyPath:[...e.currentPath,"properties",u]});m!==void 0&&(s.properties[u]=m,h||r.push(u))}r.length&&(s.required=r);let c=kS(a,e);return c!==void 0&&(s.additionalProperties=c),s}function kS(a,e){if(a.catchall._def.typeName!=="ZodNever")return Ze(a.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function OS(a){try{return a.isOptional()}catch{return!0}}var CS=(a,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Ze(a.innerType._def,e);let t=Ze(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:rr(e)},t]}:rr(e)},DS=(a,e)=>{if(e.pipeStrategy==="input")return Ze(a.in._def,e);if(e.pipeStrategy==="output")return Ze(a.out._def,e);let t=Ze(a.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=Ze(a.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,s].filter(r=>r!==void 0)}};function IS(a,e){return Ze(a.type._def,e)}function $S(a,e){let s={type:"array",uniqueItems:!0,items:Ze(a.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return a.minSize&&Ge(s,"minItems",a.minSize.value,a.minSize.message,e),a.maxSize&&Ge(s,"maxItems",a.maxSize.value,a.maxSize.message,e),s}function MS(a,e){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((t,s)=>Ze(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[]),additionalItems:Ze(a.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((t,s)=>Ze(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[])}}function LS(a){return{not:rr(a)}}function NS(a){return rr(a)}var FS=(a,e)=>Ze(a.innerType._def,e),jS=(a,e,t)=>{switch(e){case Y.ZodString:return jm(a,t);case Y.ZodNumber:return AS(a,t);case Y.ZodObject:return TS(a,t);case Y.ZodBigInt:return cS(a,t);case Y.ZodBoolean:return uS();case Y.ZodDate:return Fm(a,t);case Y.ZodUndefined:return LS(t);case Y.ZodNull:return SS(t);case Y.ZodArray:return lS(a,t);case Y.ZodUnion:case Y.ZodDiscriminatedUnion:return PS(a,t);case Y.ZodIntersection:return vS(a,t);case Y.ZodTuple:return MS(a,t);case Y.ZodRecord:return qm(a,t);case Y.ZodLiteral:return _S(a,t);case Y.ZodEnum:return mS(a);case Y.ZodNativeEnum:return ES(a);case Y.ZodNullable:return RS(a,t);case Y.ZodOptional:return CS(a,t);case Y.ZodMap:return wS(a,t);case Y.ZodSet:return $S(a,t);case Y.ZodLazy:return()=>a.getter()._def;case Y.ZodPromise:return IS(a,t);case Y.ZodNaN:case Y.ZodNever:return xS(t);case Y.ZodEffects:return pS(a,t);case Y.ZodAny:return rr(t);case Y.ZodUnknown:return NS(t);case Y.ZodDefault:return hS(a,t);case Y.ZodBranded:return Nm(a,t);case Y.ZodReadonly:return FS(a,t);case Y.ZodCatch:return dS(a,t);case Y.ZodPipeline:return DS(a,t);case Y.ZodFunction:case Y.ZodVoid:case Y.ZodSymbol:return;default:return(s=>{})(e)}};function Ze(a,e,t=!1){let s=e.seen.get(a);if(e.override){let u=e.override?.(a,e,s,t);if(u!==Dx)return u}if(s&&!t){let u=qS(s,e);if(u!==void 0)return u}let r={def:a,path:e.currentPath,jsonSchema:void 0};e.seen.set(a,r);let o=jS(a,a.typeName,e),c=typeof o=="function"?Ze(o(),e):o;if(c&&zS(a,e,c),e.postProcess){let u=e.postProcess(c,a,e);return r.jsonSchema=c,u}return r.jsonSchema=c,c}var qS=(a,e)=>{switch(e.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:Pm(e.currentPath,a.path)};case"none":case"seen":return a.path.length<e.currentPath.length&&a.path.every((t,s)=>e.currentPath[s]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),rr(e)):e.$refStrategy==="seen"?rr(e):void 0}},zS=(a,e,t)=>(a.description&&(t.description=a.description,e.markdownDescription&&(t.markdownDescription=a.description)),t),US=(a,e)=>{let t=$x(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((d,[h,m])=>({...d,[h]:Ze(m._def,{...t,currentPath:[...t.basePath,t.definitionPath,h]},!0)??rr(t)}),{}):void 0,r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,o=Ze(a._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??rr(t),c=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;c!==void 0&&(o.title=c),t.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[t.openAiAnyTypeName]||(s[t.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:t.$refStrategy==="relative"?"1":[...t.basePath,t.definitionPath,t.openAiAnyTypeName].join("/")}}));let u=r===void 0?s?{...o,[t.definitionPath]:s}:o:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...s,[r]:o}};return t.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u},to=Ec;function HS(a,e){let t={};for(let s of a){let r=s.match(/^([^=]+)=(.*)$/);if(!r)continue;let[,o,c]=r,u=o.split("."),d=c;try{d=JSON.parse(c)}catch{}Cx.default.set(t,u,d)}if(e){let s=e.safeParse(t);if(!s.success){let r=US(e),o=s.error.issues.map(c=>{let u=c.path.join("."),d=c.message,h=t;for(let m of c.path)if(h&&typeof h=="object"&&m in h)h=h[m];else{h=void 0;break}return`  ${u}: ${d} (received: ${JSON.stringify(h)})`});return console.error(`
${Vn.default.red("[smithery]")} Configuration validation failed:`),console.error(o.join(`
`)),console.error(`
Expected schema:`),console.error(JSON.stringify(r,null,2)),console.error(`
Example usage:`),console.error("  node server.js server.host=localhost server.port=8080 debug=true"),{config:t,errors:o}}return{config:s.data,errors:void 0}}return{config:t,errors:void 0}}async function ZS(){try{console.error(`${Vn.default.blue("[smithery]")} Starting MCP server with stdio transport`);let a=process.argv.slice(2),{config:e,errors:t}=HS(a,to.configSchema);t&&process.exit(1);let s;if(to.default&&typeof to.default=="function"){let o=`stdio-${Date.now()}-${Math.random().toString(36).substring(2)}`;console.error(`${Vn.default.blue("[smithery]")} Creating server.`),s=to.default({sessionId:o,config:e})}else throw new Error(`No valid server export found. Please export:
- export default function({ sessionId, config }) { ... }`);let r=new eo;await s.connect(r),console.error(`${Vn.default.green("[smithery]")} MCP server connected to stdio transport`),Object.keys(e).length>0&&console.error(`${Vn.default.blue("[smithery]")} Configuration loaded:`,e)}catch(a){console.error(`${Vn.default.red("[smithery]")} Failed to start MCP server:`,a),process.exit(1)}}ZS().catch(a=>{console.error(`${Vn.default.red("[smithery]")} Unhandled error:`,a),process.exit(1)});
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/
